(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1104:function(e,t,n){"use strict";n.r(t);n(7),n(8),n(32),n(16),n(38),n(44),n(10);var r=n(146),o=n(149),c=n(212),l=n(213),d=n(148),f=(n(1),n(88)),k=(n(994),n(995),n(996),n(997),n(1021),n(1022),n(365)),h=n(109),v=n.n(h),m=n(9),S=n(1031),_=n(5),y=n(519);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var T=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},x=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},O=function(e){Object(c.a)(n,e);var t=w(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).visible=!0,e.isLoadMoreTaskStatusShow=!1,e}return Object(o.a)(n,[{key:"mounted",value:function(){var e=this;this.task.statuses[0]||this.$store.dispatch("url-task-list/ipcGetSingleTaskStatus",{taskId:this.$route.params.id}).then((function(){e.isLoadMoreTaskStatusShow=!0}))}},{key:"back",value:function(){this.$router.back()}},{key:"close",value:function(){return x(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getCurrentWindow().__resolve();case 2:e.sent.close();case 4:case"end":return e.stop()}}),e)})))}},{key:"dblclickCloudAdd",value:function(e){return x(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("PHASE_TYPE_COMPLETE"!==e.phase){t.next=20;break}return t.next=3,this.$store.dispatch("drive/getFileInfo",e.file_id).catch((function(e){console.error("openfile error",e)}));case 3:if(n=t.sent,![y.AuditStatus.STATUS_SENSITIVE_RESOURCE,y.AuditStatus.STATUS_SENSITIVE_WORD].includes(n.audit.status)){t.next=7;break}return this.$message({id:"dblclickCloudAdd",unique:!0,position:"middle",type:"error",message:"文件异常，不支持查看"}),t.abrupt("return");case 7:if("video"!==Object(m.checkCanPreview)(Object(m.getFileExtension)(e.file_name))){t.next=11;break}Object(_.callServer)("PlayFileByXmp",{playUrl:n.web_content_link,fileName:n.name,isEmbed:!1,openFrom:"ThunderPanPlugin",panFileId:n.id,medias:n.medias}),t.next=18;break;case 11:if("picture"!==Object(m.checkCanPreview)(Object(m.getFileExtension)(e.file_name))){t.next=17;break}return r={windowWidth:900,windowHeight:616,singleton:!0,imgSrc:n.web_content_link},t.next=15,Object(_.callServer)("MessageBoxCustom","imgViewer",r,{resizable:!0});case 15:t.next=18;break;case 17:this.$message({id:"dblclickCloudAdd",unique:!0,position:"middle",type:"error",message:"暂不支持在线查看"});case 18:t.next=21;break;case 20:"PHASE_TYPE_ERROR"===e.phase&&this.$message({id:"dblclickCloudAdd",unique:!0,position:"middle",type:"error",message:e.message});case 21:case"end":return t.stop()}}),t,this)})))}},{key:"loadMoreTaskStatus",value:function(){var e=this;this.$store.dispatch("url-task-list/ipcGetSingleTaskStatus",{taskId:this.$route.params.id,refresh:!1}).then((function(){e.isLoadMoreTaskStatusShow=!0})).catch((function(t){e.$message({message:"接口出现异常",type:"error",position:"middle",duration:1e3}),console.error(t)}))}},{key:"isDisable",value:function(e){return!![y.AuditStatus.STATUS_SENSITIVE_RESOURCE,y.AuditStatus.STATUS_SENSITIVE_WORD].includes(this.$sget(e,"reference_resource","audit","status"))}},{key:"task",get:function(){return this.$store.getters["url-task-list/getUrlTask"](this.$route.params.id)}}]),n}(k.Vue),E=O=T([Object(k.Component)({name:"TaskId",components:{TransferItem:S.a}})],O),R=n(147),component=Object(R.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td-dialog",{attrs:{"custom-class":"xly-transport",visible:e.visible,"footer-enabled":!1},on:{"update:visible":function(t){e.visible=t},ok:function(t){e.visible=!1},click:function(t){return t.stopPropagation(),e.close(t)}}},[n("div",{staticClass:"xly-transport__back",on:{click:function(t){return t.stopPropagation(),e.back(t)}}},[n("i",{staticClass:"xly-icon-arrow-left"}),e._v(" "),n("span",{staticClass:"title"},[e._v(e._s(this.task.file_name))])]),e._v(" "),n("div",{staticClass:"xly-transport__content xly-transport__content--add"},[n("ul",{staticClass:"xly-transport__items"},[e._l(e.task.statuses,(function(t){return n("li",{key:t.id,staticClass:"xly-transport__item",class:{"is-disabled":e.isDisable(t)},on:{dblclick:function(n){return e.dblclickCloudAdd(t)}}},[n("TransferItem",{attrs:{task:t,type:"urlTask"}})],1)})),e._v(" "),e.isLoadMoreTaskStatusShow?n("div",{directives:[{name:"load",rawName:"v-load",value:{func:e.loadMoreTaskStatus},expression:"{ func: loadMoreTaskStatus }"}],staticStyle:{height:"20px"}}):e._e()],2)])])}),[],!1,null,null,null);t.default=component.exports}}]);