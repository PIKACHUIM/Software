/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1009:function(e,t,n){"use strict";var o=n(988);n.n(o).a},1010:function(e,t,n){(t=n(78)(!1)).push([e.i,".xly-dialog-path{width:450px;padding:0 18px 18px}.xly-dialog-path h2{padding:13px 0;text-align:left}.xly-dialog-path__content{border-radius:4px;border:1px solid var(--color-border)}.xly-dialog-path__content .td-tree{margin-right:2px;height:200px;overflow-y:auto}.xly-dialog-path__content .td-tree::-webkit-scrollbar{width:10px;background:transparent}.xly-dialog-path__content .td-tree::-webkit-scrollbar:horizontal{height:10px}.xly-dialog-path__content .td-tree::-webkit-scrollbar-thumb{border-radius:2px;width:10px;background:#e6e6e6}.xly-dialog-path__content .td-tree::-webkit-scrollbar-thumb:hover{background:#e6e6e6}.xly-dialog-path .td-tree-node{cursor:default}.xly-dialog-path .td-tree-node__content{height:30px}.xly-dialog-path .td-tree-node__label{margin-left:7px}.xly-dialog-path .td-tree-node__image-icon{margin-left:10px}.xly-dialog-path .td-tree-node.is-disabled{color:#ccc}.xly-dialog-path .td-tree-node.is-disabled .td-tree-node__image-icon{opacity:.5}",""]),e.exports=t},1011:function(e,t,n){"use strict";var o=n(989);n.n(o).a},1012:function(e,t,n){(t=n(78)(!1)).push([e.i,".td-tree-node__image-icon{background-size:cover}",""]),e.exports=t},1107:function(e,t,n){"use strict";n.r(t);n(7),n(8),n(32),n(16),n(112),n(998),n(38),n(44),n(10);var o=n(146),r=n(149),c=n(212),l=n(213),d=n(148),f=(n(1),n(88)),h=n(365),v=n(6),y=n(999),_=n(3),x=n(29);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(d.a)(e);if(t){var r=Object(d.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(l.a)(this,n)}}var O=function(e,t,n,desc){var o,r=arguments.length,c=r<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(r<3?o(c):r>3?o(t,n,c):o(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c},w=function(e,t,n,o){return new(n||(n=Promise))((function(r,c){function l(e){try{f(o.next(e))}catch(e){c(e)}}function d(e){try{f(o.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((o=o.apply(e,t||[])).next())}))},k=function(e){Object(c.a)(n,e);var t=m(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).data=[],e}return Object(r.a)(n,[{key:"mounted",value:function(){var e;return w(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,r,path,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.prev=1,t.next=4,Object(v.k)("");case 4:if(o=t.sent,null===(e=null==o?void 0:o.files)||void 0===e?void 0:e.length){t.next=7;break}return t.abrupt("return");case 7:n=o.files,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.warn(t.t0);case 13:return t.prev=13,this.data=[{id:"",children:n,title:"我的云盘",expand:!0,icon:"https://backstage-img-ssl.a.88cdn.com/019fc2a136a2881181e73fea74a4836efc02195d"}],this.data[0].children.forEach((function(e,t){x.SYSTEM_FOLDER_TYPE_LIST.includes(e.folder_type)?e.__order=Number.MIN_SAFE_INTEGER+x.SYSTEM_FOLDER_TYPE_LIST.indexOf(e.folder_type):e.__order=t,e.title=e.name,e.icon=e.icon_link,e.leaf="drive#file"===e.kind})),t.prev=16,t.next=19,Object(y.a)({props:{data:this.data,callerInstance:this,bindingKeyGenerator:function(e){return e.id},disableClass:"is-disabled"}});case 19:if(!(r=t.sent)){t.next=31;break}for(path=[],c=r.node.id,l=r;l.$parent.node;)path.push({id:l.node.id,title:l.node.title}),l=l.$parent;return path.push({id:l.node.id,title:l.node.title}),path.reverse(),t.next=29,_.a.callRemoteClientFunction("ThunderPanPluginWebview","TreePath",{parentId:c,path:path});case 29:t.next=33;break;case 31:return t.next=33,_.a.callRemoteClientFunction("ThunderPanPluginWebview","TreePath",{error:"chosenNode is empty"});case 33:window.close(),t.next=41;break;case 36:return t.prev=36,t.t1=t.catch(16),t.next=40,_.a.callRemoteClientFunction("ThunderPanPluginWebview","TreePath",{error:"close window"});case 40:window.close();case 41:t.next=46;break;case 43:t.prev=43,t.t2=t.catch(13),console.error(t.t2);case 46:case"end":return t.stop()}}),t,this,[[1,10],[13,43],[16,36]])})))}}]),n}(h.Vue),j=k=O([Object(h.Component)({})],k),P=n(147),component=Object(P.a)(j,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null);t.default=component.exports},983:function(e,t,n){var content=n(987);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("4421b217",content,!0,{sourceMap:!1})},985:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(993);function r(e){return Object(o.createDecorator)((function(t,n){if(!t.methods)throw new Error("This decorator must be used on a vue component method.");var time="number"==typeof e?e:e.time,o=t.methods[n],r=0,c=function(){r&&(clearTimeout(r),r=0)};t.methods[n]=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c(),r=setTimeout((function(){r=0,o.apply(e,t)}),time)}}))}},986:function(e,t,n){"use strict";var o=n(983);n.n(o).a},987:function(e,t,n){(t=n(78)(!1)).push([e.i,".td-dialog .td-dialog__close:hover{background-color:#ff7b5f}.td-dialog h2{color:#1a1a1a}.td-dialog .xly-dialog__footer{position:relative;display:flex;justify-content:flex-end;width:100%}.td-dialog .xly-dialog__footer .xly-dialog-path__new{width:90px}.td-dialog .xly-dialog__footer-operate{position:absolute;left:0;display:flex;align-items:center;height:30px}.td-dialog .xly-dialog__footer-link{color:var(--color-primary)}.td-dialog .xly-dialog__button{display:flex}.td-dialog .xly-dialog__button .td-button{width:80px}.xly-dialog-site{margin-top:28px}.xly-dialog-site .td-select{margin-top:12px}.xly-dialog-site .td-select.is-checked .td-select-group{border-color:var(--color-primary)}.xly-dialog-site .td-select.is-checked .xly-select__file{color:var(--color-primary)}.xly-dialog-site .td-select.is-checked .xly-select__file:hover{color:var(--color-hover)}.xly-dialog-site .td-select .td-checkbox{margin-left:12px}.xly-dialog-site .td-select .td-checkbox__label{margin:0 12px;color:var(--color-primary)}.xly-dialog-site .td-select .td-select__drop{margin-right:34px}.xly-dialog-site .xly-select__file{position:absolute;right:8px;color:var(--color-primary)}.xly-dialog-site .xly-select__size{margin-right:10px;color:var(--color-secondary)}.xly-dialog-site .xly-select__size.is-warn{color:#ff9700}.xly-dialog-site .xly-select__size.is-danger{color:var(--color-danger)}.xly-dialog-site .xly-select__link{position:absolute;top:2px;left:80px;width:calc(100% - 110px);line-height:26px;text-indent:5px;color:var(--color-primary);background:#fff}.xly-dialog-site .td-input__inner{padding:6px 10px}.xly-dialog-site__checkbox{margin:12px 0 0}",""]),e.exports=t},988:function(e,t,n){var content=n(1010);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("28c488d2",content,!0,{sourceMap:!1})},989:function(e,t,n){var content=n(1012);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("47d474a5",content,!0,{sourceMap:!1})},993:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=(o=n(0))&&"object"==typeof o&&"default"in o?o.default:o,c="undefined"!=typeof Reflect&&Reflect.defineMetadata;function l(e,t,n){(n?Reflect.getOwnMetadataKeys(t,n):Reflect.getOwnMetadataKeys(t)).forEach((function(o){var r=n?Reflect.getOwnMetadata(o,t,n):Reflect.getOwnMetadata(o,t);n?Reflect.defineMetadata(o,r,e,n):Reflect.defineMetadata(o,r,e)}))}var d={__proto__:[]}instanceof Array;var f=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured"];function h(e,t){void 0===t&&(t={}),t.name=t.name||e._componentTag||e.name;var n=e.prototype;Object.getOwnPropertyNames(n).forEach((function(e){if("constructor"!==e)if(f.indexOf(e)>-1)t[e]=n[e];else{var o=Object.getOwnPropertyDescriptor(n,e);void 0!==o.value?"function"==typeof o.value?(t.methods||(t.methods={}))[e]=o.value:(t.mixins||(t.mixins=[])).push({data:function(){var t;return(t={})[e]=o.value,t}}):(o.get||o.set)&&((t.computed||(t.computed={}))[e]={get:o.get,set:o.set})}})),(t.mixins||(t.mixins=[])).push({data:function(){return function(e,t){var n=t.prototype._init;t.prototype._init=function(){var t=this,n=Object.getOwnPropertyNames(e);if(e.$options.props)for(var o in e.$options.props)e.hasOwnProperty(o)||n.push(o);n.forEach((function(n){"_"!==n.charAt(0)&&Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){e[n]=t},configurable:!0})}))};var data=new t;t.prototype._init=n;var o={};return Object.keys(data).forEach((function(e){void 0!==data[e]&&(o[e]=data[e])})),o}(this,e)}});var o=e.__decorators__;o&&(o.forEach((function(e){return e(t)})),delete e.__decorators__);var h,v,y=Object.getPrototypeOf(e.prototype),_=y instanceof r?y.constructor:r,x=_.extend(t);return function(e,t,n){Object.getOwnPropertyNames(t).forEach((function(o){if("prototype"!==o){var r=Object.getOwnPropertyDescriptor(e,o);if(!r||r.configurable){var c,l,f=Object.getOwnPropertyDescriptor(t,o);if(!d){if("cid"===o)return;var h=Object.getOwnPropertyDescriptor(n,o);if(c=f.value,l=typeof c,null!=c&&("object"===l||"function"===l)&&h&&h.value===f.value)return}0,Object.defineProperty(e,o,f)}}}))}(x,e,_),c&&(l(h=x,v=e),Object.getOwnPropertyNames(v.prototype).forEach((function(e){l(h.prototype,v.prototype,e)})),Object.getOwnPropertyNames(v).forEach((function(e){l(h,v,e)}))),x}function v(e){return"function"==typeof e?h(e):function(t){return h(t,e)}}v.registerHooks=function(e){f.push.apply(f,e)},t.default=v,t.createDecorator=function(e){return function(t,n,o){var r="function"==typeof t?t:t.constructor;r.__decorators__||(r.__decorators__=[]),"number"!=typeof o&&(o=void 0),r.__decorators__.push((function(t){return e(t,n,o)}))}},t.mixins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.extend({mixins:e})}},998:function(e,t,n){var o=n(26);o(o.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},999:function(e,t,n){"use strict";n(1);var o=n(0),r=(n(7),n(8),n(32),n(16),n(10),n(146)),c=n(149),l=n(212),d=n(213),f=n(148),h=n(88),v=n(365),y=n(6),_=n(985),x=n(9),m=n(3);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Object(f.a)(e);if(t){var r=Object(f.a)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return Object(d.a)(this,n)}}var w=function(e,t,n,desc){var o,r=arguments.length,c=r<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(o=e[i])&&(c=(r<3?o(c):r>3?o(t,n,c):o(t,n))||c);return r>3&&c&&Object.defineProperty(t,n,c),c},k=function(e,t,n,o){return new(n||(n=Promise))((function(r,c){function l(e){try{f(o.next(e))}catch(e){c(e)}}function d(e){try{f(o.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((o=o.apply(e,t||[])).next())}))},j=function(e){Object(l.a)(n,e);var t=O(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).visible=!1,e.selectVueTreeNode=null,e.visibleCreateOrRenameDialog=!1,e}return Object(c.a)(n,[{key:"show",value:function(){this.visible=!0}},{key:"emit",value:function(){this.visible=!1,this.$destroy(),this.resolve(this.selectVueTreeNode)}},{key:"handleCreateDirectory",value:function(){this.callerInstance.$eventTrack("yunpan_move_copy_pop_click",{type:this.moveOrCopy,clickid:"new_floder"});var e=this.$refs.tree;e&&e.chosenNode&&(e.chosenNode.mode="create")}},{key:"mounted",value:function(){var e=this.$refs.tree,t=e.$children;e.chosenNode=t[0],this.handleChangeChosenNode(e.chosenNode)}},{key:"handleChangeChosenNode",value:function(e){this.selectVueTreeNode=e}},{key:"handleConfirmCreateDirectory",value:function(e){var t=e.chosenNode,content=e.content;return k(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.callerInstance.$store.dispatch("drive/addFolderWithParentId",{name:content,parentId:t.node.id});case 3:(n=e.sent).file&&this.$nextTick((function(){var e=Object.assign(Object.assign({},n.file),{leaf:!0,__order:-t.node.children.length,__level:t.node.__level+1,title:n.file.name,icon:n.file.icon_link});t.node.children.push(e),t.node.children.sort((function(a,b){return a.__order-b.__order})),r.$nextTick((function(){var t=r.findVueInstanceNodeById(e.id);r.handleChangeChosenNode(t),r.$refs.tree.chosenNode=t}))})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=Object(x.safeJSONParse)(e.t0.message),m.a.callRemoteClientFunction("ThunderPanPluginWebview","ShowToast",{message:o.error_description,type:"error",position:"middle",duration:2e3});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"loadFunction",value:function(e){var t;return k(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(y.k)(e.id);case 3:return o=n.sent,(null===(t=null==o?void 0:o.files)||void 0===t?void 0:t.length)||(e.leaf=!0),(data=o.files).forEach((function(e,t){e.__order=t,e.title=e.name,e.icon=e.icon_link,e.leaf="drive#file"===e.kind})),n.abrupt("return",data);case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:return n.abrupt("return",[]);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))}},{key:"bindingKeyGenerator",value:function(e){return e.id}},{key:"close",value:function(){this.visible=!1,this.$destroy(),this.reject()}},{key:"findVueInstanceNodeById",value:function(e){for(var t=[this.$refs.tree];t.length>0;)for(var n=t.shift(),i=0;i<n.$children.length;i++){var o=n.$children[i];if(o.node){if(o.node.id===e)return o;t.push(o)}}}}]),n}(v.Vue);w([Object(v.Prop)({})],j.prototype,"resolve",void 0),w([Object(v.Prop)({})],j.prototype,"reject",void 0),w([Object(v.Prop)({})],j.prototype,"data",void 0),w([Object(v.Prop)({})],j.prototype,"callerInstance",void 0),w([Object(v.Prop)({})],j.prototype,"disableFunction",void 0),w([Object(v.Prop)({})],j.prototype,"disableClass",void 0),w([Object(v.Prop)({})],j.prototype,"moveOrCopy",void 0),w([Object(_.a)({time:10})],j.prototype,"handleConfirmCreateDirectory",null);var P,R=j=w([Object(v.Component)({})],j),C=(n(986),n(1009),n(1011),n(147)),N=Object(C.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td-dialog",{attrs:{"custom-class":"xly-dialog-path",visible:e.visible},on:{"update:visible":function(t){e.visible=t},ok:function(t){e.visible=!1},close:e.close}},[n("h2",{attrs:{slot:"header"},slot:"header"},[e._v("\n    选择云盘保存路径\n  ")]),e._v(" "),n("div",{staticClass:"xly-dialog-path__content"},[n("td-tree-plus",{ref:"tree",attrs:{data:e.data,"level-padding":20,lazy:!0,load:e.loadFunction,"binding-key-generator":e.bindingKeyGenerator,"disable-function":e.disableFunction,"disable-class":e.disableClass,"default-placeholder":"新建文件夹"},on:{changeChosenNode:e.handleChangeChosenNode,create:e.handleConfirmCreateDirectory}})],1),e._v(" "),n("div",{staticClass:"xly-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"xly-dialog__footer-operate"},[n("td-button",{staticClass:"td-button--other xly-dialog-path__new",on:{click:e.handleCreateDirectory}},[e._v("\n        新建文件夹\n      ")])],1),e._v(" "),n("div",{staticClass:"xly-dialog__button"},[n("td-button",{on:{click:e.emit}},[e._v("\n        确定\n      ")]),e._v(" "),n("td-button",{staticClass:"td-button--other",on:{click:e.close}},[e._v("\n        取消\n      ")])],1)])])}),[],!1,null,null,null).exports,T=o.default.extend(N),E=function(e,t,n){!function(e){P=new T({el:document.createElement("div"),propsData:Object.assign({},e.props)})}(e),P.resolve=t,P.reject=n,document.body.appendChild(P.$el),o.default.nextTick((function(){P.show()}))};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){E(e,t,n)}))}}}]);