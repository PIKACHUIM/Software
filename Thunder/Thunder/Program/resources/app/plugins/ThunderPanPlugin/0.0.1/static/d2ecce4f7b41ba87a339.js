(window.webpackJsonp=window.webpackJsonp||[]).push([[17,5,9],{1e3:function(e,t,n){(t=n(78)(!1)).push([e.i,"body{--color-primary:#3f85ff;--color-default:#4d4d4d;--color-secondary:#b3b3b3;--color-hover:#2670ea;--color-danger:#ff7b5f;--color-note:#ff9701;--color-title:#1a1a1a;--color-icon:#6a707c;--color-border:#e6e6e6;--color-disabled:#ccc;--color-success:#00b36a;--background:#f5f5f5;--background-secondary:#eff6fe;--input-border-color:#eee;--button-default-fill:#3f85ff;--button-default-fill-hover:#619bff;--button-secondary-fill:#f5f5f5;--button-secondary-color:#727272;--button-disable-color:#ccc;--button-disable-fill:#f5f5f5;--button-secondary-fill-hover:#e6e6e6;--input-border-color-hover:#eee;--table-color-line:#eee;--dropdown-border-color:var(--color-border)}",""]),e.exports=t},1001:function(e,t,n){var r=n(78),o=n(181),c=n(520),l=n(521);t=r(!1);var d=o(c),f=o(l);t.push([e.i,'pre{font-family:microsoft yahei,-apple-system,PingFang SC,simsun,Arial,sans-serif}body::-webkit-scrollbar{width:8px;background:transparent}body::-webkit-scrollbar:horizontal{height:8px}body::-webkit-scrollbar-thumb{border-radius:2px;width:8px;background:#e6e6e6}body::-webkit-scrollbar-thumb:hover{background:#ccc}body .td-checkbox .td-checkbox__inner{width:14px;height:14px;border-color:#e6e6e6}body .td-checkbox .td-checkbox__inner:hover{border-color:var(--color-primary)}body .td-checkbox .td-checkbox__inner:checked:before{left:2px;width:7px;border-width:2px;border-color:var(--color-primary)}body .td-checkbox .td-checkbox__inner:checked{background:unset}body .td-checkbox.is-indeterminate .td-checkbox__inner{background:unset;border-color:var(--color-border)}body .td-checkbox.is-indeterminate .td-checkbox__inner:before{top:50%;left:50%;width:6px;height:6px;background:var(--color-primary);border:unset;transform:translate3d(-50%,-50%,0)}body .td-checkbox.is-indeterminate .td-checkbox__inner:hover{border-color:var(--color-primary)}body .td-checkbox.is-disabled .td-checkbox__inner,body .td-checkbox.is-disabled .td-checkbox__inner:checked{background:#f5f5f5;border:1px solid #e6e6e6}body .td-checkbox.is-disabled .td-checkbox__inner:checked:before{border-color:#ccc}body .td-icon-success:before{content:"\\e7a8"}.xly-line{width:1px;height:10px;margin:0 4px;background:#e6e6e6}.td-radio__inner,.td-select-group,.td-select-group:hover{border-color:var(--color-border)}.td-radio__inner{width:14px;height:14px}.td-radio__inner:checked{border-color:var(--color-border)}.td-radio__inner:checked:after{width:7px;height:7px}.td-table{background:unset}.td-table th{height:23px;border-bottom:unset}.td-table td{height:28px;border-bottom:unset}.td-button.td-button--large{font-size:14px}.td-button.td-button--other{border-color:#ccccc0}.td-button.td-button--other:hover{color:var(--color-primary);border-color:#ccc}.td-button.td-button--other:active{background:#eff6fe;border-color:var(--color-primary)}.xly-img-empty-netdisk{width:160px;height:140px;background:url('+d+") no-repeat;background-size:100% auto}.xly-img-network{width:160px;height:140px;background:url("+f+') no-repeat;background-size:100% auto}.xly-empty{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.xly-empty i.xly-icon-logo{font-size:120px;color:#e6e6e6}.xly-error{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%}.xly-error p{margin:20px 0 22px;color:var(--color-secondary)}.xly-error .td-button{width:72px}body .td-cover .td-icon-error,body .td-cover .td-icon-warning{font-family:xly-icon!important}body .td-cover .td-icon-error:before,body .td-cover .td-icon-warning:before{content:"\\e757"}body .td-cover .td-icon-success:before{font-family:xly-icon!important;content:"\\e7a8"}body .td-cover .td-message__text{margin-left:12px}body .td-cover .td-message--error{color:#fff;background:#e66056}body .td-cover .td-message--warning{color:#fff;background:#ff9700}body .td-cover .td-message--success{color:#fff;background:#38b878}body .td-button.td-button--other{font-size:12px}body .td-button.td-button--other:hover{border-color:#ccc}body .td-button.td-button--other:active{border:1px solid #c2d7ff}body .td-button.td-button--other.is-disabled{color:#ccc;background:transparent;border-color:#e6e6e6}',""]),e.exports=t},1002:function(e,t,n){var r=n(78),o=n(181),c=n(524);t=r(!1);var l=o(c);t.push([e.i,"@font-face{font-family:xly-icon;src:url("+l+') format("woff")}[class*=" xly-icon-"],[class^=xly-icon]{font-family:xly-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.xly-icon-add:before{content:"\\e74a"}.xly-icon-menu:before{content:"\\e74b"}.xly-icon-search:before{content:"\\e74c"}.xly-icon-nav-find:before{content:"\\e74d"}.xly-icon-nav-message:before{content:"\\e74e"}.xly-icon-nav-down:before{content:"\\e74f"}.xly-icon-share:before{content:"\\e750"}.xly-icon-theme:before{content:"\\e751"}.xly-icon-nav-cloud:before{content:"\\e752"}.xly-icon-link:before{content:"\\e661"}.xly-icon-send:before{content:"\\e63e"}.xly-icon-face:before{content:"\\e642"}.xly-icon-img:before{content:"\\e68f"}.xly-icon-maximize:before{content:"\\e753"}.xly-icon-minimize:before{content:"\\e754"}.xly-icon-close:before{content:"\\e755"}.xly-icon-download:before{content:"\\e75a"}.xly-icon-pause:before{content:"\\e759"}.xly-icon-praise:before{content:"\\e758"}.xly-icon-note:before{content:"\\e757"}.xly-icon-more:before{content:"\\e756"}.xly-icon-add-tab:before{content:"\\e75c"}.xly-icon-fav:before{content:"\\e75d"}.xly-icon-delete-comment:before{content:"\\e75e"}.xly-icon-comment:before{content:"\\e75f"}.xly-icon-resize:before{content:"\\e761"}.xly-icon-arrow-right:before{content:"\\e762"}.xly-icon-rename:before{content:"\\e763"}.xly-icon-file:before{content:"\\e760"}.xly-icon-open:before{content:"\\e764"}.xly-icon-restore:before{content:"\\e765"}.xly-icon-clear:before{content:"\\e766"}.xly-icon-play:before{content:"\\e767"}.xly-icon-close-small:before{content:"\\e768"}.xly-icon-help:before{content:"\\e769"}.xly-icon-clear-1:before{content:"\\e76a"}.xly-icon-upload:before{content:"\\e76b"}.xly-icon-retry:before{content:"\\e76c"}.xly-icon-logo:before{content:"\\e76f"}.xly-icon-drag:before{content:"\\e76d"}.xly-icon-transport:before{content:"\\e76e"}.xly-icon-sequence:before{content:"\\e770"}.xly-icon-success:before{content:"\\e771"}.xly-icon-refresh:before{content:"\\e772"}.xly-icon-copy:before{content:"\\e773"}.xly-icon-arrow-down:before{content:"\\e774"}.xly-icon-play-detail:before{content:"\\e775"}.xly-icon-magnifier:before{content:"\\e77c"}.xly-icon-collapse:before{content:"\\e778"}.xly-icon-report-fill:before{content:"\\e779"}.xly-icon-comment-fill:before{content:"\\e77a"}.xly-icon-quote:before{content:"\\e77b"}.xly-icon-hot:before{content:"\\e777"}.xly-icon-delete:before{content:"\\e776"}.xly-icon-sort:before{content:"\\e77d"}.xly-icon-upload-total:before{content:"\\e77e"}.xly-icon-time:before{content:"\\e77f"}.xly-icon-user:before{content:"\\e780"}.xly-icon-peak-upload:before{content:"\\e781"}.xly-icon-speed:before{content:"\\e782"}.xly-icon-peak-download:before{content:"\\e783"}.xly-icon-file-1:before{content:"\\e784"}.xly-icon-download-total:before{content:"\\e785"}.xly-icon-luky:before{content:"\\e786"}.xly-icon-qzone:before{content:"\\e787"}.xly-icon-qq:before{content:"\\e788"}.xly-icon-net:before{content:"\\e696"}.xly-icon-disk:before{content:"\\e78a"}.xly-icon-refresh-1:before{content:"\\e789"}.xly-icon-arrow-right-1:before{content:"\\e78c"}.xly-icon-arrow-left:before{content:"\\e78b"}.xly-icon-history:before{content:"\\e78e"}.xly-icon-search-1:before{content:"\\e78f"}.xly-icon-close-search:before{content:"\\e790"}.xly-icon-success-fill:before{content:"\\e78d"}.xly-icon-minimize-small:before{content:"\\e791"}.xly-icon-maximize-small:before{content:"\\e793"}.xly-icon-magnify:before{content:"\\e794"}.xly-icon-ratio:before{content:"\\e795"}.xly-icon-minify:before{content:"\\e796"}.xly-icon-reduce-small:before{content:"\\e792"}.xly-icon-reduce:before{content:"\\e797"}.xly-icon-eye:before{content:"\\e79c"}.xly-icon-eye-open:before{content:"\\e79d"}.xly-icon-arrow-down-1:before{content:"\\e798"}.xly-icon-alipay:before{content:"\\e79b"}.xly-icon-wechat:before{content:"\\e799"}.xly-icon-weibo:before{content:"\\e79a"}.xly-icon-parse:before{content:"\\e79e"}.xly-icon-loading{color:var(--color-secondary);-webkit-animation:loading 2s linear infinite both;animation:loading 2s linear infinite both}.xly-icon-loading:before{content:"\\e79f"}@-webkit-keyframes loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}@keyframes loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.xly-icon-vip:before{content:"\\e7a0"}.xly-icon-super:before{content:"\\e7a1"}.xly-icon-time-1:before{content:"\\e7a2"}.xly-icon-speed-1:before{content:"\\e7a3"}.xly-icon-together:before{content:"\\e7a4"}.xly-icon-note-bold:before{content:"\\e7a5"}.xly-icon-skip:before{content:"\\e7a6"}.xly-icon-replace:before{content:"\\e7a7"}.xly-icon-cast-screen:before{content:"\\e7a9"}.xly-icon-back:before{content:"\\e7ab"}.xly-icon-ratio-optimal:before{content:"\\e7aa"}.xly-icon-open-file:before{content:"\\e7ad"}.xly-icon-fav-fill:before{content:"\\e7ac"}.xly-icon-play-small:before{content:"\\e7ae"}.xly-icon-file-small:before{content:"\\e7af"}.xly-icon-open-small:before{content:"\\e7b0"}',""]),e.exports=t},1003:function(e,t,n){var r=n(78),o=n(181),c=n(525);t=r(!1);var l=o(c);t.push([e.i,".xly-icon-type{display:inline-block;width:30px;height:30px;background:url("+l+") -125px -125px no-repeat;background-size:210px auto}.xly-icon-type.is-middle{zoom:.8}.xly-icon-type.is-small{zoom:.5333}.xly-icon-type.xly-type-apk{background-position:-5px -5px}.xly-icon-type.xly-type-bt-file{background-position:-45px -5px}.xly-icon-type.xly-type-bt-link{background-position:-5px -45px}.xly-icon-type.xly-type-doc{background-position:-45px -45px}.xly-icon-type.xly-type-group{background-position:-85px -5px}.xly-icon-type.xly-type-link{background-position:-85px -45px}.xly-icon-type.xly-type-magnetic{background-position:-5px -85px}.xly-icon-type.xly-type-music{background-position:-45px -85px}.xly-icon-type.xly-type-pdf{background-position:-85px -85px}.xly-icon-type.xly-type-pic{background-position:-125px -5px}.xly-icon-type.xly-type-ppt{background-position:-125px -45px}.xly-icon-type.xly-type-rar{background-position:-125px -85px}.xly-icon-type.xly-type-save{background-position:-45px -125px}.xly-icon-type.xly-type-txt{background-position:-85px -125px}.xly-icon-type.xly-type-unknow{background-position:-125px -125px}.xly-icon-type.xly-type-avi,.xly-icon-type.xly-type-flv,.xly-icon-type.xly-type-mkv,.xly-icon-type.xly-type-mov,.xly-icon-type.xly-type-mp4,.xly-icon-type.xly-type-mpg,.xly-icon-type.xly-type-rm,.xly-icon-type.xly-type-rmvb,.xly-icon-type.xly-type-video,.xly-icon-type.xly-type-wmv{background-position:-165px -5px}.xly-icon-type.xly-type-word{background-position:-165px -45px}.xly-icon-type.xly-type-xls{background-position:-165px -85px}.xly-icon-type.xly-type-saveto{background-position:-45px -125px}.xly-icon-type.xly-type-resource{background-position:-5px -125px}.xly-icon-type.xly-type-gif{background-position:-165px -125px}.xly-icon-type.xly-type-ipa{background-position:-5px -165px}.xly-icon-type.xly-type-ipsw{background-position:-45px -165px}.xly-icon-type.xly-type-dll{background-position:-85px -165px}.xly-icon-type.xly-type-chm{background-position:-125px -165px}.xly-icon-type.xly-type-text{background-position:-165px -165px}.xly-icon-type.xly-type-install{background-position:-5px -205px}.xly-icon-type.xly-type-iso{background-position:-45px -205px}",""]),e.exports=t},1009:function(e,t,n){"use strict";var r=n(988);n.n(r).a},1010:function(e,t,n){(t=n(78)(!1)).push([e.i,".xly-dialog-path{width:450px;padding:0 18px 18px}.xly-dialog-path h2{padding:13px 0;text-align:left}.xly-dialog-path__content{border-radius:4px;border:1px solid var(--color-border)}.xly-dialog-path__content .td-tree{margin-right:2px;height:200px;overflow-y:auto}.xly-dialog-path__content .td-tree::-webkit-scrollbar{width:10px;background:transparent}.xly-dialog-path__content .td-tree::-webkit-scrollbar:horizontal{height:10px}.xly-dialog-path__content .td-tree::-webkit-scrollbar-thumb{border-radius:2px;width:10px;background:#e6e6e6}.xly-dialog-path__content .td-tree::-webkit-scrollbar-thumb:hover{background:#e6e6e6}.xly-dialog-path .td-tree-node{cursor:default}.xly-dialog-path .td-tree-node__content{height:30px}.xly-dialog-path .td-tree-node__label{margin-left:7px}.xly-dialog-path .td-tree-node__image-icon{margin-left:10px}.xly-dialog-path .td-tree-node.is-disabled{color:#ccc}.xly-dialog-path .td-tree-node.is-disabled .td-tree-node__image-icon{opacity:.5}",""]),e.exports=t},1011:function(e,t,n){"use strict";var r=n(989);n.n(r).a},1012:function(e,t,n){(t=n(78)(!1)).push([e.i,".td-tree-node__image-icon{background-size:cover}",""]),e.exports=t},1013:function(e,t,n){var content=n(1053);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("40148104",content,!0,{sourceMap:!1})},1014:function(e,t,n){var content=n(1055);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("31514b62",content,!0,{sourceMap:!1})},1016:function(e,t,n){var content=n(1084);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("02ffc3af",content,!0,{sourceMap:!1})},1017:function(e,t,n){var content=n(1086);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("00001c4c",content,!0,{sourceMap:!1})},1018:function(e,t,n){var content=n(1093);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("28f3e16a",content,!0,{sourceMap:!1})},1019:function(e,t,n){var content=n(1094);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("5a5236ec",content,!0,{sourceMap:!1})},1020:function(e,t,n){var content=n(1098);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("69e9e931",content,!0,{sourceMap:!1})},1029:function(e,t,n){"use strict";var r=n(1018);n.n(r).a},1030:function(e,t,n){"use strict";var r=n(1019);n.n(r).a},1052:function(e,t,n){"use strict";var r=n(1013);n.n(r).a},1053:function(e,t,n){(t=n(78)(!1)).push([e.i,".disabled-pointer-events{pointer-events:none}",""]),e.exports=t},1054:function(e,t,n){"use strict";var r=n(1014);n.n(r).a},1055:function(e,t,n){(t=n(78)(!1)).push([e.i,".no-animation{-webkit-animation:none!important;animation:none!important}",""]),e.exports=t},1083:function(e,t,n){"use strict";var r=n(1016);n.n(r).a},1084:function(e,t,n){(t=n(78)(!1)).push([e.i,".drive-content{width:auto;height:100vh}.xly-down__main{height:100vh}",""]),e.exports=t},1085:function(e,t,n){"use strict";var r=n(1017);n.n(r).a},1086:function(e,t,n){var r=n(78),o=n(181),c=n(528);t=r(!1);var l=o(c);t.push([e.i,".xly-netdisk-detail{margin:10px;padding:0 10px 10px;height:calc(100% - 20px);background:#fff;box-sizing:border-box;border-radius:4px}.xly-netdisk-detail__text{margin:48px 0 38px;font-size:13px;text-align:center}.xly-netdisk-detail__button{position:relative;display:flex;justify-content:center}.xly-netdisk-detail__button .td-button{display:flex;justify-content:center;align-items:center;margin:0 6px;width:76px;line-height:23px}.xly-netdisk-detail__button .td-button i{margin-right:6px}.xly-netdisk-detail__more{position:relative;margin:0 6px}.xly-netdisk-detail__more .td-button{margin:0}.xly-netdisk-detail__more:hover .xly-more-drop{display:block}.xly-more-drop{display:none;position:absolute;top:23px;left:0;width:100%;padding:6px 0;width:76px;background:#fff;box-shadow:0 0 10px 0 rgba(26,26,26,.2);border-radius:4px}.xly-more-drop li{height:30px;line-height:30px;text-align:center;cursor:default}.xly-more-drop li:hover{background:var(--background)}.xly-netdisk-preview .xly-preview{margin-bottom:24px}.xly-netdisk-preview__title{line-height:36px}.xly-netdisk-preview__title p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.xly-netdisk-preview__content{height:38.28vh;background:url("+l+") no-repeat;background-size:cover}.xly-netdisk-file{position:relative;margin:114px 38px 0;height:90px}.xly-netdisk-file .td-media{position:absolute;width:100%;height:90px;padding:16px 12px;background:#fff;box-shadow:0 0 10px 0 rgba(26,26,26,.2);box-sizing:border-box;transform-origin:center top;transition:.5s}.xly-netdisk-file .td-media.is-first{width:calc(100% - 20px);margin:0 10px;transform:translate3d(0,-8px,0)}.xly-netdisk-file .td-media.is-secondary{width:calc(100% - 40px);margin:0 20px;transform:translate3d(0,-16px,0)}.xly-netdisk-file .td-media.is-show{-webkit-animation:ani-show-file .5s both;animation:ani-show-file .5s both}@-webkit-keyframes ani-show-file{0%{transform:translate3d(-100px,30px,0);opacity:0}to{transform:translateZ(0);opacity:1}}@keyframes ani-show-file{0%{transform:translate3d(-100px,30px,0);opacity:0}to{transform:translateZ(0);opacity:1}}.xly-file-name{line-height:18px;-webkit-line-clamp:2;display:-webkit-box;word-break:break-all;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical}.xly-file-info{display:flex;margin-top:6px;color:var(--color-secondary)}.xly-file-info p{margin-right:18px}",""]),e.exports=t},1087:function(e,t,n){e.exports=n.p+"img/2de5c9f.png"},1088:function(e,t,n){e.exports=n.p+"img/0581480.png"},1089:function(e,t,n){e.exports=n.p+"img/cd4e679.png"},1090:function(e,t,n){e.exports=n.p+"img/00dce54.png"},1091:function(e,t,n){var content=n(1092);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("3f8fad77",content,!0,{sourceMap:!1})},1092:function(e,t,n){(t=n(78)(!1)).push([e.i,".xly-dialog-vip{width:420px}.xly-dialog-vip .td-dialog__body{height:196px}.xly-dialog-vip__image{margin:18px auto 0;width:140px;height:100px}.xly-dialog-vip__image img{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.xly-dialog-vip__text{margin-top:20px;text-align:center;font-size:16px}.xly-dialog-vip__note{margin-top:8px;font-size:12px;color:var(--color-secondary)}.xly-dialog-vip .td-button{color:var(--color-default);font-size:14px;background-image:linear-gradient(90deg,#f5d7a2 11%,#f1c880 95%);border-radius:4px}.xly-dialog-vip .td-button.xly-button--super{color:#ffe7a9;background-image:linear-gradient(270deg,#1c1815 2%,#2e2a27 98%)}",""]),e.exports=t},1093:function(e,t,n){(t=n(78)(!1)).push([e.i,'.xly-netdisk-side{width:380px;position:relative;display:flex;flex-direction:column;height:100vh;background:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.xly-netdisk-side:hover .td-collapse-item.xly-netdisk-item--recycle .xly-netdisk-list__header{background:linear-gradient(270deg,#fff,#eff6fe 97%)}.xly-netdisk-side__footer{display:flex;justify-content:space-between;align-items:center;padding:0 16px;width:100%;height:54px;border-top:1px solid var(--color-border);box-sizing:border-box}.xly-netdisk-side__footer .xly-line{height:34px}.xly-netdisk-list{flex:1;overflow:hidden}.xly-netdisk-list .td-collapse{height:100%}.xly-netdisk-list .td-collapse-item{display:flex;flex-direction:column;margin-top:0;height:42px;border:unset;transition:.3s}.xly-netdisk-list .td-collapse-item .td-collapse-item__content{position:relative}.xly-netdisk-list .td-collapse-item .td-breadcrumb__separator{line-height:16px}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle{height:30px}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle .xly-netdisk-list__header{height:30px;border-bottom:0}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle.is-active{height:calc(100% - 42px)}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle.is-active .td-collapse-item__title{background-image:linear-gradient(270deg,#fff,#eff6fe 97%)}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle.is-active .td-button{display:block}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle .xly-netdisk-list__name a{cursor:default}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle .xly-netdisk-list__name a:hover{color:var(--color-default)}.xly-netdisk-list .td-collapse-item.is-active{height:calc(100% - 30px)}.xly-netdisk-list .td-collapse-item.is-active .td-collapse-item__title{color:var(--color-default)}.xly-netdisk-list .td-collapse-item.is-active .td-collapse-item__content{display:flex;flex-direction:column;padding:0;flex:1}.xly-netdisk-list .td-collapse-item__content{transition:none}.xly-netdisk-list .td-checkbox{position:relative}.xly-netdisk-list .td-checkbox .td-checkbox__inner:after{position:absolute;left:50%;top:50%;width:42px;height:62px;transform:translate3d(-50%,-50%,0);content:""}.xly-netdisk-list .td-tooltip{left:50%;white-space:pre-wrap;color:var(--color-default);transform:translate(-50%);bottom:calc(100% + 4px)}.xly-netdisk-list .td-tooltip .td-poper__arrow{display:none}.xly-netdisk-list i.xly-icon-note{color:var(--color-danger)}.xly-netdisk-list__header{padding:0 16px;display:flex;justify-content:space-between;align-items:center;height:42px;border-bottom:1px solid var(--color-border);box-sizing:border-box}.xly-netdisk-list__header .td-button{display:none;width:76px;height:20px;line-height:20px;font-size:12px;text-align:center;color:var(--color-primary);background:#eff6fe;border-radius:2px}.xly-netdisk-list__header .td-button.is-disabled{color:var(--button-disable-color);background:var(--button-disable-fill)}.xly-netdisk-list__header .td-breadcrumb__item{height:42px}.xly-netdisk-list__header .td-breadcrumb__text a,.xly-netdisk-list__header .td-select__drop{color:var(--color-title)}.xly-netdisk-list__header .td-dropdown-menu{padding:6px 0}.xly-netdisk-list__header .td-dropdown-menu__item{padding:0 12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.xly-netdisk-list__items{height:calc(100% - 30px);overflow-y:auto}.xly-netdisk-list__items::-webkit-scrollbar{width:8px;background:transparent}.xly-netdisk-list__items::-webkit-scrollbar:horizontal{height:8px}.xly-netdisk-list__items::-webkit-scrollbar-thumb{border-radius:2px;width:8px;background:#e6e6e6}.xly-netdisk-list__items::-webkit-scrollbar-thumb:hover{background:#ccc}.xly-netdisk-list__item{display:flex;align-items:center;padding:12px 18px;border-bottom:1px solid #fff;box-sizing:border-box;cursor:default}.xly-netdisk-list__item:hover{background:#f6faff}.xly-netdisk-list__item .td-checkbox__label{display:none}.xly-netdisk-list__item .td-media{position:relative;margin-left:13px;flex:1}.xly-netdisk-list__item.is-chosen{background:#eff6fe}.xly-netdisk-list__name{position:relative;max-height:36px;line-height:18px;font-size:13px;-webkit-line-clamp:2;display:-webkit-box;word-break:break-all;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical}.xly-netdisk-list__name:hover{color:var(--color-primary)}.xly-netdisk-list__name span{color:var(--color-default);cursor:pointer}.xly-netdisk-list__name span:hover{color:var(--color-primary)}.xly-netdisk-list__info{display:flex;align-items:center;margin-top:4px;color:var(--color-secondary);font-size:11px}.xly-netdisk-list__count{margin-right:18px}.xly-netdisk-list__title{display:flex;justify-content:space-between;align-items:center;padding:0 18px;height:30px;color:var(--color-secondary)}.xly-netdisk-list__title .td-checkbox__label{margin-left:13px}.xly-netdisk-list__operate a{color:var(--color-icon)}.xly-netdisk-list__operate a:hover{color:var(--color-primary)}.xly-netdisk-list__operate a.is-disabled{color:var(--color-secondary);cursor:default}.xly-netdisk-list__effective{position:absolute;right:0}.xly-netdisk-list__empty{display:flex;justify-content:center;align-items:center;flex-direction:column;flex:1;padding-bottom:50px}.xly-netdisk-list__empty p{margin-top:20px;color:var(--color-secondary)}.xly-netdisk-list__input{position:relative;top:-2px;margin:8px 0 -3px}.xly-netdisk-list__input .td-input__inner{height:26px}.xly-netdisk-size{width:286px}.xly-netdisk-size__text{margin-top:6px;display:flex;justify-content:space-between;color:var(--color-secondary)}.xly-netdisk-size__link{color:var(--color-primary)}.xly-netdisk-size__link:hover{color:var(--color-hover)}.xly-netdisk-size .td-progress{height:8px}.xly-netdisk-size .td-progress .td-progress-bar{height:100%}.xly-netdisk-size .td-progress .td-progress-bar__outer{background:var(--color-border)}.xly-netdisk-size.is-warn .td-progress-bar__inner{background:var(--color-danger)}.xly-netdisk-size.is-warn .xly-netdisk-size__warn{color:var(--color-danger)}.xly-netdisk-transport{text-align:center}.xly-netdisk-transport .xly-icon-transport{display:block;font-size:24px}.xly-netdisk-transport .td-badge__content{top:6px;right:10px;padding:0 4px;font-size:10px;height:12px;line-height:12px;background-color:#ff493c}.xly-netdisk-move,.xly-netdisk-transport a:hover{color:var(--color-primary)}.xly-netdisk-move{position:fixed;padding:0 12px;line-height:30px;background:#fafcff;border-radius:4px;z-index:2}.xly-netdisk-move .xly-netdisk-move__file{display:inline-block;margin-left:4px;max-width:7em;color:var(--color-default);vertical-align:top;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.xly-drop-more{position:fixed;padding:6px 0;width:100px;background:#fff;border-radius:4px;box-shadow:0 0 10px 0 rgba(0,0,0,.2)}.xly-drop-more__item{position:relative;padding-left:28px;line-height:30px;cursor:default}.xly-drop-more__item:hover{background:var(--background)}.xly-drop-more__item.is-chosen:before{position:absolute;top:50%;margin-top:-3px;left:9px;width:6px;height:3px;border-left:2px solid var(--color-primary);border-bottom:2px solid var(--color-primary);transform:rotate(-45deg) scale(1);content:""}.xly-netdisk-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.xly-right-click{position:fixed;padding:6px 0;width:100px;background:#fff;border-radius:4px;box-shadow:0 0 10px 0 rgba(0,0,0,.2);z-index:99;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.xly-right-click__item{position:relative;padding-left:24px;line-height:30px;cursor:default}.xly-right-click__item i.xly-icon-arrow-right{position:absolute;top:1px;right:12px;color:#ccc;font-size:12px}.xly-right-click__item:hover{background:var(--background)}.xly-right-click__item.is-chosen:before{position:absolute;top:50%;margin-top:-3px;left:9px;width:6px;height:3px;border-left:2px solid var(--color-primary);border-bottom:2px solid var(--color-primary);transform:rotate(-45deg) scale(1);content:""}.xly-right-click__children{position:absolute;top:0;left:100%;padding:6px 0;width:100px;background:#fff;border-radius:4px;box-shadow:0 0 10px 0 rgba(0,0,0,.2)}.xly-right-click__children:before{position:absolute;left:-5px;width:5px;height:100%;content:""}.xly-right-click.is-upload{width:72px}.xly-right-click.is-finish{width:120px}',""]),e.exports=t},1094:function(e,t,n){(t=n(78)(!1)).push([e.i,".xly-netdisk-note{position:relative;display:flex;justify-content:space-between;align-items:center;width:100%;padding:5px 12px;line-height:19px;color:var(--color-icon);background-color:#eaf6ff;box-sizing:border-box}.xly-netdisk-note .xly-netdisk-note__text{flex:1}.xly-netdisk-note .xly-netdisk-note__link{color:var(--color-primary)}.xly-netdisk-note .xly-netdisk-note__link:hover{color:var(--color-hover)}.xly-netdisk-note .xly-netdisk-list__my{color:#000}.xly-netdisk-note .xly-netdisk-list__my:hover{color:var(--color-primary)}.xly-netdisk-note .xly-netdisk-note__side{position:absolute;bottom:5px;right:12px;color:var(--color-primary);cursor:pointer}.xly-netdisk-note .xly-netdisk-note__side:hover{color:var(--color-hover)}.xly-netdisk-note--vip{background:#ffe7a9}.xly-netdisk-note--vip .xly-netdisk-note__text{color:#c27a13}.xly-netdisk-note--agreement{background-color:#ffedc5}.xly-netdisk-note--fixed{position:absolute;bottom:0;left:0}.xly-netdisk-note__close{margin-left:12px;cursor:pointer}",""]),e.exports=t},1095:function(e,t,n){e.exports=n.p+"img/2e4943f.png"},1096:function(e,t,n){e.exports=n.p+"img/5897c98.png"},1097:function(e,t,n){"use strict";var r=n(1020);n.n(r).a},1098:function(e,t,n){(t=n(78)(!1)).push([e.i,'.xly-netdisk-guide{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100vh;background:#fff}.xly-netdisk-guide__content{margin-top:15px;text-align:center}.xly-netdisk-guide__content h2{font-size:16px;font-weight:700}.xly-netdisk-guide__content p{margin-top:6px;white-space:nowrap;color:var(--color-secondary)}.xly-netdisk-guide__text{text-align:center;color:var(--color-secondary)}.xly-netdisk-guide__sub{position:absolute;top:-5px;right:-7px;width:30px;height:16px;line-height:16px;font-size:11px;text-align:center;background:#ff5d5d;border-radius:2px}.xly-netdisk-guide__sub:after{position:absolute;right:2px;bottom:-4px;width:6px;height:4px;background:#ff5d5d;-webkit-clip-path:polygon(100% 0,0 0,0 100%);clip-path:polygon(100% 0,0 0,0 100%);content:""}.xly-netdisk-guide .td-carousel{margin-top:-50px;width:176px}.xly-netdisk-guide .td-carousel__item{width:176px;height:156px}.xly-netdisk-guide .td-carousel__indicator{margin:0 6px;height:40px}.xly-netdisk-guide .td-carousel__indicator:after{width:6px;height:6px;background:#b9d3ff;border-radius:50%}.xly-netdisk-guide .td-carousel__indicator.is-active:after{background:var(--color-primary)}.xly-netdisk-guide .td-button{position:relative;margin:15px 0 6px;width:180px}',""]),e.exports=t},1101:function(e,t,n){"use strict";n.r(t);n(7),n(8),n(32),n(534),n(10);var r=n(146),o=n(149),c=n(212),l=n(213),d=n(148),f=(n(1),n(88)),h=n(365),v=n(17),y=n(114),m=(n(515),n(9)),x=n(516),k=n(985),_=n(12),w=n(29);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var j=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},C=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},R=function(e){Object(c.a)(n,e);var t=O(n);function n(){var e,o;return Object(r.a)(this,n),(o=t.apply(this,arguments)).isRedpointReport=!1,o.warningUpperBoundMap=Object.freeze((e={},Object(y.a)(e,x.VipType.normal,107374182400),Object(y.a)(e,x.VipType.normalVip,107374182400),Object(y.a)(e,x.VipType.platium,214748364800),Object(y.a)(e,x.VipType.superv,536870912e3),e)),o}return Object(o.a)(n,[{key:"redPointFirstShow",value:function(e){e>0&&!this.isRedpointReport&&(this.isRedpointReport=!0,this.$eventTrack("yunpan_transmission_red_num_show",{}))}},{key:"showTransList",value:function(){return C(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$bus.$emit("transferWindowEvent",!0),this.$eventTrack("bottom_operation_click",{clickid:"transmission",vip_type:this.vipType});case 2:case"end":return e.stop()}}),e,this)})))}},{key:"handleClickExpandVolume",value:function(){return C(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$eventTrack("bottom_operation_click",{clickid:"expansion",vip_type:this.vipType,text:this.isSuperVip?"去扩容":"扩容至6T",total_volume:this.totalSpace,used_volume:this.usedSpace}),e.prev=1,e.next=4,_.client.callRemoteClientFunction("vip-download-webview","OpenPayVipUrl","https://pay.xunlei.com/pay.html?referfrom=v_pc_xlx_hytq_yp_storage&aidfrom=yp_expand_btn");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})))}},{key:"handleIsDriveSpaceInadequateChange",value:function(e){e&&this.$eventTrack("bottom_space_not_enough_show")}},{key:"handleShowExtensionTipChange",value:function(e){e&&this.$eventTrack("yunpan_expansion_volume_btn_show",{vip_type:this.vipType,text:this.isSuperVip?"去扩容":"扩容至6T"})}},{key:"totalSpace",get:function(){return this.$store.state.about.limit}},{key:"restSpace",get:function(){return this.totalSpace-this.usedSpace}},{key:"isDriveSpaceInadequate",get:function(){return Boolean(this.restSpace)&&this.restSpace<this.warningUpperBoundMap[this.vipType]}},{key:"isSuperVip",get:function(){return this.vipType===x.VipType.superv}},{key:"usedSpace",get:function(){return this.$store.state.about.usage}},{key:"totalSpaceFormatted",get:function(){return Object(m.formatSize)(this.totalSpace)}},{key:"usedSpaceFormatted",get:function(){return Object(w.normalizedUsedSpaceSize)(this.usedSpace)}},{key:"transferringTasksCount",get:function(){return console.log("本地上传任务：",this.$store.getters["local-upload/runningTaskNum"],"云添加任务：",this.$store.getters["url-task-list/runningTaskNum"],"取回列表",this.$store.getters["retrieval-list/runningTaskNum"]),this.$store.getters["local-upload/runningTaskNum"]+this.$store.getters["url-task-list/runningTaskNum"]+this.$store.getters["retrieval-list/runningTaskNum"]}},{key:"useRate",get:function(){var e=this.usedSpace/this.totalSpace*100;return e<1&&e>0?1:e}},{key:"showExtensionTip",get:function(){return!this.isSuperVip||this.isDriveSpaceInadequate}},{key:"vipType",get:function(){return this.$store.getters["users/curVipType"]}}]),n}(h.Vue);j([Object(h.Watch)("transferringTasksCount",{immediate:!0})],R.prototype,"redPointFirstShow",null),j([Object(k.a)({time:100})],R.prototype,"showTransList",null),j([Object(h.Watch)("isDriveSpaceInadequate",{immediate:!0})],R.prototype,"handleIsDriveSpaceInadequateChange",null),j([Object(h.Watch)("showExtensionTip",{immediate:!0})],R.prototype,"handleShowExtensionTipChange",null);var P=R=j([Object(h.Component)({})],R),T=n(147),$=Object(T.a)(P,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xly-netdisk-side__footer"},[n("div",{staticClass:"xly-netdisk-size",class:{"is-warn":e.isDriveSpaceInadequate}},[n("td-progress",{attrs:{value:e.useRate}}),e._v(" "),n("div",{staticClass:"xly-netdisk-size__text"},[n("p",[e._v("\n        "+e._s(e.usedSpaceFormatted)+" / "+e._s(e.totalSpaceFormatted)+"\n        "),e.isDriveSpaceInadequate?n("span",{staticClass:"xly-netdisk-size__warn"},[e._v("空间紧张")]):e._e()]),e._v(" "),e.showExtensionTip?n("a",{staticClass:"xly-netdisk-size__link",attrs:{href:"javascript:;"},on:{click:e.handleClickExpandVolume}},[e._v(e._s(e.isSuperVip?"去扩容":"扩容至6T"))]):e._e()])],1),e._v(" "),n("i",{staticClass:"xly-line"}),e._v(" "),n("div",{staticClass:"xly-netdisk-transport"},[n("td-badge",{attrs:{value:e.transferringTasksCount,"hide-sup":0===e.transferringTasksCount,max:99}},[n("a",{attrs:{href:"javascript:;"},on:{click:e.showTransList}},[n("i",{staticClass:"xly-icon-transport"}),e._v("传输")])])],1)])}),[],!1,null,null,null).exports;n(126),n(112),n(998),n(16),n(38),n(44);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var D=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},S={37:1,38:1,39:1,40:1},L={passive:!1},F="onwheel"in document.createElement("div")?"wheel":"mousewheel";function M(e){e.preventDefault()}function E(e){return!!S[e.keyCode]&&(M(e),!1)}var z=function(e){Object(c.a)(n,e);var t=I(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).computedPosition={x:0,y:0},e.menuItemList=[],e.curHoverItem=null,e.secondaryPositionStyle={top:"0",left:"100%"},e}return Object(o.a)(n,[{key:"handleClickContextMenuItem",value:function(e){this.$emit("clickItem",e.name),this.$emit("update:visible",!1)}},{key:"handleClickSecondaryContextMenu",value:function(e,t){this.$emit("clickItem",e.name,t.sortType),this.$emit("update:visible",!1)}},{key:"disableListScroll",value:function(){var e=this.$parent.$el;e.addEventListener("DOMMouseScroll",M,!1),e.addEventListener(F,M,L),e.addEventListener("touchmove",M,L),window.addEventListener("keydown",E,!1)}},{key:"enableListScroll",value:function(){var e=this.$parent.$el;e.removeEventListener("DOMMouseScroll",M,!1),e.removeEventListener(F,M,!1),e.removeEventListener("touchmove",M,!1),window.removeEventListener("keydown",E,!1)}},{key:"normalizeDropdownPosition",value:function(){var e=this;this.resetSecondaryPositionStyle();var t=this.$parent.$el.getBoundingClientRect(),n=this.$el.getBoundingClientRect(),r=this.clickPosition.x,o=this.clickPosition.y;r+n.width>t.right&&(r-=n.width),o+n.height>t.bottom&&(o-=n.height),this.computedPosition.x=r,this.computedPosition.y=o;var c=this.$refs.context_children;c&&this.$nextTick((function(){var n=e.$el.getBoundingClientRect();c.forEach((function(r){var o=r.getBoundingClientRect(),c=o.width,l=o.right,d=o.bottom,f=o.height,h=o.top;l>t.right&&(e.secondaryPositionStyle.left="-".concat(c,"px"));var v=n.bottom-h;d>t.bottom&&(e.secondaryPositionStyle.top="-".concat(f-v,"px"))}))}))}},{key:"resetSecondaryPositionStyle",value:function(){this.secondaryPositionStyle={top:"0",left:"100%"}}},{key:"handleWindowClick",value:function(e){this.visible&&(e.path.includes(this.$el)||this.$emit("update:visible",!1))}},{key:"handleWindowBlur",value:function(e){this.$emit("update:visible",!1)}},{key:"beforeDestroy",value:function(){window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("click",this.handleWindowClick,!0),this.enableListScroll()}},{key:"handleVisibleChange",value:function(e){e?(window.addEventListener("blur",this.handleWindowBlur),window.addEventListener("click",this.handleWindowClick,!0),this.disableListScroll(),this.$nextTick(this.normalizeDropdownPosition.bind(this))):(window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("click",this.handleWindowClick,!0),this.$emit("update:isOutOfContextMenu",!0),this.enableListScroll())}},{key:"handleClickPosition",value:function(e){this.$nextTick(this.normalizeDropdownPosition.bind(this))}},{key:"handlePickedItemListChange",value:function(){if(this.$set(this,"menuItemList",[]),this.pickedItemList.length)if("trash"===this.activeCollapseItemType)this.menuItemList.push({name:"还原"},{name:"彻底删除"});else{if(this.menuItemList.push({name:"取回"},{name:"分享"},{name:"复制到"},{name:"移动到"},{name:"删除"}),1===this.pickedItemList.length){this.menuItemList.push({name:"重命名"});var e=this.pickedItemList[0];if(!e||void 0===e.file_extension||null===e.file_extension)return;var t=e.file_extension;"video"===Object(m.checkCanPreview)(t)||"music"===Object(m.checkCanPreview)(t)?this.menuItemList.unshift({name:"在线播放"}):"picture"===Object(m.checkCanPreview)(t)&&this.menuItemList.unshift({name:"打开"})}this.menuItemList.push({name:"刷新"})}else"drive"===this.activeCollapseItemType?this.menuItemList.push({name:"新建文件夹"},{name:"排序",children:[{name:"文件名",sortType:"name"},{name:"添加日期",sortType:"created_time"}]},{name:"刷新"}):this.menuItemList.push({name:"全部还原"},{name:"清空回收站"})}},{key:"driveSortInfo",get:function(){return this.$store.state.drive.driveSortInfoMap.drive}},{key:"activeCollapseItemType",get:function(){return this.$store.state.drive.activeCollapseItemType}}]),n}(h.Vue);D([Object(h.Prop)({})],z.prototype,"visible",void 0),D([Object(h.Prop)({})],z.prototype,"clickPosition",void 0),D([Object(h.Prop)({})],z.prototype,"isOutOfContextMenu",void 0),D([Object(h.Prop)({})],z.prototype,"pickedItemList",void 0),D([Object(h.Watch)("visible")],z.prototype,"handleVisibleChange",null),D([Object(h.Watch)("clickPosition",{deep:!0})],z.prototype,"handleClickPosition",null),D([Object(h.Watch)("pickedItemList",{deep:!0})],z.prototype,"handlePickedItemListChange",null);var V=z=D([Object(h.Component)({})],z),N=Object(T.a)(V,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"xly-right-click",style:{left:e.computedPosition.x+"px",top:e.computedPosition.y+"px"},on:{mouseenter:function(t){return e.$emit("update:isOutOfContextMenu",!1)},mouseleave:function(t){return e.$emit("update:isOutOfContextMenu",!0)},contextmenu:function(e){e.preventDefault(),e.stopPropagation()}}},[n("ul",e._l(e.menuItemList,(function(t){return n("li",{key:t.name,staticClass:"xly-right-click__item",on:{mouseenter:function(n){e.curHoverItem=t},mouseleave:function(t){e.curHoverItem=null},click:function(n){return e.handleClickContextMenuItem(t)}}},[e._v("\n      "+e._s(t.name)+"\n      "),t.children?[n("i",{staticClass:"xly-icon-arrow-right"}),e._v(" "),n("ul",{ref:"context_children",refInFor:!0,staticClass:"xly-right-click__children",style:Object.assign({},e.secondaryPositionStyle,{visibility:t.children&&e.curHoverItem===t?"visible":"hidden"})},e._l(t.children,(function(r){return n("li",{key:r.name,staticClass:"xly-right-click__item",class:{"is-chosen":e.driveSortInfo.type===r.sortType},on:{click:function(n){return n.stopPropagation(),e.handleClickSecondaryContextMenu(t,r)}}},[e._v("\n            "+e._s(r.name)+"\n          ")])})),0)]:e._e()],2)})),0)])}),[],!1,null,null,null).exports;function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var A=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},B=function(e){Object(c.a)(n,e);var t=W(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).sortTypeList=[{label:"文件名",type:"name",category:"all"},{label:"添加日期",type:"created_time",category:"drive"},{label:"删除日期",type:"modified_time",category:"trash"}],e}return Object(o.a)(n,[{key:"handleClickSortListItem",value:function(e){switch(this.$emit("changeSortType",e.type),e.type){case"name":this.$eventTrack("drive"===this.activeCollapseItemType?"yunpan_filelist_sort_btn_child_click":"recycler_sort_btn_child_click",{clickid:"name"});break;case"created_time":this.$eventTrack("yunpan_filelist_sort_btn_child_click",{clickid:"time"});break;case"modified_time":this.$eventTrack("recycler_sort_btn_child_click",{clickid:"time"})}}},{key:"handleVisibleChange",value:function(e){e?(window.addEventListener("blur",this.handleWindowBlur),window.addEventListener("click",this.handleWindowClick,!0)):(window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("click",this.handleWindowClick,!0))}},{key:"handleWindowClick",value:function(e){this.visible&&(e.path.includes(this.$el)||this.$emit("update:visible",!1))}},{key:"handleWindowBlur",value:function(e){this.$emit("update:visible",!1)}},{key:"computedSortTypeList",get:function(){var e=this;return this.sortTypeList.filter((function(t){return["all",e.activeCollapseItemType].includes(t.category)}))}},{key:"sortInfo",get:function(){return this.$store.state.drive.driveSortInfoMap[this.activeCollapseItemType]}},{key:"activeCollapseItemType",get:function(){return this.$store.state.drive.activeCollapseItemType}}]),n}(h.Vue);A([Object(h.Prop)({})],B.prototype,"visible",void 0),A([Object(h.Prop)({})],B.prototype,"chosenSortType",void 0),A([Object(h.Watch)("visible")],B.prototype,"handleVisibleChange",null);var U=B=A([Object(h.Component)({})],B),Y=Object(T.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"xly-drop-more",staticStyle:{left:"335px",top:"73px","z-index":"100"}},[n("ul",e._l(e.computedSortTypeList,(function(t,r){return n("li",{key:r,staticClass:"xly-drop-more__item",class:{"is-chosen":t.type===e.sortInfo.type},on:{click:function(n){return e.handleClickSortListItem(t)}}},[e._v("\n      "+e._s(t.label)+"\n    ")])})),0)])}),[],!1,null,null,null).exports,H=n(6),X=n(999);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var J=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},K=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},Q=function(e){Object(c.a)(n,e);var t=G(n);function n(){var e,o;return Object(r.a)(this,n),(o=t.apply(this,arguments)).visible=!1,o.trashValidDurationMap=Object.freeze((e={},Object(y.a)(e,x.VipType.normal,10),Object(y.a)(e,x.VipType.normalVip,10),Object(y.a)(e,x.VipType.platium,15),Object(y.a)(e,x.VipType.superv,30),e)),o}return Object(o.a)(n,[{key:"show",value:function(){this.callerInstance.$eventTrack("yunpan_delete_pop_show",{is_prolong_textlink:"5"!==this.vipType?1:0,vip_type:this.vipType}),this.visible=!0}},{key:"handleClickExtendTrashSaveTime",value:function(){return K(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.callerInstance.$eventTrack("yunpan_delete_pop_click",{clickid:"extend_save_time",vip_type:this.vipType}),e.prev=1,e.next=4,_.client.callRemoteClientFunction("vip-download-webview","OpenPayVipUrl","https://pay.xunlei.com/pay.html?referfrom=v_pc_xlx_hytq_yp_recycle&aidfrom=yp_del_pop");case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[1,6]])})))}},{key:"emit",value:function(){this.callerInstance.$eventTrack("yunpan_delete_pop_click",{clickid:"confim",vip_type:this.vipType}),this.visible=!1,this.$destroy(),this.resolve()}},{key:"close",value:function(){this.callerInstance.$eventTrack("yunpan_delete_pop_click",{clickid:"cancel",vip_type:this.vipType}),this.visible=!1,this.$destroy(),this.reject()}}]),n}(h.Vue);J([Object(h.Prop)({})],Q.prototype,"resolve",void 0),J([Object(h.Prop)({})],Q.prototype,"reject",void 0),J([Object(h.Prop)({})],Q.prototype,"vipType",void 0),J([Object(h.Prop)({})],Q.prototype,"callerInstance",void 0);var Z=Q=J([Object(h.Component)({})],Q),ee=Object(T.a)(Z,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td-dialog",{attrs:{"custom-class":"xly-dialog-prompt",visible:e.visible},on:{close:e.close,"update:visible":function(t){e.visible=t}}},[n("h2",{attrs:{slot:"header"},slot:"header"},[e._v("\n    确认删除所选文件/文件夹？\n  ")]),e._v(" "),n("p",{staticClass:"xly-dialog-prompt__text"},[e._v("\n    "+e._s(e.trashValidDurationMap[e.vipType])+"天内可在回收站中找回已删文件\n  ")]),e._v(" "),n("div",{staticClass:"xly-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"xly-dialog__footer-operate"},["5"!==e.vipType?n("a",{staticClass:"xly-dialog__footer-link",attrs:{href:"#"},on:{click:e.handleClickExtendTrashSaveTime}},[e._v("延长回收站保存时间>")]):e._e()]),e._v(" "),n("div",{staticClass:"xly-dialog__button"},[n("td-button",{on:{click:e.emit}},[e._v("\n        确定\n      ")]),e._v(" "),n("td-button",{staticClass:"td-button--other",on:{click:e.close}},[e._v("\n        取消\n      ")])],1)])])}),[],!1,null,null,null).exports,te=n(991),ne=n(992),ie=n(3);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var oe=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},ae=function(e){Object(c.a)(n,e);var t=re(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).hasShowLimitInputLengthToast=!1,e}return Object(o.a)(n,[{key:"getListItemStyle",value:function(e){var style={};return e.icon_link&&(style.background="url(".concat(e.icon_link,") 0% 0% / cover no-repeat")),style}},{key:"validTrashTime",value:function(e){var t=+new Date(e.delete_time);return Math.ceil((t-Date.now())/1e3/3600/24)}},{key:"handleInputBlur",value:function(){this.$emit("inputConfirm")}},{key:"handleSelectAllContent",value:function(e){e&&e.target.select()}},{key:"handleInputPast",value:function(e){if(e.clipboardData)e.clipboardData.getData("text"),e.target}},{key:"handleInputChange",value:function(e){e.target.value.length>=170&&(this.hasShowLimitInputLengthToast||(this.$message.warning("名称太长了不能再输入啦"),this.hasShowLimitInputLengthToast=!0))}},{key:"handleModeChange",value:function(e){e&&(this.hasShowLimitInputLengthToast=!1)}},{key:"active",get:function(){return this.$store.state.drive.activeCollapseItemType}}]),n}(h.Vue);oe([Object(h.Prop)({})],ae.prototype,"item",void 0),oe([Object(h.Watch)("item.__mode")],ae.prototype,"handleModeChange",null);var ce=ae=oe([Object(h.Component)({methods:{formatSize2:m.formatSize2,formatTime:m.formatTime}})],ae),se=Object(T.a)(ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td-media",[n("i",{staticClass:"xly-icon-type",class:[{"xly-type-group":e.item.__mode&&"create"===e.item.__mode}],style:e.getListItemStyle(e.item),attrs:{slot:"media"},slot:"media"}),e._v(" "),e.item.__mode?n("td-input",{ref:"createInput",staticClass:"xly-netdisk-list__input",attrs:{value:e.item.name,maxlength:170},on:{blur:e.handleInputBlur,contextmenu:function(e){e.stopPropagation()},paste:e.handleInputPast,keypress:[function(t){return(t.type.indexOf("key")||1===t.keyCode)&&t.ctrlKey?e.handleSelectAllContent(t):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputBlur(t)}]},nativeOn:{dblclick:function(e){e.stopPropagation()},input:function(t){return e.handleInputChange(t)}}}):n("p",{staticClass:"xly-netdisk-list__name"},[n("span",{attrs:{href:"#",title:e.item.name},on:{click:function(t){t.stopPropagation(),"drive"===e.active&&e.$emit("consume")}}},[e._v(" "+e._s(e.item.name))])]),e._v(" "),"create"!==e.item.__mode?n("div",{staticClass:"xly-netdisk-list__info"},["drive#folder"!==e.item.kind?n("p",{staticClass:"xly-netdisk-list__count"},[e._v("\n      "+e._s(e.formatSize2(e.item.size))+"\n    ")]):e._e(),e._v(" "),n("p",{staticClass:"xly-netdisk-list__time"},[e._v("\n      "+e._s(e.formatTime(new Date(e.item.created_time),"yyyy-MM-dd hh:mm"))+"\n    ")]),e._v(" "),"trash"===e.active?n("p",{staticClass:"xly-netdisk-list__effective"},[e._v("\n      有效期"+e._s(e.validTrashTime(e.item))+"天\n    ")]):e._e()]):e._e()],1)}),[],!1,null,null,null).exports;function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var ue=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},de=function(e){Object(c.a)(n,e);var t=le(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return n}(h.Vue);ue([Object(h.Prop)({})],de.prototype,"isDragging",void 0),ue([Object(h.Prop)({})],de.prototype,"pickedLength",void 0),ue([Object(h.Prop)({})],de.prototype,"dropDirName",void 0),ue([Object(h.Prop)({})],de.prototype,"dragCursorPosition",void 0);var pe=de=ue([Object(h.Component)({})],de),fe=Object(T.a)(pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.isDragging,expression:"isDragging"}],staticClass:"xly-netdisk-move",style:{top:e.dragCursorPosition.y+10+"px",left:e.dragCursorPosition.x+10+"px"}},[n("p",[n("span",[e._v("移动"+e._s(e.pickedLength)+"个文件到")]),e._v(" "),n("span",{staticClass:"xly-netdisk-move__file"},[e._v(" "+e._s(e.dropDirName))])])])}),[],!1,null,null,null).exports;function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var ve=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},ye=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},me=function(e){Object(c.a)(n,e);var t=he(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"jumpToPrivacy",value:function(){return ye(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.client.callServerFunction("OpenNewTab","https://pan.xunlei.com/privacy");case 2:case"end":return e.stop()}}),e)})))}}]),n}(h.Vue);ve([Object(h.Prop)({})],me.prototype,"visible",void 0);var be=me=ve([Object(h.Component)({})],me),xe=Object(T.a)(be,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("div",{staticClass:"xly-netdisk-note xly-netdisk-note--agreement"},[n("p",{staticClass:"xly-netdisk-note__text"},[e._v("\n    此云盘为您的私人云盘，请严格遵循"),n("a",{staticClass:"xly-netdisk-note__link",attrs:{href:"javascript:;"},on:{click:e.jumpToPrivacy}},[e._v("服务协议")]),e._v("，严禁存放，传输任何涉密、色情、暴力、侵权等违法内容。\n  ")]),e._v(" "),n("span",{staticClass:"xly-netdisk-note__close",attrs:{title:"关闭"},on:{click:function(t){return e.$emit("close")}}},[n("i",{staticClass:"xly-icon-close"})])]):e._e()}),[],!1,null,null,null).exports;function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var ke=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},_e=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},we=function(e){Object(c.a)(n,e);var t=ge(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).showServeProtocol=!1,e.sortTypeListVisible=!1,e.dragCursorPosition={x:0,y:0},e._curRenameItemId="",e.idItemMap={},e.contextMenuVisible=!1,e.currentContextClickInfo={x:0,y:0},e.isOutOfContextMenu=!0,e.loadingMore=!1,e.isConsumingFile=!1,e.picked=[],e.isDragging=!1,e.allPickedInfo={indeterminate:!1,checked:!1,text:"全选"},e.dropDirName="",e}return Object(o.a)(n,[{key:"mounted",value:function(){this.handleShowServeProtocol()}},{key:"handleShowServeProtocol",value:function(){var e,t=window.localStorage.getItem("serve-protocol");if(t){try{e=JSON.parse(t)}catch(t){e={}}e[this.userId]||(this.showServeProtocol=!0,e=Object.assign(Object.assign({},e),Object(y.a)({},this.userId,"1")))}else e=Object(y.a)({},this.userId,"1"),this.showServeProtocol=!0;window.localStorage.setItem("serve-protocol",JSON.stringify(e))}},{key:"handleListAllPickedClick",value:function(){"drive"===this.active?this.$eventTrack("yunpan_filelist_option_click",{clickid:"all_select"}):this.$eventTrack("recycler_operation_click",{clickid:"all_select"});var e=this.allPickedInfo,t=e.indeterminate,n=e.checked;t?(this.allPickedInfo.indeterminate=!1,this.allPickedInfo.checked=!0):this.allPickedInfo.checked=!n,this.changeAllFileListItem(this.allPickedInfo.checked)}},{key:"changeAllFileListItem",value:function(e){this.picked=e?this.pathList.filter((function(e){return!w.SYSTEM_FOLDER_TYPE_LIST.includes(e.folder_type)})).map((function(e){return e.id})):[]}},{key:"handleClickFileListItem",value:function(e,t){e.__mode&&["create","rename"].includes(e.__mode)||(this.picked=[e.id])}},{key:"handleChangeSortType",value:function(e){this.sortTypeListVisible=!1;var t={type:e,order:1};this.sortInfo.type===e&&(t.order=-1*this.sortInfo.order),this.$store.commit("drive/setDriveSortInfo",{tabType:this.active,info:t}),this.$store.commit("drive/sortFileList",this.active)}},{key:"handleDragEnd",value:function(e){this.isDragging=!1,this.dropDirName=""}},{key:"handleDrop",value:function(e){return _e(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("drive#file"!==e.kind&&!this.picked.includes(e.id)){t.next=4;break}return this.$message.error("移动失败"),this.$eventTrack("yunpan_move_success",{result:"fail"}),t.abrupt("return");case 4:return n=this.pathList.filter((function(e){return o.picked.includes(e.id)})),t.next=7,this.handleMoveConfirm(n,e);case 7:r=t.sent,this.$eventTrack("yunpan_move_success",{result:r?"success":"fail"});case 9:case"end":return t.stop()}}),t,this)})))}},{key:"handleDragStart",value:function(e,t){e.__mode||"trash"===this.tabType||w.SYSTEM_FOLDER_TYPE_LIST.includes(e.folder_type)?t.preventDefault():(t.dataTransfer&&t.dataTransfer.setDragImage(document.createElement("span"),0,0),this.isDragging=!0)}},{key:"handleDragOver",value:function(e,t){this.dragCursorPosition={x:t.clientX,y:t.clientY},t.dataTransfer&&(t.dataTransfer.dropEffect="move"),this.picked.includes(e.id)||"drive#folder"!==e.kind?this.dropDirName="":this.dropDirName=e.name}},{key:"handleClickSortTypeList",value:function(){"drive"===this.active?this.$eventTrack("yunpan_filelist_option_click",{clickid:"sort"}):this.$eventTrack("recycler_operation_click",{clickid:"sort"}),this.sortTypeListVisible=!this.sortTypeListVisible}},{key:"resetItem__Mode",value:function(e){this.$store.commit("drive/replaceFileItem",{type:"drive",item:Object.assign(Object.assign({},e),{__mode:""})})}},{key:"handleCreateInputConfirm",value:function(){var e=this,t=this.getCreateInputElement();if(t)if(this.clearPickedItems(),this._curRenameItemId){var n=this.idItemMap[this._curRenameItemId];if(this._curRenameItemId="",!n)return;var r=t.value;if(n.name===r)this.resetItem__Mode(n);else{if(/[\\/:*?"<>|]/.test(r))return this.$message.error('名称不能包含\\/:*?"<>|等特殊字符'),void this.resetItem__Mode(n);if(this.pathList.some((function(e){return e.name===r})))return this.$message.error("已存在同类型的重名文件，请重试"),void this.resetItem__Mode(n);this.$store.dispatch("drive/updateFile",{id:n.id,params:{name:r}}).then((function(t){e.$store.commit("drive/replaceFileItem",{type:"drive",item:t}),e.$message.success("重命名成功")})).catch((function(t){console.error(t),e.resetItem__Mode(n),e.$message.error("修改未成功，请稍后重试")}))}}else this.$emit("confirmCreate",t.value)}},{key:"getCreateInputElement",value:function(){var e=this.$refs.mediaBlock,t=[];return e.forEach((function(e){t.push(e.$el.querySelector("input"))})),(t=t.filter(Boolean))&&t.length?t[0]:null}},{key:"handleConsumeFileOrDirectory",value:function(e,t){return _e(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("trash"!==this.active){n.next=3;break}return this.$message.error("回收站暂时不支持查看，请还原后再试"),n.abrupt("return");case 3:if("drive#folder"!==e.kind){n.next=23;break}if(this.clearPickedItems(),!this.isConsumingFile){n.next=7;break}return n.abrupt("return");case 7:return this.isConsumingFile=!0,n.prev=8,this.$store.commit("drive/setParentIdMap",{drive:e.id}),n.next=12,this.$store.dispatch("drive/getFileList",{parent_id:this.parentIdMap[this.active],__type:this.active,refresh:!0});case 12:this.$store.commit("drive/setDriveRouteList",[].concat(Object(v.a)(this.driveRouteList),[Object.assign(Object.assign({},e),{title:e.name})])),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(8),console.error(n.t0);case 18:return n.prev=18,this.isConsumingFile=!1,n.finish(18);case 21:n.next=24;break;case 23:"other"!==Object(m.checkCanPreview)(e.file_extension)?(r={fileId:e.id,isPlayInstantly:!0,mode:t.mode},this.$store.dispatch("drive/showFileDetail",r)):this.$message({id:"handleConsumeFileOrDirectory",unique:!0,position:"middle",type:"error",message:"暂不支持在线预览，请下载后查看"});case 24:case"end":return n.stop()}}),n,this,[[8,15,18,21]])})))}},{key:"handleContextMenu",value:function(e,t){if(!e){if(!this.pathList.length&&"trash"===this.active)return;this.clearPickedItems()}this.currentContextClickInfo={x:t.clientX,y:t.clientY},e&&e.__mode&&"create"===e.__mode||(e&&!this.picked.includes(e.id)&&(this.picked=[e.id]),e&&w.SYSTEM_FOLDER_TYPE_LIST.includes(e.folder_type)?this.contextMenuVisible=!1:this.contextMenuVisible=!0)}},{key:"getIconType",value:function(e){return"drive#folder"===e.kind?"group":Object(w.fileExtToIconType)(e.mime_type)}},{key:"handleClickContextMenuItem",value:function(e,t){return _e(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this.clickContextMenuItemEventTracking(e),n.t0=e,n.next="新建文件夹"===n.t0?4:"排序"===n.t0?6:"刷新"===n.t0?10:"复制到"===n.t0?12:"移动到"===n.t0?18:"删除"===n.t0?25:"全部还原"===n.t0?32:"还原"===n.t0?33:"彻底删除"===n.t0?35:"重命名"===n.t0?37:"清空回收站"===n.t0?44:"打开"===n.t0||"在线播放"===n.t0?46:"取回"===n.t0?48:"分享"===n.t0?50:52;break;case 4:return this.$emit("createNewDirectory"),n.abrupt("break",53);case 6:if(t){n.next=8;break}return n.abrupt("return");case 8:return this.handleChangeSortType(t),n.abrupt("break",53);case 10:return this.$emit("refresh"),n.abrupt("break",53);case 12:return n.next=14,this.checkOperationListItemIsPlay();case 14:if(!n.sent){n.next=16;break}ie.a.callServerFunction("NotifyXmpQuit");case 16:return this.handleMoveOrCopy("copy"),n.abrupt("break",53);case 18:return n.next=20,this.checkOperationListItemIsPlay();case 20:if(!n.sent){n.next=23;break}return this.$message.error("播放过程中不允许移动文件"),n.abrupt("return");case 23:return this.handleMoveOrCopy("move"),n.abrupt("break",53);case 25:return n.next=27,this.checkOperationListItemIsPlay();case 27:if(!n.sent){n.next=30;break}return this.$message.error("播放过程中不允许删除"),n.abrupt("return");case 30:return this.handleTrash(),n.abrupt("break",53);case 32:this.picked=this.pathList.map((function(e){return e.id}));case 33:return this.handleUnTrash(),n.abrupt("break",53);case 35:return this.handleDeleteFileInTrash(),n.abrupt("break",53);case 37:return n.next=39,this.checkOperationListItemIsPlay();case 39:if(!n.sent){n.next=42;break}return this.$message.error("播放过程中不允许重命名"),n.abrupt("return");case 42:return this.handleRenameFile(),n.abrupt("break",53);case 44:return this.$emit("clearTrash"),n.abrupt("break",53);case 46:return 1===this.pickedItemList.length&&this.handleConsumeFileOrDirectory(this.pickedItemList[0],{mode:"panel"}),n.abrupt("break",53);case 48:return this.handleFetchBackFile(),n.abrupt("break",53);case 50:return this.handleShareFile(),n.abrupt("break",53);case 52:return n.abrupt("break",53);case 53:case"end":return n.stop()}}),n,this)})))}},{key:"clickContextMenuItemEventTracking",value:function(e){var t={"在线播放":"online_play","打开":"open","取回":"getback","分享":"share","复制到":"copy","移动到":"move","删除":"delete","重命名":"rename"},n={"彻底删除":"delete","还原":"recovery"},r={"清空回收站":"all_delete","全部还原":"all_recovery"},o=this.getSelectedFileType();t[e]?this.$eventTrack("yunpan_filelist_rk_click",{clickid:t[e],file_type:o}):n[e]?this.$eventTrack("recycler_select_rk_click",{clickid:n[e]}):r[e]&&this.$eventTrack("recycler_rk_click",{clickid:r[e]})}},{key:"getSelectedFileType",value:function(){if(1===this.selectedFiles.length){var e=this.selectedFiles[0];return"drive#folder"===e.kind?"folder":["video","music"].includes(Object(m.checkCanPreview)(e.file_extension))?"video":"not_video"}return"multiple_file"}},{key:"checkOperationListItemIsPlay",value:function(){return _e(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.containsCurrentPreviewFile)(this.picked);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"handleRenameFile",value:function(){var e=this,t=this.pickedItemList[0];t&&(this.$store.commit("drive/clearFileMode",{type:"drive"}),this.$store.commit("drive/replaceFileItem",{type:"drive",item:Object.assign(Object.assign({},t),{__mode:"rename"})}),this._curRenameItemId=t.id,setTimeout((function(){var input=e.getCreateInputElement();if(input){var t=input.value.lastIndexOf(".");input.focus(),t>-1?input.setSelectionRange(0,t,"forward"):input.select()}})))}},{key:"handleUnTrash",value:function(){return _e(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.pickedItemList.reduce((function(e,n){return e.then((function(){return t.$store.dispatch("drive/untrashFile",{type:"trash",id:n.id})}))}),Promise.resolve());case 3:this.$message.success("还原成功"),this.clearPickedItems(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.$message.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"handleFetchBackFile",value:function(){var e=this;this.$store.dispatch("drive/fetchBackFiles",this.selectedFiles.map((function(e){return e.id}))).catch((function(){e.$message.error("获取文件信息失败")}))}},{key:"handleShareFile",value:function(){this.$store.dispatch("share/shareFiles",this.selectedFiles)}},{key:"handleDeleteFileInTrash",value:function(){return _e(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(te.a)(ne.a)({title:"系统提示",content:"文件删除后将无法恢复，您确认要彻底删除所选文件?"});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:return e.prev=8,e.next=11,this.pickedItemList.reduce((function(e,n){return e.then((function(){return t.$store.dispatch("drive/deleteFile",{type:"trash",id:n.id})}))}),Promise.resolve());case 11:this.$store.dispatch("getAbout"),this.clearPickedItems(),this.$message.success("删除成功"),e.next=19;break;case 16:e.prev=16,e.t1=e.catch(8),this.$message.error(Object(m.getErrorDescription)(e.t1));case 19:case"end":return e.stop()}}),e,this,[[0,5],[8,16]])})))}},{key:"handleTrash",value:function(){return _e(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(te.a)(ee)({vipType:this.vipType,callerInstance:this});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return");case 8:return e.prev=8,e.next=11,this.pathList.filter((function(e){return n.picked.includes(e.id)})).reduce((function(e,t){return e.then((function(){return n.$store.dispatch("drive/trashFile",{type:"drive",id:t.id})}))}),Promise.resolve());case 11:if(t=this.picked.length,this.$message.success("删除成功"),this.clearPickedItems(),!this.hasMore){e.next=18;break}return"drive",e.next=18,this.$store.dispatch("drive",{parent_id:this.parentIdMap[this.active],limit:t,__type:this.active,page_token:this.nextPageTokenMap[this.active]});case 18:e.next=24;break;case 20:e.prev=20,e.t1=e.catch(8),this.$message.error("删除失败"),console.error(e.t1);case 24:case"end":return e.stop()}}),e,this,[[0,5],[8,20]])})))}},{key:"handleMoveConfirm",value:function(e,t){return _e(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=e.map((function(e){return e.id})),n.next=4,this.$store.dispatch("drive/batchMoveFile",{fileIdList:r,parent_id:t.id});case 4:return this.$message.success("移动成功"),this.clearPickedItems(),n.abrupt("return",!0);case 9:return n.prev=9,n.t0=n.catch(0),o=Object(m.safeJSONParse)(n.t0.message),this.$message.error(o.error_description||"位置错误"),n.abrupt("return",!1);case 14:case"end":return n.stop()}}),n,this,[[0,9]])})))}},{key:"handleCopyConfirm",value:function(e,t){return _e(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r=e.map((function(e){return e.id})),n.next=4,this.$store.dispatch("drive/batchCopyFile",{fileIdList:r,parent_id:t.id});case 4:this.$store.dispatch("getAbout"),this.$message.success("复制成功"),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),o=Object(m.safeJSONParse)(n.t0.message),this.$message.error(o.error_description||"位置错误");case 12:case"end":return n.stop()}}),n,this,[[0,8]])})))}},{key:"handleListLoadingMore",value:function(){return _e(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"drive/getFileList",e.next=4,this.$store.dispatch("drive/getFileList",{parent_id:this.parentIdMap[this.active],__type:this.active,page_token:this.nextPageTokenMap[this.active]});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:return e.prev=9,this.loadingMore=!1,e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[0,6,9,12]])})))}},{key:"handleMoveOrCopy",value:function(e){var t;return _e(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,data,c,l,d,f,h=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],n.prev=1,n.next=4,Object(H.k)("");case 4:if(o=n.sent,null===(t=null==o?void 0:o.files)||void 0===t?void 0:t.length){n.next=7;break}return n.abrupt("return");case 7:r=o.files,n.next=15;break;case 10:return n.prev=10,n.t0=n.catch(1),console.warn(n.t0),this.$message.error(Object(m.getErrorDescription)(n.t0)),n.abrupt("return");case 15:return n.prev=15,(data=[{id:"",children:r,title:"我的云盘",expand:!0,icon:"https://backstage-img-ssl.a.88cdn.com/019fc2a136a2881181e73fea74a4836efc02195d"}])[0].children.forEach((function(e,t){w.SYSTEM_FOLDER_TYPE_LIST.includes(e.folder_type)?e.__order=Number.MIN_SAFE_INTEGER+w.SYSTEM_FOLDER_TYPE_LIST.indexOf(e.folder_type):e.__order=t,e.title=e.name,e.icon=e.icon_link,e.leaf="drive#file"===e.kind})),c=this.picked.slice(),n.prev=19,n.next=22,Object(X.a)({props:{data:data,moveOrCopy:e,callerInstance:this,bindingKeyGenerator:function(e){return e.id},disableClass:"is-disabled",disableFunction:function(e){return c.includes(e.id)},defaultPlaceholder:"新建文件夹"}});case 22:l=n.sent,this.$eventTrack("yunpan_move_copy_pop_click",{type:"move",clickid:"confim"}),l&&(d=l.node,f=this.pathList.filter((function(e){return h.picked.includes(e.id)})),"move"===e?this.handleMoveConfirm(f,d):this.handleCopyConfirm(f,d)),n.next=30;break;case 27:n.prev=27,n.t1=n.catch(19),"move"===e?this.$eventTrack("yunpan_move_copy_pop_click",{type:"move",clickid:"cancel"}):this.$eventTrack("yunpan_move_copy_pop_click",{type:"copy",clickid:"cancel"});case 30:n.next=35;break;case 32:n.prev=32,n.t2=n.catch(15),console.error(n.t2);case 35:case"end":return n.stop()}}),n,this,[[1,10],[15,32],[19,27]])})))}},{key:"filterTheSystemDirectory",value:function(){1===this.picked.length&&w.SYSTEM_FOLDER_TYPE_LIST.includes(this.pickedItemList[0].folder_type)&&this.clearPickedItems()}},{key:"handleListScroll",value:function(e){if(this.contextMenuVisible)e.preventDefault();else{var t=this.$refs.list;this.hasMore&&Math.ceil(t.scrollTop+t.offsetHeight)>=t.scrollHeight&&!this.loadingMore&&(this.loadingMore=!0,this.handleListLoadingMore())}}},{key:"handleParentIdMapChange",value:function(e,t){e[this.active]!==t[this.active]&&this.clearPickedItems()}},{key:"handleActiveCollapseItemChange",value:function(e){e!==this.tabType&&this.clearPickedItems()}},{key:"handlePathListLengthChange",value:function(e,t){var n=this;if(e>t){var r=this.pathList.findIndex((function(e){return e.__mode&&"create"===e.__mode}));r>=0&&(!0,this.$nextTick((function(){var e=n.getCreateInputElement();e&&(e.focus(),e.select(),n.picked=[n.pathList[r].id])})))}}},{key:"handlePathListChange",value:function(e,t){var n=this;this.pathList.forEach((function(e){n.idItemMap[e.id]=e}))}},{key:"handleDriveRouteList",value:function(e,t){this.clearPickedItems()}},{key:"handlePickedLengthChange",value:function(e){var t=this.pickedItemList.filter((function(e){return!w.SYSTEM_FOLDER_TYPE_LIST.includes(e.folder_type)})).length;this.allPickedInfo.checked=t===this.lengthExcludeSystemDirectory&&t>0,this.allPickedInfo.indeterminate=t>0&&!this.allPickedInfo.checked,this.allPickedInfo.text=0===t?"全选":"已选中".concat(t,"个文件/文件夹")}},{key:"handlePickedChange",value:function(e){this.$store.commit("drive/setSelectedItemList",{type:this.active,list:this.pickedItemList})}},{key:"clearPickedItems",value:function(){this.picked=[]}},{key:"setPickedIdList",value:function(e){var t=this.pathList.map((function(e){return e.id})),n=e.filter((function(e){return t.includes(e)}));this.picked=n}},{key:"created",value:function(){this.$bus.$on("renameSingleFile",this.handleRenameFile),this.$bus.$on("clearPickedItems",this.clearPickedItems),"drive"===this.tabType&&this.$bus.$on("drive/setPickedList",this.setPickedIdList)}},{key:"beforeDestroy",value:function(){this.$bus.$off("renameSingleFile",this.handleRenameFile),this.$bus.$off("clearPickedItems",this.clearPickedItems),"drive"===this.tabType&&this.$bus.$off("drive/setPickedList",this.setPickedIdList)}},{key:"selectedFiles",get:function(){return this.$store.state.drive.selectItemListMap[this.active]}},{key:"parentIdMap",get:function(){return this.$store.state.drive.parentIdMap}},{key:"driveRouteList",get:function(){return this.$store.state.drive.driveRouteList}},{key:"isDOWNLOADDirectory",get:function(){return this.driveRouteList.length&&"DOWNLOAD"===this.driveRouteList[this.driveRouteList.length-1].folder_type}},{key:"nextPageTokenMap",get:function(){return this.$store.state.drive.nextPageTokenMap}},{key:"hasMore",get:function(){return this.nextPageTokenMap[this.active]}},{key:"isOnlySystemDirectoryInPathList",get:function(){return"drive"===this.active&&this.pathList.every((function(e){return w.SYSTEM_FOLDER_TYPE_LIST.includes(e.folder_type)}))}},{key:"userId",get:function(){return this.$store.state.users.curUser.userId}},{key:"pickedItemList",get:function(){var e=this;return this.picked.map((function(t){return e.idItemMap[t]}))}},{key:"active",get:function(){return this.$store.state.drive.activeCollapseItemType}},{key:"vipType",get:function(){return this.$store.getters["users/curVipType"]}},{key:"sortInfo",get:function(){return this.$store.state.drive.driveSortInfoMap[this.active]}},{key:"lengthExcludeSystemDirectory",get:function(){return this.pathList.filter((function(e){return!w.SYSTEM_FOLDER_TYPE_LIST.includes(e.folder_type)})).length}}]),n}(h.Vue);ke([Object(h.Prop)({})],we.prototype,"pathList",void 0),ke([Object(h.Prop)({})],we.prototype,"tabType",void 0),ke([Object(k.a)({time:100})],we.prototype,"handleCreateInputConfirm",null),ke([Object(h.Watch)("parentIdMap",{deep:!0})],we.prototype,"handleParentIdMapChange",null),ke([Object(h.Watch)("active")],we.prototype,"handleActiveCollapseItemChange",null),ke([Object(h.Watch)("pathList.length",{immediate:!0})],we.prototype,"handlePathListLengthChange",null),ke([Object(h.Watch)("pathList")],we.prototype,"handlePathListChange",null),ke([Object(h.Watch)("driveRouteList")],we.prototype,"handleDriveRouteList",null),ke([Object(h.Watch)("picked")],we.prototype,"handlePickedLengthChange",null),ke([Object(h.Watch)("pickedItemList",{deep:!0})],we.prototype,"handlePickedChange",null);var Oe=we=ke([Object(h.Component)({data:function(){return{SYSTEM_FOLDER_TYPE_LIST:w.SYSTEM_FOLDER_TYPE_LIST}},components:{ContextMenu:N,DropMore:Y,MediaBlock:se,DragMoveTip:fe,ServeProtocol:xe}})],we),je=(n(1052),Object(T.a)(Oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xly-netdisk-wrapper"},[n("contextMenu",{attrs:{"click-position":e.currentContextClickInfo,visible:e.contextMenuVisible,"is-out-of-context-menu":e.isOutOfContextMenu,"picked-item-list":e.pickedItemList},on:{"update:visible":function(t){e.contextMenuVisible=t},"update:isOutOfContextMenu":function(t){e.isOutOfContextMenu=t},"update:is-out-of-context-menu":function(t){e.isOutOfContextMenu=t},clickItem:e.handleClickContextMenuItem}}),e._v(" "),n("div",{staticClass:"xly-netdisk-list__title"},[n("td-checkbox",{attrs:{disabled:!e.pathList.length||e.isOnlySystemDirectoryInPathList,indeterminate:e.allPickedInfo.indeterminate,value:e.allPickedInfo.checked},on:{input:e.handleListAllPickedClick}},[e._v("\n      "+e._s(e.allPickedInfo.text)+"\n    ")]),e._v(" "),n("div",{staticClass:"xly-netdisk-list__operate"},[n("a",{class:{"is-disabled":!e.pathList.length},attrs:{href:"javascript:;",title:"排序"},on:{click:function(t){e.pathList.length&&e.handleClickSortTypeList()}}},[n("i",{staticClass:"xly-icon-sort"})])])],1),e._v(" "),n("serveProtocol",{attrs:{visible:e.showServeProtocol&&"drive"===e.active},on:{close:function(t){e.showServeProtocol=!1}}}),e._v(" "),e.pathList.length?[n("ul",{ref:"list",staticClass:"xly-netdisk-list__items ",class:{"disabled-pointer-events":!e.isOutOfContextMenu},on:{scroll:function(t){return e.handleListScroll(t)},contextmenu:function(t){return t.stopPropagation(),e.handleContextMenu(null,t)}}},e._l(e.pathList,(function(t){return n("li",{key:t.id,staticClass:"xly-netdisk-list__item",class:{"is-chosen":e.picked.includes(t.id)},attrs:{draggable:e.picked.includes(t.id)||e.isDragging},on:{contextmenu:function(n){return n.stopPropagation(),e.handleContextMenu(t,n)},click:function(n){return e.handleClickFileListItem(t,n)},dblclick:function(n){return e.handleConsumeFileOrDirectory(t,{mode:"independent"})},dragstart:function(n){return e.handleDragStart(t,n)},dragend:e.handleDragEnd,dragover:function(n){return n.preventDefault(),e.handleDragOver(t,n)},drop:function(n){return e.handleDrop(t)}}},[n("td-checkbox",{style:{visibility:e.SYSTEM_FOLDER_TYPE_LIST.includes(t.folder_type)?"hidden":"visible"},attrs:{label:t.id},nativeOn:{click:function(t){return t.stopPropagation(),e.filterTheSystemDirectory(t)},dblclick:function(e){e.stopPropagation()}},model:{value:e.picked,callback:function(t){e.picked=t},expression:"picked"}}),e._v(" "),n("MediaBlock",{ref:"mediaBlock",refInFor:!0,attrs:{item:t},on:{inputConfirm:e.handleCreateInputConfirm,consume:function(n){return e.handleConsumeFileOrDirectory(t,{mode:"independent"})}}})],1)})),0),e._v(" "),n("DragMoveTip",{attrs:{"drag-cursor-position":e.dragCursorPosition,"drop-dir-name":e.dropDirName,"is-dragging":e.isDragging,"picked-length":e.picked.length}})]:[n("div",{staticClass:"xly-netdisk-list__empty"},[n("div",{staticClass:"xly-img-empty-netdisk"}),e._v(" "),n("p",[n("pre",[e._v(e._s(e.isDOWNLOADDirectory?"暂无文件，一键导入的下载记录\n以及后续添加的内容会出现在这里":"暂无文件"))])])])],e._v(" "),n("DropMore",{attrs:{visible:e.sortTypeListVisible},on:{"update:visible":function(t){e.sortTypeListVisible=t},changeSortType:e.handleChangeSortType}})],2)}),[],!1,null,null,null).exports);function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Re=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},Pe=function(e){Object(c.a)(n,e);var t=Ce(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"hideHint",value:function(){this.$store.commit("setImportHintShow",!1)}}]),n}(h.Vue),Te=Pe=Re([Object(h.Component)({})],Pe),$e=Object(T.a)(Te,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"xly-netdisk-note xly-netdisk-note"},[this._m(0),this._v(" "),t("span",{staticClass:"xly-netdisk-note__side",on:{click:this.hideHint}},[this._v("知道了")])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"xly-netdisk-note__text"},[this._v("\n    最近100条迅雷文件正在导入，"),t("br"),this._v("传输完毕后可以在「我的资源」\n    文件夹中找到他们\n  ")])}],!1,null,null,null).exports,Ie=n(522);function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Se=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},Le=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},Fe=function(e){Object(c.a)(n,e);var t=De(n);function n(){var e,o;return Object(r.a)(this,n),(o=t.apply(this,arguments)).validDateMap=Object.freeze((e={},Object(y.a)(e,x.VipType.normal,10),Object(y.a)(e,x.VipType.normalVip,10),Object(y.a)(e,x.VipType.platium,15),e)),o}return Object(o.a)(n,[{key:"handleClickExtendHref",value:function(){return Le(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$eventTrack("recycler_operation_click",{clickid:"extend_save_time"}),this.$eventTrack("recycler_prolong_save_textlink_click",{vip_type:this.vipType}),e.prev=2,e.next=5,_.client.callRemoteClientFunction("vip-download-webview","OpenPayVipUrl","https://pay.xunlei.com/pay.html?referfrom=v_pc_xlx_hytq_yp_recycle&aidfrom=recycle_ycwzl");case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[2,7]])})))}},{key:"hanldeActiveChange",value:function(e){"trash"===e&&this.$eventTrack("recycler_prolong_save_textlink_show",{vip_type:this.vipType})}},{key:"vipType",get:function(){return this.$store.getters["users/curVipType"]}},{key:"isSuperVip",get:function(){return"5"===this.vipType}},{key:"active",get:function(){return this.$store.state.drive.activeCollapseItemType}}]),n}(h.Vue);Se([Object(h.Watch)("active")],Fe.prototype,"hanldeActiveChange",null);var Me=Fe=Se([Object(h.Component)({})],Fe),Ee=Object(T.a)(Me,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xly-netdisk-note "},[n("p",{staticClass:"xly-netdisk-note__text"},[e._v("\n    "+e._s(e.isSuperVip?"尊贵的超级会员，您可享受回收站文件保存30天":"回收站保留"+e.validDateMap[e.vipType]+"天内删除的文件")+"\n  ")]),e._v(" "),e.isSuperVip?e._e():n("span",{staticClass:"xly-netdisk-note__side",on:{click:function(t){return e.handleClickExtendHref()}}},[e._v("延长至30天>")])])}),[],!1,null,null,null).exports;function ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Ve=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},Ne=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},We=function(e){Object(c.a)(n,e);var t=ze(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).newDirectoryList=[],e.testData=[{title:"电影视频资源",expand:!0,iconClass:"xly-icon-type xly-type-group is-small",id:0}],e.isActive=!0,e.refreshTimer=null,e.isCreatingDirectory=!1,e.serverEventId=0,e}return Object(o.a)(n,[{key:"beforeDestroy",value:function(){this.$bus.$off("createNewDirectory",this.handleClickCreateDirectory),this.$bus.$off("gotAbout",this.initDriveList),ie.a.detachServerEvent("OnCurNavChange",this.serverEventId)}},{key:"mounted",value:function(){return Ne(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$bus.$on("createNewDirectory",this.handleClickCreateDirectory),this.$store.dispatch("registerImportHint"),this.$bus.$on("gotAbout",this.initDriveList),this.serverEventId=ie.a.attachServerEvent("OnCurNavChange",(function(e,n){n===Ae.Cloud&&"drive"===t.$store.state.drive.activeCollapseItemType&&(t.initDriveList(),t.$store.dispatch("getAbout"))}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"handleRefreshDriveFileList",value:function(){return Ne(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.refreshTimer){e.next=9;break}return e.next=3,this.initDriveList();case 3:return e.next=5,this.$store.dispatch("getAbout");case 5:this.$refs.driveCollapseContainer.clearPickedItems(),this.refreshTimer=setTimeout((function(){t.refreshTimer=null}),1e4),e.next=10;break;case 9:this.$message({id:"handleRefreshDriveFileList",unique:!0,position:"middle",type:"error",message:"10秒内只能刷新1次，请稍后再试"});case 10:case"end":return e.stop()}}),e,this)})))}},{key:"initDriveList",value:function(){return Ne(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$store.dispatch("drive/getFileList",{parent_id:this.parentIdMap.drive,__type:"drive",refresh:!0});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})))}},{key:"handleClickTdCollapseItem",value:function(e){"drive"===e&&"trash"===this.activeCollapseItem?this.$eventTrack("yunpan_tab_click"):"trash"===e&&"drive"===this.activeCollapseItem&&this.$eventTrack("recycler_tab_click")}},{key:"handleRouteListChange",value:function(e){return Ne(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.newDirectoryList=[],this.$store.commit("drive/setDriveRouteList",this.driveRouteList.slice(0,e.length)),t.prev=2,n=this.driveRouteList[this.driveRouteList.length-1].id,t.next=6,this.$store.dispatch("drive/getFileList",{parent_id:n,__type:this.activeCollapseItem,refresh:!0});case 6:this.$store.commit("drive/setParentIdMap",Object(y.a)({},this.activeCollapseItem,n)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})))}},{key:"handleCreateDirectory",value:function(e){return Ne(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isCreatingDirectory){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,this.isCreatingDirectory=!0,!/[\\/:*?"<>|]/.test(e)){t.next=8;break}this.$message.error('名称不能包含\\/:*?"<>|等特殊字符'),t.next=18;break;case 8:if(e.length){t.next=12;break}this.$message.error("文件夹名称不能为空，请输入名称"),t.next=18;break;case 12:return t.next=14,this.$store.dispatch("drive/addFolder",e);case 14:n=t.sent,this.newDirectoryList=[n.file],r=this.driveFileList.slice(),this.$store.commit("drive/setDriveFileList",{data:r,refresh:!0,sort:!1});case 18:t.next=25;break;case 20:t.prev=20,t.t0=t.catch(2),console.log(t.t0),o=Object(m.safeJSONParse)(t.t0.message),this.$message.error(Ie.createDirectoryError[o.error]||"未知错误");case 25:return t.prev=25,this.newDirectoryList=[],this.$nextTick((function(){c.isCreatingDirectory=!1})),t.finish(25);case 29:case"end":return t.stop()}}),t,this,[[2,20,25,29]])})))}},{key:"handleClickContextMenuCreateDirectory",value:function(){this.handleClickCreateDirectory()}},{key:"handleRightClickDriveContainer",value:function(e){e.target.classList.contains("xly-icon-sort")||("trash"!==this.activeCollapseItem?this.$refs.driveCollapseContainer.handleContextMenu(null,e):this.$refs.trashCollapseContainer.contextMenuVisible=!1)}},{key:"handleRightClickTrashContainer",value:function(e){e.target.classList.contains("xly-icon-sort")||("drive"!==this.activeCollapseItem?this.$refs.trashCollapseContainer.handleContextMenu(null,e):this.$refs.driveCollapseContainer.contextMenuVisible=!1)}},{key:"handleClickCreateDirectory",value:function(){return Ne(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"trash"===this.activeCollapseItem&&(this.$store.commit("drive/setActiveCollapseTabType","drive"),setTimeout((function(){t.$refs.driveCollapseContainer.$refs.list.scrollTop=0}),100)),"新建文件夹",this.$store.commit("drive/clearFileMode",{type:"drive"}),this.newDirectoryList=[{__mode:"create",name:"新建文件夹",id:"新建文件夹"}];case 4:case"end":return e.stop()}}),e,this)})))}},{key:"handleClearTrash",value:function(){return Ne(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(te.a)(ne.a)({title:"清空回收站",content:"确认清空回收站？"});case 3:this.$eventTrack("recycler_clear_pop_click",{clickid:"confim"}),e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),this.$eventTrack("recycler_clear_pop_click",{clickid:"cancel"}),e.abrupt("return");case 10:return this.$refs.trashCollapseContainer.picked=[],e.prev=11,e.next=14,this.$store.dispatch("drive/clearTrash");case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),this.$message.error(e.t1);case 19:case"end":return e.stop()}}),e,this,[[0,6],[11,16]])})))}},{key:"handleActiveCollapseItemChange",value:function(e){return Ne(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e!==this.activeCollapseItem){t.next=2;break}return t.abrupt("return");case 2:return this.$store.commit("drive/setActiveCollapseTabType",e),t.prev=3,t.next=6,this.$store.dispatch("drive/getFileList",{parent_id:this.parentIdMap[this.activeCollapseItem],__type:e,refresh:!0});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[3,8]])})))}},{key:"handleParentIdMapChange",value:function(e,t){e[this.activeCollapseItem]!==t[this.activeCollapseItem]&&(this.newDirectoryList=[])}},{key:"parentIdMap",get:function(){return this.$store.state.drive.parentIdMap}},{key:"nextPageTokenMap",get:function(){return this.$store.state.drive.nextPageTokenMap}},{key:"activeCollapseItem",get:function(){return this.$store.state.drive.activeCollapseItemType}},{key:"driveFileList",get:function(){return""===this.parentIdMap.drive?[].concat(Object(v.a)(this.$store.state.drive.driveFileList.slice(0,2)),Object(v.a)(this.newDirectoryList),Object(v.a)(this.$store.state.drive.driveFileList.slice(2))):[].concat(Object(v.a)(this.newDirectoryList),Object(v.a)(this.$store.state.drive.driveFileList))}},{key:"trashFileList",get:function(){return this.$store.state.drive.trashFileList}},{key:"driveRouteList",get:function(){return this.$store.state.drive.driveRouteList}}]),n}(h.Vue);Ve([Object(h.Watch)("parentIdMap",{deep:!0})],We.prototype,"handleParentIdMapChange",null);var Ae,Be=We=Ve([Object(h.Component)({components:{DriveVolume:$,CollapseItemContainer:je,ImportHint:$e,TrashValidTimeTip:Ee}})],We);!function(e){e.Download="download-panel",e.Cloud="pan-plugin-view",e.Browser="find-page"}(Ae||(Ae={}));var Ue=Be,Ye=Object(T.a)(Ue,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xly-client-side"},[n("div",{staticClass:"xly-netdisk-side"},[n("div",{staticClass:"xly-netdisk-list"},[n("td-collapse",{attrs:{value:e.activeCollapseItem},on:{change:e.handleActiveCollapseItemChange}},[n("td-collapse-item",{attrs:{value:"drive"},nativeOn:{"!click":function(t){return e.handleClickTdCollapseItem("drive")},contextmenu:function(t){return e.handleRightClickDriveContainer(t)}}},[n("div",{staticClass:"xly-netdisk-list__header",attrs:{slot:"title"},slot:"title"},["drive"===e.activeCollapseItem?n("td-breadcrumb",{staticStyle:{width:"100%"},attrs:{"init-route-list":e.driveRouteList},on:{onRoutelistChange:e.handleRouteListChange}}):n("span",[e._v("我的云盘")])],1),e._v(" "),n("CollapseItemContainer",{ref:"driveCollapseContainer",attrs:{"tab-type":"drive","path-list":e.driveFileList},on:{confirmCreate:e.handleCreateDirectory,createNewDirectory:e.handleClickContextMenuCreateDirectory,refresh:e.handleRefreshDriveFileList}}),e._v(" "),e.$store.state.isImportHintShow?n("ImportHint"):e._e()],1),e._v(" "),n("td-collapse-item",{staticClass:"xly-netdisk-item--recycle",attrs:{value:"trash"},nativeOn:{"!click":function(t){return e.handleClickTdCollapseItem("trash")},contextmenu:function(t){return e.handleRightClickTrashContainer(t)}}},[n("div",{staticClass:"xly-netdisk-list__header",attrs:{slot:"title"},slot:"title"},[n("span",[e._v("回收站")]),e._v(" "),n("td-button",{attrs:{disabled:!e.trashFileList.length},nativeOn:{click:function(t){e.handleClearTrash(),e.$eventTrack("recycler_operation_click",{clickid:"clear"})}}},[e._v("\n              清空回收站\n            ")])],1),e._v(" "),n("CollapseItemContainer",{ref:"trashCollapseContainer",attrs:{"tab-type":"trash","path-list":e.trashFileList},on:{clearTrash:e.handleClearTrash}}),e._v(" "),n("TrashValidTimeTip")],1)],1)],1),e._v(" "),n("DriveVolume",{on:{refresh:e.initDriveList}})],1)])}),[],!1,null,null,null).exports;function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var qe=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},Xe=function(e){Object(c.a)(n,e);var t=He(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return n}(h.Vue),Ge=Xe=qe([Object(h.Component)({})],Xe),Je=Object(T.a)(Ge,(function(){var e=this.$createElement;this._self._c;return this._m(0)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"xly-empty"},[t("i",{staticClass:"xly-icon-logo"})])}],!1,null,null,null).exports;function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Qe=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},Ze=function(e){Object(c.a)(n,e);var t=Ke(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).canPreview=!1,e}return Object(o.a)(n,[{key:"fileSize",get:function(){return this.file.size?Object(m.formatSize2)(this.file.size):"0B"}},{key:"fileTime",get:function(){return this.file.created_time?Object(m.formatTime)(new Date(this.file.created_time),"yyyy-MM-dd hh:mm"):""}},{key:"fileIconStyle",get:function(){var style={};return this.file.icon_link&&(style.background="url(".concat(this.file.icon_link,") 0% 0% / cover no-repeat")),style}}]),n}(h.Vue);Qe([Object(h.Prop)({})],Ze.prototype,"file",void 0),Qe([Object(h.Prop)({default:-1})],Ze.prototype,"level",void 0),Qe([Object(h.Prop)({default:!1})],Ze.prototype,"noAnimation",void 0);var et=Ze=Qe([Object(h.Component)({components:{}})],Ze),tt=(n(1054),Object(T.a)(et,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td-media",{class:{"is-show":2===e.level,"is-first":1===e.level,"is-secondary":0===e.level,"no-animation":e.noAnimation&&2===e.level}},[n("i",{staticClass:"xly-icon-type xly-type-avi",style:e.fileIconStyle,attrs:{slot:"media"},slot:"media"}),e._v(" "),n("p",{staticClass:"xly-file-name"},[e._v("\n    "+e._s(e.file&&e.file.name)+"\n  ")]),e._v(" "),n("div",{staticClass:"xly-file-info"},["drive#folder"!==e.file.kind?n("p",{staticClass:"xly-file-size"},[e._v("\n      "+e._s(e.fileSize)+"\n    ")]):e._e(),e._v(" "),n("p",{staticClass:"xly-file-time"},[e._v("\n      "+e._s(e.fileTime)+"\n    ")])])])}),[],!1,null,null,null).exports);function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var it=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},ot=function(e){Object(c.a)(n,e);var t=nt(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"buttons",get:function(){return[{name:"analyze",condition:this.analyze,class:"",text:"解析",icon:!1},{name:"download",condition:this.download,class:"td-button--other",text:"取回",icon:"xly-icon-download"},{name:"share",condition:this.share,class:"td-button--other",text:"分享",icon:"xly-icon-share"},{name:"delete",condition:this.delete,class:"td-button--other",text:"删除",icon:"xly-icon-delete"},{name:"project",condition:this.project,class:"td-button--other",text:"投屏",icon:"xly-icon-cast-screen"},{name:"restore",condition:this.restore,class:"td-button--other",text:"还原",icon:"xly-icon-restore"}]}}]),n}(h.Vue);it([Object(h.Prop)({default:!1})],ot.prototype,"analyze",void 0),it([Object(h.Prop)({default:!1})],ot.prototype,"download",void 0),it([Object(h.Prop)({default:!1})],ot.prototype,"share",void 0),it([Object(h.Prop)({default:!1})],ot.prototype,"project",void 0),it([Object(h.Prop)({default:!1})],ot.prototype,"restore",void 0),it([Object(h.Prop)({default:!1})],ot.prototype,"delete",void 0),it([Object(h.Prop)({default:!1})],ot.prototype,"trash",void 0),it([Object(h.Prop)({default:!0})],ot.prototype,"more",void 0),it([Object(h.Prop)({default:!1})],ot.prototype,"rename",void 0),it([Object(h.Prop)({default:!0})],ot.prototype,"move",void 0),it([Object(h.Prop)({default:!0})],ot.prototype,"copy",void 0);var at=ot=it([Object(h.Component)({})],ot),ct=Object(T.a)(at,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xly-netdisk-detail__button"},[e._l(e.buttons,(function(button){return n("td-button",{directives:[{name:"show",rawName:"v-show",value:button.condition,expression:"button.condition"}],key:button.name,class:button.class,attrs:{size:"small"},on:{click:function(t){return e.$emit(button.name)}}},[button.icon?n("i",{class:button.icon}):e._e(),e._v("\n    "+e._s(button.text)+"\n  ")])})),e._v(" "),e.more?n("div",{staticClass:"xly-netdisk-detail__more"},[n("td-button",{staticClass:"td-button--other",attrs:{size:"small"},on:{click:function(t){return e.$emit("more")}}},[n("i",{staticClass:"xly-icon-more"}),e._v(" 更多\n    ")]),e._v(" "),n("div",{staticClass:"xly-more-drop"},[n("ul",[e.trash?n("li",{on:{click:function(t){return e.$emit("trash")}}},[e._v("\n          删除\n        ")]):e._e(),e._v(" "),e.rename?n("li",{on:{click:function(t){return e.$emit("rename")}}},[e._v("\n          重命名\n        ")]):e._e(),e._v(" "),e.move?n("li",{on:{click:function(t){return e.$emit("move")}}},[e._v("\n          移动到\n        ")]):e._e(),e._v(" "),e.copy?n("li",{on:{click:function(t){return e.$emit("copy")}}},[e._v("\n          复制到\n        ")]):e._e()])])],1):e._e()],2)}),[],!1,null,null,null).exports,st=n(1024),lt=n.n(st),ut=n(58);function pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var ft=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},ht=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},vt=function(e){Object(c.a)(n,e);var t=pt(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).fileDetail=e.file,e.isLoading=!1,e.isCurrentFilePlaying=!1,e.eventId=0,e}return Object(o.a)(n,[{key:"created",value:function(){return ht(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"clickPlayTrack",value:function(){this.$eventTrack("file_detail_page_top_click",{from:"yunpan_list",filesuffix:this.file.file_extension,file_name:this.file.name,file_id:this.file.id,vip_type:this.$store.getters["users/curVipType"]})}},{key:"backToEmbbed",value:function(){ie.a.callServerFunction("BackUpEmbed")}},{key:"init",value:function(){var e;return ht(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.file.trashed){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,this.file.isExternal){t.next=7;break}return t.next=6,Object(H.m)(null===(e=this.file)||void 0===e?void 0:e.id);case 6:this.fileDetail=t.sent;case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})))}},{key:"checkIsCurrentFilePlaying",value:function(){return ht(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ut.getXmpPlayingFile)();case 2:if(e.sent!==this.file.id){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"onResize",value:function(){this.$nextTick((function(){var e=document.getElementById("pan-preview"),rect={left:0,top:0,width:0,height:0};e&&(rect=e.getBoundingClientRect()),ie.a.callServerFunction("UpdatePanDivRect",{x:rect.left+100,y:rect.top+40,width:rect.width,height:rect.height}),ie.a.callServerFunction("UpdatePanMiniRect",{width:350,height:200,x:window.innerWidth-350-40+100,y:window.innerHeight-200-30+40}),ie.a.callServerFunction("updatePosition")}))}},{key:"onFileChange",value:function(e){this.init(),(e.isPlayInstantly||this.fileDetail.changeRect)&&(this.fileDetail=this.file,this.play(e.mode||"independent"))}},{key:"mounted",value:function(){return ht(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(this.fileDetail.isPlayInstantly||this.fileDetail.changeRect)&&this.play(this.fileDetail.mode||"independent"),e.next=3,ie.a.attachServerEvent("OnXmpState",(function(e,n,r,o){n===yt.onPreOpen&&(t.isLoading=!1),n===yt.onOpenSucceeded&&o===t.file.id?t.isCurrentFilePlaying=!0:t.isCurrentFilePlaying=!1,n===yt.onXmpQuit&&(t.isLoading=!1,t.isCurrentFilePlaying=!1)}));case 3:return this.eventId=e.sent,e.next=6,this.checkIsCurrentFilePlaying();case 6:if(!e.sent){e.next=8;break}this.isCurrentFilePlaying=!0;case 8:this.$bus.$on("dlnaPlay",this.play.bind(this,"panel",!0));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"play",value:function(e,t){return ht(this,void 0,void 0,regeneratorRuntime.mark((function n(){var rect;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.fileDetail.trashed){n.next=3;break}return this.$emit("restore",{fromPlay:!0}),n.abrupt("return");case 3:if(this.fileDetail.web_content_link){n.next=6;break}return this.$message.error("该文件暂时无法播放"),n.abrupt("return");case 6:return n.prev=6,console.log("play file:",this.fileDetail.name,e),rect=this.$refs.preview.getBoundingClientRect(),console.log("dlna",t),n.next=12,ie.a.callServerFunction("UpdatePanDivRect",{x:rect.left+100,y:rect.top+40,width:rect.width,height:rect.height});case 12:if(ie.a.callServerFunction("UpdatePanMiniRect",{width:350,height:200,x:window.innerWidth-350-40+100,y:window.innerHeight-200-30+40}),this.fileDetail.changeRect){n.next=19;break}return"independent"!==e&&(this.isLoading=!0),ie.a.callServerFunction("curTaskChange",this.file.id),n.next=18,ie.a.callServerFunction("PlayFileByXmp",{playUrl:this.fileDetail.web_content_link,fileName:this.fileDetail.name,isEmbed:"independent"!==e,openFrom:"ThunderPanPlugin",panFileId:this.fileDetail.id,medias:this.fileDetail.medias,dlnaPlay:t});case 18:window.addEventListener("resize",this.onResize.bind(this));case 19:n.next=24;break;case 21:n.prev=21,n.t0=n.catch(6),this.$message({message:"播放失败",type:"error",position:"middle",duration:3e3});case 24:case"end":return n.stop()}}),n,this,[[6,21]])})))}},{key:"onFileIdChange",value:function(e){return ht(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ie.a.callServerFunction("curTaskChange",e),this.isCurrentFilePlaying=!1,t.next=4,this.checkIsCurrentFilePlaying();case 4:if(!t.sent){t.next=8;break}this.isCurrentFilePlaying=!0,t.next=9;break;case 8:window.removeEventListener("resize",this.onResize.bind(this));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"beforeDestroy",value:function(){ie.a.callServerFunction("curTaskChange",void 0),0!==this.eventId&&ie.a.detachServerEvent("OnXmpState",this.eventId),window.removeEventListener("resize",this.onResize.bind(this)),this.$bus.$off("dlnaPlay",this.play.bind(this,"panel",!0))}},{key:"isVip",get:function(){return this.$store.getters["users/isVip"]}}]),n}(h.Vue);ft([Object(h.Prop)({})],vt.prototype,"file",void 0),ft([Object(k.a)({time:300})],vt.prototype,"backToEmbbed",null),ft([lt()(200,{trailing:!0})],vt.prototype,"onResize",null),ft([Object(h.Watch)("file",{deep:!0})],vt.prototype,"onFileChange",null),ft([Object(k.a)({time:300})],vt.prototype,"play",null),ft([Object(h.Watch)("file.id",{deep:!0})],vt.prototype,"onFileIdChange",null);var yt,mt=vt=ft([Object(h.Component)({})],vt);!function(e){e.onOpenSucceeded="OnOpenSucceeded",e.onOpenFailed="OnOpenFailed",e.onPlayFailed="OnPlayFailed",e.onPlaying="OnPlaying",e.onPreOpen="OnPreOpen",e.onPaused="OnPaused",e.onPlayCompleted="OnPlayCompleted",e.onPreStop="OnPreStop",e.onStop="OnStop",e.onXmpQuit="OnXmpQuit",e.onXmpStartFailed="OnXmpStartFailed"}(yt||(yt={}));var bt=mt,xt=Object(T.a)(bt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"preview",staticClass:"xly-preview",class:{"is-vip":e.isVip},attrs:{id:"pan-preview"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading&&!e.isCurrentFilePlaying,expression:"!isLoading && !isCurrentFilePlaying"}],staticClass:"xly-preview__play",on:{click:function(t){e.play("panel"),e.clickPlayTrack()}}},[n("i",{staticClass:"xly-icon-play-detail"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"xly-preview__loading"},[n("i",{staticClass:"img-icon-loading"}),e._v(" "),n("p",[e._v("正在启动播放器…")])]),e._v(" "),e.isCurrentFilePlaying?[n("p",{staticClass:"xly-preview__text"},[e._v("\n      当前视频窗口播放中\n    ")]),e._v(" "),n("td-button",{on:{click:e.backToEmbbed}},[e._v("\n      内嵌播放\n    ")])]:e._e()],2)}),[],!1,null,null,null).exports;function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var kt=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},_t=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},wt=function(e){Object(c.a)(n,e);var t=gt(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).fileDetail=e.file,e}return Object(o.a)(n,[{key:"init",value:function(){var e;return _t(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(H.m)(null===(e=this.file)||void 0===e?void 0:e.id);case 3:this.fileDetail=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"created",value:function(){return _t(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.showAtFirst){e.next=3;break}return e.next=3,this.init();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"clickPlayTrack",value:function(){this.$eventTrack("file_detail_page_top_click",{from:"yunpan_list",filesuffix:this.file.file_extension,file_name:this.file.name,file_id:this.file.id,vip_type:this.$store.getters["users/curVipType"]})}},{key:"mounted",value:function(){var e;(null===(e=this.fileDetail)||void 0===e?void 0:e.isPlayInstantly)&&this.preview()}},{key:"onFileChange",value:function(e){return _t(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.showAtFirst){t.next=4;break}return t.next=3,Object(H.m)(this.file.id);case 3:this.fileDetail=t.sent;case 4:e.isPlayInstantly&&this.preview();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"preview",value:function(){return _t(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={windowWidth:900,windowHeight:616,singleton:!0,imgSrc:this.fileDetail.web_content_link},e.next=4,ie.a.callServerFunction("MessageBoxCustom","imgViewer",t,{resizable:!0});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.$message({message:"调用图片浏览器失败",type:"error",position:"middle",duration:3e3});case 9:case"end":return e.stop()}}),e,this,[[0,6]])})))}},{key:"restore",value:function(){this.$emit("restore",{fromPlay:!0})}}]),n}(h.Vue);kt([Object(h.Prop)({})],wt.prototype,"file",void 0),kt([Object(h.Prop)({default:!0})],wt.prototype,"showAtFirst",void 0),kt([Object(h.Watch)("file",{deep:!0})],wt.prototype,"onFileChange",null);var Ot=wt=kt([Object(h.Component)({})],wt),jt=Object(T.a)(Ot,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xly-preview is-picture is-picture-recycle",class:{"is-picture-recycle":e.showAtFirst}},[e.showAtFirst?n("img",{attrs:{src:e.fileDetail.web_content_link,alt:e.fileDetail.name},on:{click:function(t){e.preview(),e.clickPlayTrack()}}}):n("div",{staticClass:"xly-preview__button"},[n("td-button",{on:{click:e.restore}},[e._v("\n      查看图片\n    ")])],1)])}),[],!1,null,null,null).exports;function Ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Rt=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},Pt=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},Tt=function(e){Object(c.a)(n,e);var t=Ct(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).fileDetail=e.file,e.isLoading=!1,e.eventId=0,e.isCurrentFilePlaying=!1,e}return Object(o.a)(n,[{key:"created",value:function(){return Pt(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.init();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"backToEmbbed",value:function(){ie.a.callServerFunction("BackUpEmbed")}},{key:"init",value:function(){var e;return Pt(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.file.trashed){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,this.file.isExternal){t.next=7;break}return t.next=6,Object(H.m)(null===(e=this.file)||void 0===e?void 0:e.id);case 6:this.fileDetail=t.sent;case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[2,9]])})))}},{key:"checkIsCurrentFilePlaying",value:function(){return Pt(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ut.getXmpPlayingFile)();case 2:if(e.sent!==this.file.id){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"onResize",value:function(){this.$nextTick((function(){var e=document.getElementById("pan-preview"),rect={left:0,top:0,width:0,height:0};e&&(rect=e.getBoundingClientRect()),ie.a.callServerFunction("UpdatePanDivRect",{x:rect.left+100,y:rect.top+40,width:rect.width,height:rect.height}),ie.a.callServerFunction("UpdatePanMiniRect",{width:350,height:200,x:window.innerWidth-350-40+100,y:window.innerHeight-200-30+40}),ie.a.callServerFunction("updatePosition")}))}},{key:"onFileChange",value:function(e){this.init(),e.isPlayInstantly&&(this.fileDetail=this.file,this.play(e.mode||"independent"))}},{key:"clickPlayTrack",value:function(){this.$eventTrack("file_detail_page_top_click",{from:"yunpan_list",filesuffix:this.file.file_extension,file_name:this.file.name,file_id:this.file.id,vip_type:this.$store.getters["users/curVipType"]})}},{key:"mounted",value:function(){return Pt(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fileDetail.isPlayInstantly&&this.play(this.fileDetail.mode||"independent"),e.next=3,ie.a.attachServerEvent("OnXmpState",(function(e,n,r,o){return Pt(t,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n===yt.onPreOpen&&(this.isLoading=!1),n===yt.onOpenSucceeded&&o===this.file.id?this.isCurrentFilePlaying=!0:this.isCurrentFilePlaying=!1,n===yt.onXmpQuit&&(this.isLoading=!1,this.isCurrentFilePlaying=!1),e.next=5,this.checkIsCurrentFilePlaying();case 5:if(!e.sent){e.next=7;break}this.isCurrentFilePlaying=!0;case 7:case"end":return e.stop()}}),e,this)})))}));case 3:this.eventId=e.sent;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"play",value:function(e){return Pt(this,void 0,void 0,regeneratorRuntime.mark((function t(){var rect;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isLoading=!0,!this.fileDetail.trashed){t.next=4;break}return this.$emit("restore",{fromPlay:!0}),t.abrupt("return");case 4:if(this.fileDetail.web_content_link){t.next=7;break}return this.$message.error("该文件暂时无法播放"),t.abrupt("return");case 7:return t.prev=7,console.log("play file:",this.fileDetail.name,e),rect=this.$refs.preview.getBoundingClientRect(),t.next=12,ie.a.callServerFunction("UpdatePanDivRect",{x:rect.left+100,y:rect.top+40,width:rect.width,height:rect.height});case 12:return ie.a.callServerFunction("UpdatePanMiniRect",{width:350,height:200,x:window.innerWidth-350-40+100,y:window.innerHeight-200-30+40}),t.next=15,ie.a.callServerFunction("PlayFileByXmp",{playUrl:this.fileDetail.web_content_link,fileName:this.fileDetail.name,isEmbed:"independent"!==e,openFrom:"ThunderPanPlugin",panFileId:this.fileDetail.id,medias:this.fileDetail.medias});case 15:window.addEventListener("resize",this.onResize.bind(this)),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(7),this.isLoading=!1,this.$message({message:"播放失败",type:"error",position:"middle",duration:3e3});case 22:case"end":return t.stop()}}),t,this,[[7,18]])})))}},{key:"onFileIdChange",value:function(e){return Pt(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ie.a.callServerFunction("curTaskChange",e),this.isCurrentFilePlaying=!1,t.next=4,this.checkIsCurrentFilePlaying();case 4:if(!t.sent){t.next=8;break}this.isCurrentFilePlaying=!0,t.next=9;break;case 8:window.removeEventListener("resize",this.onResize.bind(this));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"beforeDestroy",value:function(){ie.a.callServerFunction("curTaskChange",void 0),0!==this.eventId&&ie.a.detachServerEvent("OnXmpOpenSucceeded",this.eventId),window.removeEventListener("resize",this.onResize.bind(this)),ie.a.detachServerEvent("OnXmpOpenSucceeded",this.eventId)}},{key:"isVip",get:function(){return this.$store.getters["users/isVip"]}}]),n}(h.Vue);Rt([Object(h.Prop)({})],Tt.prototype,"file",void 0),Rt([Object(k.a)({time:300})],Tt.prototype,"backToEmbbed",null),Rt([lt()(200,{trailing:!0})],Tt.prototype,"onResize",null),Rt([Object(h.Watch)("file",{deep:!0})],Tt.prototype,"onFileChange",null),Rt([Object(k.a)({time:300})],Tt.prototype,"play",null),Rt([Object(h.Watch)("file.id",{deep:!0})],Tt.prototype,"onFileIdChange",null);var $t=Tt=Rt([Object(h.Component)({})],Tt),It=Object(T.a)($t,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"preview",staticClass:"xly-preview is-music",class:{"is-vip":e.isVip},attrs:{id:"pan-preview"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading&&!e.isCurrentFilePlaying,expression:"!isLoading && !isCurrentFilePlaying"}],staticClass:"xly-preview__play",on:{click:function(t){e.play("panel"),e.clickPlayTrack()}}},[n("i",{staticClass:"xly-icon-play-detail"})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],staticClass:"xly-preview__loading"},[n("i",{staticClass:"img-icon-loading"}),e._v(" "),n("p",[e._v("正在启动播放器…")])]),e._v(" "),e.isCurrentFilePlaying?[n("p",{staticClass:"xly-preview__text"},[e._v("\n      当前视频窗口播放中\n    ")]),e._v(" "),n("td-button",{on:{click:e.backToEmbbed}},[e._v("\n      内嵌播放\n    ")])]:e._e()],2)}),[],!1,null,null,null).exports,Dt=n(523),St=n(25);function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Ft=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},Mt=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},Et=function(e){Object(c.a)(n,e);var t=Lt(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).isIncreasing=!1,e}return Object(o.a)(n,[{key:"getCardLevel",value:function(e){var t=this.lastThreeFile.length;return 1===t||2===t&&1===e||3===t&&2===e?2:2===t&&0===e||3===t&&1===e?1:0}},{key:"onFileCountChange",value:function(e,t){this.isIncreasing=e>t||void 0===t}},{key:"onFilesChange",value:function(e,t){if(void 0===t||e.length>t.length){var n=[],r=[],o=[];this.files.forEach((function(e){n.push(e.id||""),r.push("drive#folder"===e.kind?"folder":e.file_extension||""),o.push(encodeURIComponent(e.name||""))})),this.$eventTrack("file_detail_page_top_show",{from:"yunpan_list",select_state:1===this.fileCount?"single_select":"multi_select",filesuffix:r,file_name:o,file_id:n,vip_type:this.$store.getters["users/curVipType"]})}}},{key:"onShare",value:function(){this.buttonClickTrack("share"),this.$store.dispatch("share/shareFiles",this.files)}},{key:"onDownload",value:function(){return Mt(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.buttonClickTrack("getback"),this.files&&(t=[],this.files.forEach((function(e){e.id&&t.push(e.id)})),this.$store.dispatch("drive/fetchBackFiles",t).catch((function(){n.$message.error("获取文件信息失败")})));case 2:case"end":return e.stop()}}),e,this)})))}},{key:"onMoveOrCopy",value:function(e){var t;return Mt(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,c,data,l,d,f,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.checkIsCurrentFilePlaying();case 2:if(!n.sent){n.next=9;break}if("copy"!==e){n.next=7;break}ie.a.callServerFunction("NotifyXmpQuit"),n.next=9;break;case 7:return this.$message.error("播放过程中不允许移动"),n.abrupt("return");case 9:return this.buttonClickTrack(e),r=["RESTORE","DOWNLOAD"],o=[],n.prev=12,n.next=15,Object(H.k)("");case 15:if(c=n.sent,null===(t=null==c?void 0:c.files)||void 0===t?void 0:t.length){n.next=18;break}return n.abrupt("return");case 18:o=c.files,n.next=26;break;case 21:return n.prev=21,n.t0=n.catch(12),console.warn(n.t0),this.$message.error(Object(m.getErrorDescription)(n.t0)),n.abrupt("return");case 26:return n.prev=26,(data=[{id:"",children:o,title:"我的云盘",expand:!0,icon:"https://backstage-img-ssl.a.88cdn.com/019fc2a136a2881181e73fea74a4836efc02195d"}])[0].children.forEach((function(e,t){r.includes(e.folder_type)?e.__order=Number.MIN_SAFE_INTEGER+r.indexOf(e.folder_type):e.__order=t,e.title=e.name,e.icon=e.icon_link,e.leaf="drive#file"===e.kind})),l=this.files.slice(),n.next=32,Object(X.a)({props:{data:data,callerInstance:this,bindingKeyGenerator:function(e){return e.id},disableFunction:function(e){return l.includes(e.id)}}});case 32:d=n.sent,f=this.files.map((function(e){return e.id||""})),d&&(h=d.node,"move"===e?this.batchMove(f,h.id):this.batchCopy(f,h.id)),n.next=40;break;case 37:n.prev=37,n.t1=n.catch(26),console.error(n.t1);case 40:case"end":return n.stop()}}),n,this,[[12,21],[26,37]])})))}},{key:"batchCopy",value:function(e,t){return Mt(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(H.a)(e,t).then((function(e){(null==e?void 0:e.task_id)&&r.$message({message:"复制成功",type:"success",position:"middle",duration:3e3})})).catch((function(e){r.$message({message:"复制失败 - ".concat(Object(m.getErrorDescription)(e)),type:"error",position:"middle",duration:3e3}),console.error(e)})));case 1:case"end":return n.stop()}}),n)})))}},{key:"batchMove",value:function(e,t){return Mt(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Object(H.c)(e,t).then((function(e){(null==e?void 0:e.task_id)&&(r.$message({message:"移动成功",type:"success",position:"middle",duration:3e3}),r.$bus.$emit("clearPickedItems"),r.$store.dispatch("drive/getFileList",{parent_id:r.$store.state.drive.parentIdMap.drive,limit:10,__type:r.$store.state.drive.activeCollapseItemType,refresh:!0}))})).catch((function(e){r.$message({message:"".concat(Object(m.getErrorDescription)(e)),type:"error",position:"middle",duration:3e3}),console.error(e)})));case 1:case"end":return n.stop()}}),n)})))}},{key:"onRename",value:function(){return Mt(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.buttonClickTrack("rename"),e.next=3,this.checkIsCurrentFilePlaying();case 3:if(!e.sent){e.next=6;break}return this.$message.error("播放过程中不允许重命名"),e.abrupt("return");case 6:this.$bus.$emit("renameSingleFile");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"onTrash",value:function(){return Mt(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.buttonClickTrack("delete"),e.next=3,this.checkIsCurrentFilePlaying();case 3:if(!e.sent){e.next=6;break}return this.$message.error("播放过程中不允许删除"),e.abrupt("return");case 6:return e.prev=6,e.next=9,Object(te.a)(ee)({callerInstance:this,vipType:this.$store.getters["users/curVipType"]});case 9:e.next=14;break;case 11:return e.prev=11,e.t0=e.catch(6),e.abrupt("return");case 14:return e.prev=14,e.next=17,this.files.reduce((function(e,t){return e.then((function(){return n.$store.dispatch("drive/trashFile",{type:"drive",id:t.id})}))}),Promise.resolve());case 17:if(t=this.files.length,this.$bus.$emit("clearPickedItems"),this.$message.success("删除成功"),!this.hasMore){e.next=23;break}return e.next=23,this.$store.dispatch("drive/getFileList",{parent_id:this.$store.state.drive.parentIdMap[this.active],limit:t,__type:this.active,page_token:this.nextPageTokenMap[this.active]});case 23:e.next=29;break;case 25:e.prev=25,e.t1=e.catch(14),this.$message.error("删除失败"),console.error(e.t1);case 29:case"end":return e.stop()}}),e,this,[[6,11],[14,25]])})))}},{key:"checkIsCurrentFilePlaying",value:function(){return Mt(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("video"!==this.previewType&&"music"!==this.previewType){e.next=6;break}return e.next=3,Object(ut.getXmpPlayingFile)();case 3:if(e.sent!==this.files[0].id){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"onDelete",value:function(){return Mt(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.trashClickStat("recycler_right_btn_click","delete"),e.next=4,Object(te.a)(ne.a)({callerInstance:this,title:"系统提示",content:"文件删除后将无法恢复，您确认要彻底删除所选文件?"});case 4:this.trashClickStat("recycler_right_delete-btn_click","confirm"),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),this.trashClickStat("recycler_right_delete-btn_click","cancel"),e.abrupt("return");case 11:return e.prev=11,Object(St.getCaptchaToken)(!0),e.next=15,this.files.reduce((function(e,n){return e.then((function(){return t.$store.dispatch("drive/deleteFile",{type:"trash",id:n.id})}))}),Promise.resolve());case 15:this.$bus.$emit("clearPickedItems"),this.$message.success("删除成功"),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(11),this.$message.error(e.t1);case 22:case"end":return e.stop()}}),e,this,[[0,7],[11,19]])})))}},{key:"onMore",value:function(){this.buttonClickTrack("more")}},{key:"onRestore",value:function(e){return Mt(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(null==e?void 0:e.fromPlay)?this.trashClickStat("recycler_right_btn_click","play"):this.trashClickStat("recycler_right_btn_click","recovery"),t.next=4,this.files.reduce((function(e,t){return e.then((function(){return n.$store.dispatch("drive/untrashFile",{type:"trash",id:t.id})}))}),Promise.resolve());case 4:this.$bus.$emit("clearPickedItems"),this.$message.success("还原成功"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),this.$message.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})))}},{key:"analyzeTorrent",value:function(){var e,t;return Mt(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(H.m)(null===(t=null===(e=this.files)||void 0===e?void 0:e[0])||void 0===t?void 0:t.id);case 3:return r=n.sent,n.next=6,Object(Dt.getThunderTempPath)();case 6:o=n.sent,console.log("种子保存到临时目录：",o),c={url:null==r?void 0:r.web_content_link,savePath:o,fileName:"".concat(r.id,".torrent"),nameFixed:0},ie.a.callServerFunction("DownloadBySDK",c,(function(e,t){e&&ie.a.callServerFunction("DropOpenFile",t)})),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),console.error(n.t0);case 15:case"end":return n.stop()}}),n,this,[[0,12]])})))}},{key:"onProject",value:function(){this.$bus.$emit("dlnaPlay")}},{key:"buttonClickTrack",value:function(e){var t=[],n=[],r=[],o=[];this.files.forEach((function(e){t.push(e.id||""),n.push(e.file_extension||""),r.push(encodeURIComponent(e.name||"")),o.push(Object(m.checkCanPreview)(e.file_extension||""))})),this.$eventTrack("file_detail_page_bottom_click",{from:"yunpan_list",file_num:this.fileCount,filesuffix:n,file_type:o,file_name:r,file_ids:t,vip_type:this.$store.getters["users/curVipType"],clickid:e})}},{key:"trashClickStat",value:function(e,t){var n={video:"video",music:"video",picture:"photo",other:"other"}[this.previewType];this.isSelectingTrash&&1===this.fileCount&&".torrent"===this.files[0].file_extension&&(n="BT"),this.$eventTrack(e,{clickid:t,type:n})}},{key:"lastThreeFile",get:function(){return this.files.slice().reverse().slice(0,3).reverse()}},{key:"fileCount",get:function(){return Array.isArray(this.files)?this.files.length:0}},{key:"isSingleFile",get:function(){return 1===this.fileCount}},{key:"nextPageTokenMap",get:function(){return this.$store.state.drive.nextPageTokenMap}},{key:"active",get:function(){return this.$store.state.drive.activeCollapseItemType}},{key:"hasMore",get:function(){return this.nextPageTokenMap[this.active]}},{key:"previewType",get:function(){return 1===this.fileCount&&this.files[0].file_extension?Object(m.checkCanPreview)(this.files[0].file_extension):"other"}},{key:"canPreview",get:function(){return"other"!==this.previewType}},{key:"categoryId",get:function(){return this.$store.state["retrieval-list"].categoryData.categoryId}}]),n}(h.Vue);Ft([Object(h.Prop)({})],Et.prototype,"files",void 0),Ft([Object(h.Prop)({default:!1})],Et.prototype,"isSelectingTrash",void 0),Ft([Object(h.Watch)("fileCount",{immediate:!0})],Et.prototype,"onFileCountChange",null),Ft([Object(h.Watch)("files",{immediate:!0})],Et.prototype,"onFilesChange",null),Ft([Object(k.a)({time:300})],Et.prototype,"onShare",null),Ft([Object(k.a)({time:300})],Et.prototype,"onDownload",null);var zt=Et=Ft([Object(h.Component)({components:{DriveFileCard:tt,DriveDetailButtons:ct,DrivePreviewVideo:xt,DrivePreviewPicture:jt,DrivePreviewMusic:It}})],Et),Vt=Object(T.a)(zt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xly-netdisk-detail",staticStyle:{padding:"1px 10px 10px"}},[e.canPreview&&1===e.fileCount?n("div",{staticClass:"xly-netdisk-preview"},[n("div",{staticClass:"xly-netdisk-preview__title"},[n("p",[e._v("\n        "+e._s(e.files[0].name)+"\n      ")])]),e._v(" "),"video"===e.previewType?n("DrivePreviewVideo",{attrs:{file:e.files[0]},on:{restore:e.onRestore}}):e._e(),e._v(" "),"picture"===e.previewType?n("DrivePreviewPicture",{attrs:{file:e.files[0],"show-at-first":!e.isSelectingTrash},on:{restore:e.onRestore}}):e._e(),e._v(" "),"music"===e.previewType?n("DrivePreviewMusic",{attrs:{file:e.files[0]},on:{restore:e.onRestore}}):e._e()],1):[n("div",{staticClass:"xly-netdisk-file",class:{"is-more":e.fileCount>1}},e._l(e.lastThreeFile,(function(t,r){return n("DriveFileCard",{key:t.id+r,attrs:{file:t,level:e.getCardLevel(r),"no-animation":!e.isIncreasing}})})),1),e._v(" "),e.canPreview&&1===e.fileCount?e._e():n("div",{staticClass:"xly-netdisk-detail__text"},[n("p",[e._v("已选择"+e._s(e.fileCount)+"个项目")])])],e._v(" "),n("DriveDetailButtons",{attrs:{analyze:!e.isSelectingTrash&&1===e.fileCount&&".torrent"===e.files[0].file_extension,project:!e.isSelectingTrash&&"video"===e.previewType,download:!e.isSelectingTrash,share:!e.isSelectingTrash,trash:!e.isSelectingTrash,restore:e.isSelectingTrash,move:!e.isSelectingTrash,more:!e.isSelectingTrash&&!["RESTORE","DOWNLOAD"].includes(e.files[0].folder_type),copy:!e.isSelectingTrash,rename:!e.isSelectingTrash&&1===e.fileCount,delete:e.isSelectingTrash},on:{analyze:e.analyzeTorrent,share:e.onShare,download:e.onDownload,copy:function(t){return e.onMoveOrCopy("copy")},move:function(t){return e.onMoveOrCopy("move")},more:e.onMore,trash:e.onTrash,rename:e.onRename,project:e.onProject,delete:e.onDelete,restore:e.onRestore}})],2)}),[],!1,null,null,null).exports;function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Wt=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},At=function(e){Object(c.a)(n,e);var t=Nt(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"selectedCount",get:function(){return this.selectedFiles.length}},{key:"selectedFiles",get:function(){return this.$store.state.drive.selectItemListMap[this.currentCollapse]}},{key:"currentCollapse",get:function(){return this.$store.state.drive.activeCollapseItemType}}]),n}(h.Vue),Bt=At=Wt([Object(h.Component)({components:{DriveContentSelectNone:Je,DriveContentSelected:Vt}})],At),Ut=(n(1083),n(1085),Object(T.a)(Bt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xly-down__main",staticStyle:{position:"relative"}},[0===e.selectedCount||1===e.selectedCount&&"新建文件夹"===e.selectedFiles[0].id?n("DriveContentSelectNone"):e._e(),e._v(" "),e.selectedCount>0?n("DriveContentSelected",{attrs:{files:e.selectedFiles,"is-selecting-trash":"trash"===e.currentCollapse}}):e._e()],1)}),[],!1,null,null,null).exports),Yt=n(14),Ht=n(517),qt=n(76),Xt=n.n(qt),Gt=n(0),Jt=n(1087),Kt=n.n(Jt),Qt=n(1088),Zt=n.n(Qt),en=n(1089),tn=n.n(en),nn=n(1090),rn=n.n(nn),on=(n(994),n(996),n(997),n(995),n(1091),n(47)),an=n(5),cn=n(124),sn=n.n(cn);function ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var un=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},dn=function(e){Object(c.a)(n,e);var t=ln(n);function n(){var e,o;return Object(r.a)(this,n),(o=t.apply(this,arguments)).visible=!1,o.limit100=Object.freeze({img:Kt.a,alt:"开通会员单次可上传500个文件",title:"开通会员单次可上传500个文件，<br>并尊享8大专属特权",hint:"非会员单次只能上传100个文件",button:"开通会员",buttonClass:x.VipType.superv===o.vipType?"xly-button--super":""}),o.limit500=Object.freeze({img:Zt.a,alt:"只能上传500个文件",title:"抱歉单次最多只能上传500个文件，<br>你可以分次上传",hint:"",button:"知道了",buttonClass:x.VipType.superv===o.vipType?"xly-button--super":""}),o.limit5g=Object.freeze({img:tn.a,alt:"开通会员可以上传最大120g",title:"开通会员可上传120G大文件，<br>并尊享8大专属特权",hint:"非会员单文件不能超过5G",button:"开通会员",buttonClass:x.VipType.superv===o.vipType?"xly-button--super":""}),o.limit20g=Object.freeze({img:rn.a,alt:"超级会员可以上传最大120g",title:"开通会员可上传120G大文件，<br>并尊享8大专属特权",hint:"白金会员单文件不能超过20G",button:"开通超级会员",buttonClass:x.VipType.superv===o.vipType?"xly-button--super":""}),o.limit120g=Object.freeze({img:Zt.a,alt:"不能超过120G大文件",title:"抱歉单个上传文件不能超过120G<br>请检查后重新上传",hint:"",button:"知道了",buttonClass:x.VipType.superv===o.vipType?"xly-button--super":""}),o.uiInfo=Object.freeze((e={},Object(y.a)(e,x.VipType.normal,{exceedNumberLimit:o.limit100,exceedSizeLimit:o.limit5g}),Object(y.a)(e,x.VipType.normalVip,{exceedNumberLimit:o.limit100,exceedSizeLimit:o.limit5g}),Object(y.a)(e,x.VipType.platium,{exceedNumberLimit:o.limit500,exceedSizeLimit:o.limit20g}),Object(y.a)(e,x.VipType.superv,{exceedNumberLimit:o.limit500,exceedSizeLimit:o.limit120g}),e)),o}return Object(o.a)(n,[{key:"getProperty",value:function(e){return sn()(this.uiInfo[this.vipType],this.type,e)}},{key:"show",value:function(){this.visible=!0}},{key:"close",value:function(){this.visible=!1,this.$destroy()}},{key:"buttonClick",value:function(){if("知道了"!==this.button){Object(on.eventTrack)("add_yunpan_limit_pop_click",{vip_type:this.vipType,limit_type:"exceedSizeLimit"===this.type?"over_size":"over_number",clickid:"开通超级会员"===this.button?"upgrade_vip":"open_vip"});var e="exceedNumberLimit"===this.type?"upload_nums_pop":"upload_size_pop";Object(an.callRemote)("vip-download-webview","OpenPayVipUrl","https://pay.xunlei.com/pay.html?referfrom=v_pc_xlx_hytq_yp_storage&aidfrom=".concat(e))}Object(on.eventTrack)("add_yunpan_limit_pop_click",{vip_type:this.vipType,limit_type:"exceedSizeLimit"===this.type?"over_size":"over_number",clickid:"know"}),this.close()}},{key:"button",get:function(){return this.getProperty("button")}}]),n}(h.Vue);un([Object(h.Prop)({})],dn.prototype,"type",void 0),un([Object(h.Prop)({})],dn.prototype,"vipType",void 0);var pn,fn=dn=un([Object(h.Component)({name:"VipGuideDialog"})],dn),hn=Object(T.a)(fn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td-dialog",{attrs:{visible:e.visible,"custom-class":"xly-dialog-vip"},on:{"update:visible":function(t){e.visible=t},ok:function(t){e.visible=!1},close:e.close}},[n("div",{staticClass:"xly-dialog-vip__image"},[n("img",{attrs:{src:e.getProperty("img"),alt:e.getProperty("hint")}})]),e._v(" "),n("div",{staticClass:"xly-dialog-vip__text"},[n("p",{domProps:{innerHTML:e._s(e.getProperty("title"))}}),e._v(" "),e.getProperty("hint")?n("p",{staticClass:"xly-dialog-vip__note"},[e._v("\n      "+e._s(e.getProperty("hint"))+"\n    ")]):e._e()]),e._v(" "),n("td-button",{class:e.getProperty("buttonClass"),attrs:{slot:"footer",size:"large"},on:{click:function(t){return t.stopPropagation(),e.buttonClick(t)}},slot:"footer"},[e._v("\n    "+e._s(e.button)+"\n  ")])],1)}),[],!1,null,null,null).exports,vn=function(e){!function(e){pn=new hn({el:document.createElement("div"),propsData:Object.assign({},e)})}(e),document.body.appendChild(pn.$el),Gt.default.nextTick((function(){pn.show()}))};function yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var mn,bn=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},xn=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},gn=function(e){Object(c.a)(n,e);var t=yn(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"mounted",value:function(){this.$store.dispatch("local-upload/init"),this.$bus.$on("selectLocalFiles",this.selectLocalFiles)}},{key:"destroyed",value:function(){this.$store.dispatch("local-upload/finish")}},{key:"beforeDestroy",value:function(){this.$bus.$off("selectLocalFiles",this.selectLocalFiles)}},{key:"judgeUserType",value:function(){return xn(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})))}},{key:"checkFileRestriction",value:function(e,t){if(0===e)return!1;var n="";return this.vipType<x.VipType.platium?(e>100&&(n="exceedNumberLimit"),t>5368709120&&(n="exceedSizeLimit")):this.vipType===x.VipType.platium?(e>500&&(n="exceedNumberLimit"),t>21474836480&&(n="exceedSizeLimit")):this.vipType===x.VipType.superv&&(e>500&&(n="exceedNumberLimit"),t>128849018880&&(n="exceedSizeLimit")),!n||(this.$eventTrack("add_yunpan_limit_pop_show",{limit_type:"exceedSizeLimit"===n?"over_size":"over_number",vip_type:this.vipType}),vn({type:n,vipType:this.vipType}),!1)}},{key:"selectLocalFiles",value:function(e,source){return xn(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o,c,l,d,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(n=e.length)){t.next=3;break}return t.abrupt("return");case 3:if(r=0,o=0,e.forEach((function(e){var t=e.fileSize;r+=t,t>o&&(o=t)})),!(r>this.spaceRest)){t.next=9;break}return this.clientToast("空间不足"),t.abrupt("return");case 9:if(this.checkFileRestriction(n,o)){t.next=11;break}return t.abrupt("return");case 11:c=e.map((function(e){var path=e.filePath,t=e.fileSize,n=path.slice(path.lastIndexOf("\\")+1),r=n.slice(n.lastIndexOf(".")+1);return Object(on.eventTrack)("transmission_upload_yunpan_create",{from:source,file_type:Object(m.getFileExtension)(n),tab:"local-upload"}),{path:path,name:n,size:Number(t),type:Ht.default[r]||"other"}})),l=c.map((function(e){return{name:e.name,filePath:e.path,uploadType:"resume",type:e.type,size:Number(e.size),parentId:f.$store.state.drive.parentIdMap.drive,progress:0,createTime:Xt()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss"),completeTime:"",updateTime:Xt()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss"),uploadStatus:Yt.UploadEvent.add,version:"1",fileId:"",token:"",userId:f.userId,driveFileExist:"0"}})),d=l.length-1;case 14:if(!(d>-1)){t.next=20;break}return t.next=17,this.$store.dispatch("local-upload/add",l[d]);case 17:d--,t.next=14;break;case 20:this.$store.dispatch("local-upload/start");case 21:case"end":return t.stop()}}),t,this)})))}},{key:"clientToast",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"操作失败",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";this.$message({type:t,message:e})}},{key:"vipType",get:function(){return this.$store.getters["users/curVipType"]}},{key:"spaceMsg",get:function(){return this.$store.state.drive.spaceMsg}},{key:"userId",get:function(){return this.$store.state.users.curUser.userId}},{key:"totalSpace",get:function(){return this.$store.state.about.limit}},{key:"usedSpace",get:function(){return this.$store.state.about.usage}},{key:"spaceRest",get:function(){return this.totalSpace-this.usedSpace}}]),n}(h.Vue),kn=gn=bn([Object(h.Component)({})],gn),_n=Object(T.a)(kn,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null).exports,wn=(n(11),n(61),n(39),n(33),n(60),n(54)),On=n(176);function jn(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}Promise.resolve().then(n.t.bind(null,994,7)),Promise.resolve().then(n.t.bind(null,996,7)),Promise.resolve().then(n.t.bind(null,995,7)),n.e(23).then(n.t.bind(null,1100,7));var Pn=Object(h.Component)({name:"DragHint"})(mn=function(e){Object(c.a)(l,e);var t,n=Rn(l);function l(){var e;Object(r.a)(this,l);for(var t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return(e=n.call.apply(n,[this].concat(o))).visible=!1,e}return Object(o.a)(l,[{key:"mounted",value:function(){var e=this;document.addEventListener("dragenter",(function(t){t.preventDefault(),"Files"===t.dataTransfer.types[0]&&e.show()}))}},{key:"handleDrop",value:(t=Object(wn.a)(regeneratorRuntime.mark((function e(){var t,n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(event.preventDefault(),!(event.dataTransfer.files.length>0)){e.next=11;break}event.stopPropagation(),t=[],n=jn(event.dataTransfer.files);try{for(n.s();!(r=n.n()).done;)o=r.value,t.push(o.path)}catch(e){n.e(e)}finally{n.f()}return e.next=8,Object(On.getFileInfo)(t);case 8:(c=e.sent).includes(null)?this.$message.error("暂时不支持文件夹上传"):this.$bus.$emit("selectLocalFiles",c,"local_upload_drag"),this.hide();case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}}]),l}(h.Vue))||mn,Tn=Object(T.a)(Pn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("div",{staticClass:"xly-drag",on:{dragleave:function(t){return e.hide()},drop:e.handleDrop}},[e._m(0)]):e._e()}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"xly-drag__tips",staticStyle:{"pointer-events":"none"}},[t("p",[t("i",{staticClass:"xly-icon-drag"}),this._v("拖放文件添加到 我的云盘")])])}],!1,null,null,null).exports;function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var In=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},Dn=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},Sn=function(e){Object(c.a)(n,e);var t=$n(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"created",value:function(){return Dn(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isLogin){e.next=5;break}return e.next=3,this.$store.dispatch("checkPrivilege","preview");case 3:"ACCEPTED"===e.sent&&this.initData();case 5:case"end":return e.stop()}}),e,this)})))}},{key:"mounted",value:function(){this.$bus.$on("transferWindowEvent",this.showTransferWindow),this.$store.dispatch("url-task-list/initListener")}},{key:"beforeDestroy",value:function(){this.$bus.$off("transferWindowEvent",this.showTransferWindow),this.$store.dispatch("retrieval-list/clearListener"),this.$store.dispatch("url-task-list/clearListener")}},{key:"showTransferWindow",value:function(e){return Dn(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,Object(ut.getTransferWindow)();case 3:case"end":return t.stop()}}),t)})))}},{key:"initData",value:function(){return Dn(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.$store.dispatch("getAbout").then((function(){t.$bus.$emit("gotAbout")})),this.$store.dispatch("retrieval-list/init").catch((function(e){console.error("retrieval-list/init",e)})),this.$store.dispatch("url-task-list/getUrlTasks").catch((function(e){t.$message({message:"接口出现异常",type:"error",position:"middle",duration:2e3}),console.error(e)}));case 3:case"end":return e.stop()}}),e,this)})))}},{key:"isLogin",get:function(){return this.$store.getters["users/isLogin"]}}]),n}(h.Vue),Ln=Sn=In([Object(h.Component)({components:{DriveList:Ye,DriveContent:Ut,DriveBaseUpload:_n,DragHint:Tn}})],Sn),Fn=(n(1029),n(1030),Object(T.a)(Ln,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"xly-netdisk"},[t("DriveList"),this._v(" "),t("DriveContent"),this._v(" "),t("DriveBaseUpload"),this._v(" "),t("DragHint")],1)}),[],!1,null,null,null).exports),Mn=n(1095),En=n.n(Mn),zn=n(1096),Vn=n.n(zn);function Nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Wn=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},An=function(e){Object(c.a)(n,e);var t=Nn(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).list=Object.freeze([{key:0,img:En.a,title:"大到极致",text:"T级超大空间，可存上千部高清电影"},{key:1,img:Vn.a,title:"快到极致",text:"极速传输和云播，速度遥遥领先业界"}]),e.today=new Date,e}return Object(o.a)(n,[{key:"login",value:function(){_.client.callServerFunction("ShowLoginDlg","other",!0)}},{key:"lastMonday",get:function(){var e=this.today.getDay(),t=new Date(this.today.valueOf()-864e5*(6+e));return"".concat(t.getMonth()+1,"月").concat(t.getDate(),"日")}},{key:"nextSaturday",get:function(){var e=this.today.getDay(),t=new Date(this.today.valueOf()+864e5*(6-e));return"".concat(t.getMonth()+1,"月").concat(t.getDate(),"日")}}]),n}(h.Vue),Bn=An=Wn([Object(h.Component)({})],An),Un=(n(1097),Object(T.a)(Bn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"xly-netdisk-guide"},[n("td-carousel",{attrs:{"auto-play":!0,timeout:3e3}},e._l(e.list,(function(t){return n("td-carousel-item",{key:t.key},[n("img",{attrs:{src:t.img}}),e._v(" "),n("div",{staticClass:"xly-netdisk-guide__content"},[n("h2",[e._v(e._s(t.title))]),e._v(" "),n("p",[e._v(e._s(t.text))])])])})),1),e._v(" "),n("td-button",{attrs:{size:"large"},on:{click:e.login}},[e._v("\n    登录最高领取6T空间\n    "),n("span",{staticClass:"xly-netdisk-guide__sub"},[e._v("限时")])]),e._v(" "),n("p",{staticClass:"xly-netdisk-guide__text"},[e._v("\n    仅限"+e._s(e.lastMonday)+"-"+e._s(e.nextSaturday)+"期间登录用户\n    "),n("br"),e._v("名额有限，先到先得\n  ")])],1)}),[],!1,null,null,null).exports);function Yn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var Hn=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},qn=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},Xn=function(e){Object(c.a)(n,e);var t=Yn(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"mounted",value:function(){return qn(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie.a.checkRemoteFunction("ThunderPanPluginWebview","ShowToast");case 2:e.sent||ie.a.registerFunctions({ShowToast:this.showToast.bind(this)}),"/user/me/info",ie.a.attachServerEvent("SyncMessage-/user/me/info",(function(e,n){var r;do{if("string"!=typeof n||0===n.length)break;var o=Object(m.parseJson)(n);if("object"!==Object(f.a)(o)){console.log("wrong message of SyncMessage");break}switch(console.log("SyncMessage msgObj:"),console.log(o),o.type){case"vipinfo":if((null===(r=null==o?void 0:o.data)||void 0===r?void 0:r.userID)===t.$store.state.users.curUser.userId){var c=o.data.vipList.find((function(e){return"2"===e.vasid}));t.$store.commit("users/updateVipInfo",c),t.$store.dispatch("getAbout")}}}while(0)}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"showToast",value:function(e,t){this.$message(t)}},{key:"isLogin",get:function(){return this.$store.getters["users/isLogin"]}}]),n}(h.Vue),Gn=Xn=Hn([Object(h.Component)({components:{DrivePage:Fn,Unlogin:Un}})],Xn),Jn=Object(T.a)(Gn,(function(){var e=this.$createElement,t=this._self._c||e;return this.isLogin?t("DrivePage"):t("Unlogin")}),[],!1,null,null,null);t.default=Jn.exports},517:function(e,t,n){"use strict";n.r(t),n.d(t,"isVideoOrAudio",(function(){return d})),n.d(t,"isPicture",(function(){return f})),n.d(t,"isVideoOrPicture",(function(){return h})),n.d(t,"isVideo",(function(){return v}));n(38),n(44);var video="video",r="music",o="pic",c="doc",l="rar";function d(e){var t=y[e];return["video","music","mkv"].includes(t)}function f(e){var t=y[e];return["pic"].includes(t)}function h(e){var t=y[e];return["video","pic","mkv"].includes(t)}function v(e){var t=y[e];return["video","mkv"].includes(t)}var y={apk:"apk",avi:"avi",bt:"bt",chm:"chm",exe:"exe",flv:"flv",ipa:"ipa",ipsw:"ipsw",iso:"iso",mkv:video,mov:"mov",mp4:video,mpg:"mpg",rm:"rm",rmvb:video,wmv:"wmv",txt:"txt",pdf:"pdf",ppt:"ppt",pptx:"ppt",xls:"xls",xlsx:"xls",xv:video,xlmv:video,"3gp":video,"3gp2":video,"3gpp":video,"3gpp2":video,"3mm":video,"3p2":video,"60d":video,787:video,aaf:video,aep:video,aepx:video,aet:video,aetx:video,ajp:video,ale:video,amv:video,amx:video,arf:video,asf:video,ass:video,asx:video,avb:video,avd:video,avp:video,avs:video,axm:video,bdm:video,bdmv:video,bik:video,bix:video,bmk:video,bnp:video,box:video,bs4:video,bsf:video,byu:video,camproj:video,camrec:video,clpi:video,cmmp:video,cmmtpl:video,cmproj:video,cmrec:video,cpi:video,cst:video,cvc:video,d2v:video,d3v:video,dat:video,dav:video,dce:video,dck:video,ddat:video,dif:video,dir:video,divx:video,dlx:video,dmb:video,dmsm:video,dmsm3d:video,dmss:video,dnc:video,dpg:video,dream:video,dsy:video,dv:video,"dv-avi":video,dv4:video,dvdmedia:video,"dvr-ms":video,dvx:video,dxr:video,dzm:video,dzp:video,dzt:video,edl:video,evo:video,eye:video,f4p:video,f4v:video,fbr:video,fbz:video,fcp:video,flc:video,flh:video,fli:video,flx:video,gfp:video,gl:video,grasp:video,gts:video,gvi:video,gvp:video,hdmov:video,hkm:video,ifo:video,imovieproj:video,imovieproject:video,iva:video,ivf:video,ivr:video,ivs:video,izz:video,izzy:video,jts:video,jtv:video,k3g:video,lrec:video,lsf:video,lsx:video,m15:video,m1pg:video,m1v:video,m21:video,m2a:video,m2p:video,m2t:video,m2ts:video,m2v:video,m4e:video,m4u:video,m4v:video,m75:video,meta:video,mgv:video,mj2:video,mjp:video,mjpg:video,mmv:video,mnv:video,mod:video,modd:video,moff:video,moi:video,moov:video,movie:video,mp21:video,mp2v:video,mp4v:video,mpe:video,mpeg:video,mpeg4:video,mpf:video,mpg2:video,mpgindex:video,mpl:video,mpls:video,mpsub:video,mpv:video,mpv2:video,mqv:video,msdvd:video,msh:video,mswmm:video,mts:video,mtv:video,mvb:video,mvc:video,mvd:video,mve:video,mvp:video,mvy:video,mxf:video,mys:video,ncor:video,nsv:video,nuv:video,nvc:video,ogm:video,ogv:video,ogx:video,osp:video,par:video,pds:video,pgi:video,piv:video,pjs:video,playlist:video,pmf:video,pns:video,ppj:video,prel:video,pro:video,prproj:video,prtl:video,psb:video,psh:video,pssd:video,pva:video,pvr:video,pxv:video,qt:video,qtch:video,qtl:video,qtm:video,qtz:video,r3d:video,rcproject:video,rdb:video,rec:video,rmd:video,rmp:video,rms:video,roq:video,rts:video,rum:video,rv:video,sbk:video,sbt:video,scc:video,scm:video,scn:video,screenflow:video,sec:video,seq:video,sfd:video,sfvidcap:video,smi:video,smil:video,smk:video,sml:video,smv:video,spl:video,srt:video,ssa:video,ssm:video,stl:video,str:video,stx:video,sub:video,svi:video,swf:video,swi:video,swt:video,tda3mt:video,tivo:video,tix:video,tod:video,tp:video,tp0:video,tpd:video,tpr:video,trp:video,ts:video,tts:video,tvs:video,vc1:video,vcpf:video,vcr:video,vcv:video,vdo:video,vdr:video,veg:video,vem:video,vf:video,vfw:video,vfz:video,vgz:video,vid:video,viewlet:video,viv:video,vivo:video,vlab:video,vob:video,vp3:video,vp6:video,vp7:video,vpj:video,vro:video,vs4:video,vse:video,vsp:video,w32:video,wcp:video,webm:video,wlmp:video,wm:video,wmd:video,wmmp:video,wmx:video,wp3:video,wpl:video,wtv:video,wvx:video,xfl:video,xvid:video,yuv:video,zm1:video,zm2:video,zm3:video,zmv:video,aiff:r,cue:r,m3u:r,au:r,cdda:r,wav:r,flac:r,tak:r,mp3:r,aac:r,wma:r,m4a:r,mid:r,mka:r,mp2:r,mpa:r,mpc:r,ape:r,ofr:r,ogg:r,ra:r,wv:r,tta:r,ac3:r,dts:r,nsf:r,s3m:r,xm:r,it:r,vst:r,psd:o,tga:o,gif:o,jpeg:o,jpg:o,jp2:o,bmp:o,ico:o,pcx:o,png:o,pbm:o,pgm:o,ppm:o,pnm:o,pgf:o,arw:o,cr2:o,crw:o,dcr:o,dng:o,erf:o,kdc:o,mef:o,mos:o,mrw:o,nef:o,nrw:o,orf:o,pef:o,ptx:o,raf:o,raw:o,rw2:o,srf:o,srw:o,x3f:o,ras:o,tiff:o,tif:o,wbmp:o,ilbm:o,lbm:o,iff:o,html:"web",htm:"web",shtml:"web",xhtml:"web",hlp:c,inf:c,rtf:c,tex:c,ltx:c,doc:c,docx:c,wps:c,odf:c,docm:c,dot:c,dotm:c,dotx:c,email:c,rp:c,pps:c,et:c,ett:c,xlt:c,dbf:c,prn:c,csv:c,mht:c,mhtml:c,xml:c,wpt:c,dps:c,dpt:c,pot:c,ppsx:c,epub:c,mobi:c,lit:c,wdl:c,ceb:c,abm:c,pdg:c,umb:c,ibooks:c,zip:l,zipx:l,rar:l,"7z":l,isz:l,cab:l,arj:l,ace:l,alz:l,uue:l,tar:l,gz:l,gzip:l,tgz:l,tpz:l,bzip2:l,bz2:l,bz:l,tbz:l,tbz2:l,xz:l,txz:l,lzh:l,lha:l,zt:l,az:l,xpi:l,jar:l,wim:l,swm:l,rpm:l,xar:l,deb:l,dmg:l,hfs:l,cpio:l,lzma:l,lzma86:l,split:l,torrent:"bt"};t.default=y},522:function(e,t,n){"use strict";n.r(t),n.d(t,"createDirectoryError",(function(){return r}));var r={file_duplicated_name:"文件名重复，请重试～"}},523:function(e,t,n){"use strict";n.r(t),n.d(t,"existsAW",(function(){return k})),n.d(t,"mkdirAW",(function(){return _})),n.d(t,"mkdirsAW",(function(){return w})),n.d(t,"getThunderTempPath",(function(){return O}));n(10),n(1);var r=n(53),o=n.n(r),c=n(1015),l=n.n(c),d=n(46),f=n.n(d),h=n(89),v=n.n(h),y=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},m=l.a.getLogger("Thunder.base.fs-utilities"),x=f.a.promisify;function k(e){return y(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,void 0===e){t.next=12;break}return r=x(v.a.access),t.prev=3,t.next=6,r(e);case 6:n=!0,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),m.information(t.t0);case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})))}function _(e){return y(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,void 0===e){t.next=12;break}return r=x(v.a.mkdir),t.prev=3,t.next=6,r(e);case 6:n=!0,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),m.warning(t.t0);case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,null,[[3,9]])})))}function w(e){return y(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=!1,m.information("mkdirsAW",e),void 0===e){t.next=19;break}return t.next=5,k(e);case 5:if(!t.sent){t.next=9;break}n=!0,t.next=19;break;case 9:if(o.a.dirname(e)!==e){t.next=13;break}n=!1,t.next=19;break;case 13:return t.next=15,w(o.a.dirname(e));case 15:if(!t.sent){t.next=19;break}return t.next=18,_(e);case 18:n=t.sent;case 19:return t.abrupt("return",n);case 20:case"end":return t.stop()}}),t)})))}function O(e,t){return y(this,void 0,void 0,regeneratorRuntime.mark((function r(){var c,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.resolve().then(n.t.bind(null,526,7));case 2:if(c=r.sent,l=o.a.join(c.tmpdir(),"Thunder Network\\Thunder7.9\\"),t&&(l=o.a.join(l,t)),void 0===e||!e){r.next=8;break}return r.next=8,w(l);case 8:return r.abrupt("return",l);case 9:case"end":return r.stop()}}),r)})))}},983:function(e,t,n){var content=n(987);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("4421b217",content,!0,{sourceMap:!1})},986:function(e,t,n){"use strict";var r=n(983);n.n(r).a},987:function(e,t,n){(t=n(78)(!1)).push([e.i,".td-dialog .td-dialog__close:hover{background-color:#ff7b5f}.td-dialog h2{color:#1a1a1a}.td-dialog .xly-dialog__footer{position:relative;display:flex;justify-content:flex-end;width:100%}.td-dialog .xly-dialog__footer .xly-dialog-path__new{width:90px}.td-dialog .xly-dialog__footer-operate{position:absolute;left:0;display:flex;align-items:center;height:30px}.td-dialog .xly-dialog__footer-link{color:var(--color-primary)}.td-dialog .xly-dialog__button{display:flex}.td-dialog .xly-dialog__button .td-button{width:80px}.xly-dialog-site{margin-top:28px}.xly-dialog-site .td-select{margin-top:12px}.xly-dialog-site .td-select.is-checked .td-select-group{border-color:var(--color-primary)}.xly-dialog-site .td-select.is-checked .xly-select__file{color:var(--color-primary)}.xly-dialog-site .td-select.is-checked .xly-select__file:hover{color:var(--color-hover)}.xly-dialog-site .td-select .td-checkbox{margin-left:12px}.xly-dialog-site .td-select .td-checkbox__label{margin:0 12px;color:var(--color-primary)}.xly-dialog-site .td-select .td-select__drop{margin-right:34px}.xly-dialog-site .xly-select__file{position:absolute;right:8px;color:var(--color-primary)}.xly-dialog-site .xly-select__size{margin-right:10px;color:var(--color-secondary)}.xly-dialog-site .xly-select__size.is-warn{color:#ff9700}.xly-dialog-site .xly-select__size.is-danger{color:var(--color-danger)}.xly-dialog-site .xly-select__link{position:absolute;top:2px;left:80px;width:calc(100% - 110px);line-height:26px;text-indent:5px;color:var(--color-primary);background:#fff}.xly-dialog-site .td-input__inner{padding:6px 10px}.xly-dialog-site__checkbox{margin:12px 0 0}",""]),e.exports=t},988:function(e,t,n){var content=n(1010);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("28c488d2",content,!0,{sourceMap:!1})},989:function(e,t,n){var content=n(1012);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("47d474a5",content,!0,{sourceMap:!1})},991:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(1);var r=n(0);function o(e){var t,n=r.default.extend(e),o=function(e,o,c){!function(e){t=new n({el:document.createElement("div"),propsData:Object.assign({},e)})}(e),t.resolve=o,t.reject=c,document.body.appendChild(t.$el),r.default.nextTick((function(){t.show()}))};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){o(e,t,n)}))}}},992:function(e,t,n){"use strict";n(7),n(8),n(1),n(32);var r=n(146),o=n(149),c=n(212),l=n(213),d=n(148),f=n(88),h=n(365);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(d.a)(e);if(t){var o=Object(d.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var y=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(f.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},m=function(e){Object(c.a)(n,e);var t=v(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).visible=!1,e}return Object(o.a)(n,[{key:"show",value:function(){this.visible=!0}},{key:"emit",value:function(){this.visible=!1,this.$destroy(),this.resolve()}},{key:"close",value:function(){this.visible=!1,this.$destroy(),this.reject()}}]),n}(h.Vue);y([Object(h.Prop)({})],m.prototype,"resolve",void 0),y([Object(h.Prop)({})],m.prototype,"reject",void 0),y([Object(h.Prop)({})],m.prototype,"content",void 0),y([Object(h.Prop)({})],m.prototype,"title",void 0),y([Object(h.Prop)({default:"确定"})],m.prototype,"confirmText",void 0);var x=m=y([Object(h.Component)({})],m),k=n(147),component=Object(k.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td-dialog",{attrs:{"custom-class":"xly-dialog-prompt",visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:e.close}},[n("h2",{attrs:{slot:"header"},slot:"header"},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),n("p",{staticClass:"xly-dialog-prompt__text"},[e._v("\n    "+e._s(e.content)+"\n  ")]),e._v(" "),n("div",{staticClass:"xly-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"xly-dialog__button"},[n("td-button",{on:{click:e.emit}},[e._v("\n        "+e._s(e.confirmText)+"\n      ")]),e._v(" "),n("td-button",{staticClass:"td-button--other",on:{click:e.close}},[e._v("\n        取消\n      ")])],1)])])}),[],!1,null,null,null);t.a=component.exports},994:function(e,t,n){var content=n(1e3);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("014d4508",content,!0,{sourceMap:!1})},995:function(e,t,n){var content=n(1001);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("59a38204",content,!0,{sourceMap:!1})},996:function(e,t,n){var content=n(1002);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("19d22f20",content,!0,{sourceMap:!1})},997:function(e,t,n){var content=n(1003);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("4c53d628",content,!0,{sourceMap:!1})},999:function(e,t,n){"use strict";n(1);var r=n(0),o=(n(7),n(8),n(32),n(16),n(10),n(146)),c=n(149),l=n(212),d=n(213),f=n(148),h=n(88),v=n(365),y=n(6),m=n(985),x=n(9),k=n(3);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var w=function(e,t,n,desc){var r,o=arguments.length,c=o<3?t:null===desc?desc=Object.getOwnPropertyDescriptor(t,n):desc;if("object"===("undefined"==typeof Reflect?"undefined":Object(h.a)(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,n,desc);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(o<3?r(c):o>3?r(t,n,c):r(t,n))||c);return o>3&&c&&Object.defineProperty(t,n,c),c},O=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},j=function(e){Object(l.a)(n,e);var t=_(n);function n(){var e;return Object(o.a)(this,n),(e=t.apply(this,arguments)).visible=!1,e.selectVueTreeNode=null,e.visibleCreateOrRenameDialog=!1,e}return Object(c.a)(n,[{key:"show",value:function(){this.visible=!0}},{key:"emit",value:function(){this.visible=!1,this.$destroy(),this.resolve(this.selectVueTreeNode)}},{key:"handleCreateDirectory",value:function(){this.callerInstance.$eventTrack("yunpan_move_copy_pop_click",{type:this.moveOrCopy,clickid:"new_floder"});var e=this.$refs.tree;e&&e.chosenNode&&(e.chosenNode.mode="create")}},{key:"mounted",value:function(){var e=this.$refs.tree,t=e.$children;e.chosenNode=t[0],this.handleChangeChosenNode(e.chosenNode)}},{key:"handleChangeChosenNode",value:function(e){this.selectVueTreeNode=e}},{key:"handleConfirmCreateDirectory",value:function(e){var t=e.chosenNode,content=e.content;return O(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.callerInstance.$store.dispatch("drive/addFolderWithParentId",{name:content,parentId:t.node.id});case 3:(n=e.sent).file&&this.$nextTick((function(){var e=Object.assign(Object.assign({},n.file),{leaf:!0,__order:-t.node.children.length,__level:t.node.__level+1,title:n.file.name,icon:n.file.icon_link});t.node.children.push(e),t.node.children.sort((function(a,b){return a.__order-b.__order})),o.$nextTick((function(){var t=o.findVueInstanceNodeById(e.id);o.handleChangeChosenNode(t),o.$refs.tree.chosenNode=t}))})),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r=Object(x.safeJSONParse)(e.t0.message),k.a.callRemoteClientFunction("ThunderPanPluginWebview","ShowToast",{message:r.error_description,type:"error",position:"middle",duration:2e3});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"loadFunction",value:function(e){var t;return O(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(y.k)(e.id);case 3:return r=n.sent,(null===(t=null==r?void 0:r.files)||void 0===t?void 0:t.length)||(e.leaf=!0),(data=r.files).forEach((function(e,t){e.__order=t,e.title=e.name,e.icon=e.icon_link,e.leaf="drive#file"===e.kind})),n.abrupt("return",data);case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:return n.abrupt("return",[]);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})))}},{key:"bindingKeyGenerator",value:function(e){return e.id}},{key:"close",value:function(){this.visible=!1,this.$destroy(),this.reject()}},{key:"findVueInstanceNodeById",value:function(e){for(var t=[this.$refs.tree];t.length>0;)for(var n=t.shift(),i=0;i<n.$children.length;i++){var r=n.$children[i];if(r.node){if(r.node.id===e)return r;t.push(r)}}}}]),n}(v.Vue);w([Object(v.Prop)({})],j.prototype,"resolve",void 0),w([Object(v.Prop)({})],j.prototype,"reject",void 0),w([Object(v.Prop)({})],j.prototype,"data",void 0),w([Object(v.Prop)({})],j.prototype,"callerInstance",void 0),w([Object(v.Prop)({})],j.prototype,"disableFunction",void 0),w([Object(v.Prop)({})],j.prototype,"disableClass",void 0),w([Object(v.Prop)({})],j.prototype,"moveOrCopy",void 0),w([Object(m.a)({time:10})],j.prototype,"handleConfirmCreateDirectory",null);var C,R=j=w([Object(v.Component)({})],j),P=(n(986),n(1009),n(1011),n(147)),T=Object(P.a)(R,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td-dialog",{attrs:{"custom-class":"xly-dialog-path",visible:e.visible},on:{"update:visible":function(t){e.visible=t},ok:function(t){e.visible=!1},close:e.close}},[n("h2",{attrs:{slot:"header"},slot:"header"},[e._v("\n    选择云盘保存路径\n  ")]),e._v(" "),n("div",{staticClass:"xly-dialog-path__content"},[n("td-tree-plus",{ref:"tree",attrs:{data:e.data,"level-padding":20,lazy:!0,load:e.loadFunction,"binding-key-generator":e.bindingKeyGenerator,"disable-function":e.disableFunction,"disable-class":e.disableClass,"default-placeholder":"新建文件夹"},on:{changeChosenNode:e.handleChangeChosenNode,create:e.handleConfirmCreateDirectory}})],1),e._v(" "),n("div",{staticClass:"xly-dialog__footer",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"xly-dialog__footer-operate"},[n("td-button",{staticClass:"td-button--other xly-dialog-path__new",on:{click:e.handleCreateDirectory}},[e._v("\n        新建文件夹\n      ")])],1),e._v(" "),n("div",{staticClass:"xly-dialog__button"},[n("td-button",{on:{click:e.emit}},[e._v("\n        确定\n      ")]),e._v(" "),n("td-button",{staticClass:"td-button--other",on:{click:e.close}},[e._v("\n        取消\n      ")])],1)])])}),[],!1,null,null,null).exports,$=r.default.extend(T),I=function(e,t,n){!function(e){C=new $({el:document.createElement("div"),propsData:Object.assign({},e.props)})}(e),C.resolve=t,C.reject=n,document.body.appendChild(C.$el),r.default.nextTick((function(){C.show()}))};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){I(e,t,n)}))}}}]);