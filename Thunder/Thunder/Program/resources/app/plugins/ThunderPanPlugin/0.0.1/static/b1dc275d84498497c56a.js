(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{100:function(e,t,n){"use strict";n.r(t),n.d(t,"cancelPostUpload",(function(){return h})),n.d(t,"postUpload",(function(){return f})),n.d(t,"prepareData",(function(){return d})),n.d(t,"axiosCancelToken",(function(){return l}));n(11),n(28),n(1);var r=n(89),o=n(43),c=n.n(o),l={};function d(e){return new Promise((function(t,n){r.readFile(e,(function(e,r){e&&n(e),t(new Blob([r]))}))}))}function f(e){var t=e.url,n=e.params,r=e.timeout,o=e.axiosProgress,d=e.id;return new Promise((function(e,f){var h=new FormData;n&&Object.keys(n).forEach((function(e){h.append(e,n[e])}));var source=c.a.CancelToken.source();return l[d]=source,c.a.post(t,h,{headers:{"Content-Type":"multipart/form-data"},timeout:r,onUploadProgress:o,cancelToken:source.token}).then((function(t){delete l[d],e(t)})).catch((function(e){delete l[d],f(e)}))}))}function h(e,t){l[e.id].cancel(t),delete l[e.id]}window.axiosCancelToken=l},123:function(e,t,n){"use strict";var r,o,c,l,d,f,h,v,m,x,k,y,w,T,_,R,S,O,E,C;n.r(t),n.d(t,"TaskError",(function(){return r})),n.d(t,"DcdnStatusCode",(function(){return o})),n.d(t,"TaskStatus",(function(){return c})),n.d(t,"BtFileStatus",(function(){return l})),n.d(t,"DispatchStrategy",(function(){return d})),n.d(t,"TaskType",(function(){return f})),n.d(t,"CategroyViewID",(function(){return h})),n.d(t,"TaskEventType",(function(){return v})),n.d(t,"TaskAttribute",(function(){return m})),n.d(t,"TaskDetailChangedFlags",(function(){return x})),n.d(t,"BtSubFileDetailChangedFlags",(function(){return k})),n.d(t,"GroupTaskSubFileDetailChangedFlags",(function(){return y})),n.d(t,"BtFileAttribute",(function(){return w})),n.d(t,"KeyType",(function(){return T})),n.d(t,"SearchKeyType",(function(){return _})),n.d(t,"FilterKeyType",(function(){return R})),n.d(t,"KeyFilter",(function(){return S})),n.d(t,"TaskInsertReason",(function(){return O})),n.d(t,"TaskStopReason",(function(){return E})),n.d(t,"XLResourceFrom",(function(){return C})),function(e){e[e.Unkown=0]="Unkown",e[e.Create=1]="Create",e[e.InvaldParam=2]="InvaldParam",e[e.InvaldLink=3]="InvaldLink",e[e.InvaldConfig=4]="InvaldConfig",e[e.Timeout=5]="Timeout",e[e.VerifyData=6]="VerifyData",e[e.Forbidden=7]="Forbidden",e[e.RangeDispatch=8]="RangeDispatch",e[e.FilePathOverRanging=9]="FilePathOverRanging",e[e.FileCreate=201]="FileCreate",e[e.FileWrite=202]="FileWrite",e[e.FileRead=203]="FileRead",e[e.FileRename=204]="FileRename",e[e.FileFull=205]="FileFull",e[e.FileOccupied=211]="FileOccupied",e[e.FileAccessDenied=212]="FileAccessDenied",e[e.BtUploadExist=601]="BtUploadExist",e[e.ForbinddenResource=701]="ForbinddenResource",e[e.ForbinddenAccount=702]="ForbinddenAccount",e[e.ForbinddenArea=703]="ForbinddenArea",e[e.ForbinddenCopyright=704]="ForbinddenCopyright",e[e.ForbinddenReaction=705]="ForbinddenReaction",e[e.ForbinddenPorn=706]="ForbinddenPorn",e[e.DownloadSDKCrash=10001]="DownloadSDKCrash",e[e.torrentFileNotExist=10002]="torrentFileNotExist"}(r||(r={})),function(e){e[e.Unkown=-1]="Unkown",e[e.Success=0]="Success",e[e.QueryFailed=1]="QueryFailed",e[e.ServerError=2]="ServerError",e[e.ResourceNotFound=3]="ResourceNotFound",e[e.AuthorizingFailed=4]="AuthorizingFailed",e[e.ForbidByCopyright=5]="ForbidByCopyright",e[e.ForbidByPorNoGraphy=6]="ForbidByPorNoGraphy",e[e.ForbidByReactionary=7]="ForbidByReactionary",e[e.ForbidByOtherFilter=8]="ForbidByOtherFilter"}(o||(o={})),function(e){e[e.Begin=-1]="Begin",e[e.Unkown=0]="Unkown",e[e.StandBy=1]="StandBy",e[e.PreDownloading=2]="PreDownloading",e[e.StartWaiting=3]="StartWaiting",e[e.StartPending=4]="StartPending",e[e.Started=5]="Started",e[e.StopPending=6]="StopPending",e[e.Stopped=7]="Stopped",e[e.Succeeded=8]="Succeeded",e[e.Failed=9]="Failed",e[e.Seeding=10]="Seeding",e[e.DestroyPending=11]="DestroyPending",e[e.End=12]="End"}(c||(c={})),function(e){e[e.Begin=-1]="Begin",e[e.StandBy=0]="StandBy",e[e.Stopped=1]="Stopped",e[e.Started=2]="Started",e[e.Complete=3]="Complete",e[e.Forbidden=4]="Forbidden",e[e.Error=5]="Error",e[e.End=6]="End"}(l||(l={})),function(e){e[e.DispatchStrategyNone=0]="DispatchStrategyNone",e[e.DispatchStrategyOrigin=1]="DispatchStrategyOrigin",e[e.DispatchStrategyP2s=2]="DispatchStrategyP2s",e[e.DispatchStrategyP2p=4]="DispatchStrategyP2p",e[e.DispatchStrategyAll=-1]="DispatchStrategyAll"}(d||(d={})),function(e){e[e.Unkown=0]="Unkown",e[e.P2sp=1]="P2sp",e[e.Bt=2]="Bt",e[e.Emule=3]="Emule",e[e.Group=4]="Group",e[e.Magnet=5]="Magnet"}(f||(f={})),function(e){e.Unkown="Unkown",e.Downloading="Downloading",e.Completed="Completed",e.Recycle="Recycle"}(h||(h={})),function(e){e[e.Unknow=0]="Unknow",e[e.TaskCreated=1]="TaskCreated",e[e.InsertToCategoryView=2]="InsertToCategoryView",e[e.RemoveFromCategoryView=3]="RemoveFromCategoryView",e[e.StatusChanged=4]="StatusChanged",e[e.DetailChanged=5]="DetailChanged",e[e.ChannelInfoChanged=6]="ChannelInfoChanged",e[e.DcdnStatusChanged=7]="DcdnStatusChanged",e[e.TaskDescriptionChanged=8]="TaskDescriptionChanged",e[e.TaskUserRead=9]="TaskUserRead",e[e.TaskRenamed=10]="TaskRenamed",e[e.TaskMovedEnd=11]="TaskMovedEnd",e[e.TaskMovingStateChange=12]="TaskMovingStateChange",e[e.BtSubFileDetailChanged=13]="BtSubFileDetailChanged",e[e.BtSubFileLoaded=14]="BtSubFileLoaded",e[e.BtSubFileForbidden=15]="BtSubFileForbidden",e[e.BtSubFileDcdnStatusChanged=16]="BtSubFileDcdnStatusChanged",e[e.TaskCategoryMovedEnd=17]="TaskCategoryMovedEnd",e[e.GroupTaskSubFileDetailChanged=18]="GroupTaskSubFileDetailChanged",e[e.TaskDestroying=19]="TaskDestroying",e[e.TaskDestroyed=20]="TaskDestroyed"}(v||(v={})),function(e){e[e.NumberStrart=0]="NumberStrart",e[e.TaskId=1]="TaskId",e[e.VirtualId=2]="VirtualId",e[e.SrcTotal=3]="SrcTotal",e[e.SrcUsing=4]="SrcUsing",e[e.FileSize=5]="FileSize",e[e.ReceivedSize=6]="ReceivedSize",e[e.DownloadSize=7]="DownloadSize",e[e.TotalDownloadSize=8]="TotalDownloadSize",e[e.CreateTime=9]="CreateTime",e[e.CompletionTime=10]="CompletionTime",e[e.DownloadingPeriod=11]="DownloadingPeriod",e[e.Progress=12]="Progress",e[e.RecycleTime=13]="RecycleTime",e[e.FileCreated=14]="FileCreated",e[e.Forbidden=15]="Forbidden",e[e.CategoryId=16]="CategoryId",e[e.UserRead=17]="UserRead",e[e.OpenOnComplete=18]="OpenOnComplete",e[e.GroupTaskId=19]="GroupTaskId",e[e.DownloadSubTask=20]="DownloadSubTask",e[e.NameType=21]="NameType",e[e.OwnerProduct=22]="OwnerProduct",e[e.FileIndex=23]="FileIndex",e[e.NameFixed=24]="NameFixed",e[e.ValidDownloadSize=25]="ValidDownloadSize",e[e.RealDownloadSize=26]="RealDownloadSize",e[e.ResourceLegal=27]="ResourceLegal",e[e.TaskType=28]="TaskType",e[e.ErrorCode=29]="ErrorCode",e[e.PlayPosition=30]="PlayPosition",e[e.Duration=31]="Duration",e[e.NumberEnd=32]="NumberEnd",e[e.BooleanStart=4096]="BooleanStart",e[e.Destroyed=4097]="Destroyed",e[e.Background=4098]="Background",e[e.Moving=4099]="Moving",e[e.BooleanEnd=4100]="BooleanEnd",e[e.StringStart=8192]="StringStart",e[e.TaskName=8193]="TaskName",e[e.SavePath=8194]="SavePath",e[e.RelativePath=8195]="RelativePath",e[e.TaskUrl=8196]="TaskUrl",e[e.RefUrl=8197]="RefUrl",e[e.Cid=8198]="Cid",e[e.Gcid=8199]="Gcid",e[e.Cookie=8200]="Cookie",e[e.ProductInfo=8201]="ProductInfo",e[e.Origin=8202]="Origin",e[e.Description=8203]="Description",e[e.UserData=8204]="UserData",e[e.OriginName=8205]="OriginName",e[e.HTTPContentType=8206]="HTTPContentType",e[e.CategoryViewId=8207]="CategoryViewId",e[e.YunTaskId=8208]="YunTaskId",e[e.StringEnd=8209]="StringEnd",e[e.ObjectStart=12288]="ObjectStart",e[e.ObjectEnd=12289]="ObjectEnd"}(m||(m={})),function(e){e[e.UnKnown=0]="UnKnown",e[e.SrcTotal=1]="SrcTotal",e[e.SrcUsing=2]="SrcUsing",e[e.FileSize=4]="FileSize",e[e.ReceivedSize=8]="ReceivedSize",e[e.DownloadSize=16]="DownloadSize",e[e.CompletionTime=32]="CompletionTime",e[e.DownloadingPeriod=64]="DownloadingPeriod",e[e.Progress=128]="Progress",e[e.RecycleTime=256]="RecycleTime",e[e.FileCreated=512]="FileCreated",e[e.Forbidden=1024]="Forbidden",e[e.UserRead=2048]="UserRead",e[e.OpenOnComplete=4096]="OpenOnComplete",e[e.DownloadSubTask=8192]="DownloadSubTask",e[e.TaskName=16384]="TaskName",e[e.SavePath=32768]="SavePath",e[e.Cid=65536]="Cid",e[e.Gcid=131072]="Gcid",e[e.UserData=262144]="UserData",e[e.CategoryViewId=524288]="CategoryViewId",e[e.ErrorCode=1048576]="ErrorCode",e[e.TaskSpeed=2097152]="TaskSpeed",e[e.ChannelInfo=4194304]="ChannelInfo",e[e.ValidDownloadSize=8388608]="ValidDownloadSize",e[e.OriginName=16777216]="OriginName",e[e.HTTPContentType=33554432]="HTTPContentType",e[e.PlayPosition=67108864]="PlayPosition",e[e.Duration=134217728]="Duration",e[e.YunTaskId=268435456]="YunTaskId"}(x||(x={})),function(e){e[e.UnKnown=0]="UnKnown"}(k||(k={})),function(e){e[e.UnKnown=0]="UnKnown"}(y||(y={})),function(e){e[e.NumberStrart=0]="NumberStrart",e[e.TaskId=1]="TaskId",e[e.FileStatus=2]="FileStatus",e[e.DownloadSize=3]="DownloadSize",e[e.FileSize=4]="FileSize",e[e.EnableDcdn=5]="EnableDcdn",e[e.ErrorCode=6]="ErrorCode",e[e.DcdnStatus=7]="DcdnStatus",e[e.RealIndex=8]="RealIndex",e[e.FileOffset=9]="FileOffset",e[e.Visible=10]="Visible",e[e.Download=11]="Download",e[e.NumberEnd=12]="NumberEnd",e[e.StringStart=4096]="StringStart",e[e.FinalName=4097]="FinalName",e[e.RelativePath=4098]="RelativePath",e[e.FileName=4099]="FileName",e[e.FilePath=4100]="FilePath",e[e.Cid=4101]="Cid",e[e.Gcid=4102]="Gcid",e[e.UserRead=4103]="UserRead",e[e.PlayPosition=4104]="PlayPosition",e[e.Duration=4105]="Duration",e[e.StringEnd=4106]="StringEnd"}(w||(w={})),function(e){e[e.P2spUrl=0]="P2spUrl",e[e.BtInfoId=1]="BtInfoId",e[e.EmuleFileHash=2]="EmuleFileHash",e[e.MagnetUrl=3]="MagnetUrl",e[e.GroupTaskName=4]="GroupTaskName"}(T||(T={})),function(e){e[e.NameInclude=1]="NameInclude",e[e.BtDisplayNameInclude=2]="BtDisplayNameInclude"}(_||(_={})),function(e){e[e.ExtEqual=1]="ExtEqual",e[e.NameLikeAndExtEqual=2]="NameLikeAndExtEqual",e[e.TaskTypeEqual=4]="TaskTypeEqual"}(R||(R={})),function(e){e[e.All=0]="All",e[e.CommonForeground=1]="CommonForeground",e[e.CommonBackground=2]="CommonBackground",e[e.Temporary=3]="Temporary",e[e.PreDownload=4]="PreDownload",e[e.PrivateForeground=5]="PrivateForeground"}(S||(S={})),function(e){e[e.Unknown=-1]="Unknown",e[e.LoadTaskBasic=0]="LoadTaskBasic",e[e.Create=1]="Create",e[e.Recycle=2]="Recycle",e[e.Recover=3]="Recover",e[e.ReDownload=4]="ReDownload",e[e.MoveThoughCategory=5]="MoveThoughCategory"}(O||(O={})),function(e){e[e.Unknown=-1]="Unknown",e[e.ContextMenu=0]="ContextMenu",e[e.Button=1]="Button",e[e.TaskDetail=2]="TaskDetail",e[e.DownloadMagnet=3]="DownloadMagnet",e[e.ToolbarButton=4]="ToolbarButton",e[e.SelectDownloadLists=5]="SelectDownloadLists",e[e.DeleteTask=6]="DeleteTask",e[e.MoveTask=7]="MoveTask",e[e.TaskJammed=8]="TaskJammed",e[e.LowSpeed=9]="LowSpeed",e[e.MaxDownloadReduce=10]="MaxDownloadReduce",e[e.PauseAll=11]="PauseAll",e[e.Shoulei=12]="Shoulei"}(E||(E={})),function(e){e[e.RESOURCE_FROM_MEMBER=1]="RESOURCE_FROM_MEMBER",e[e.RESOURCE_FROM_OFFLINE=2]="RESOURCE_FROM_OFFLINE",e[e.RESOURCE_FROM_CRYSTAL_LARGE=4]="RESOURCE_FROM_CRYSTAL_LARGE",e[e.RESOURCE_FROM_CRYSTAL_SMALL=8]="RESOURCE_FROM_CRYSTAL_SMALL",e[e.RESOURCE_FROM_DCDN=16]="RESOURCE_FROM_DCDN",e[e.RESOURCE_FROM_FREEDCDN=32]="RESOURCE_FROM_FREEDCDN"}(C||(C={}))},14:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"UploadEvent",(function(){return r})),function(e){e.add="add",e.prepare="prepare",e.uploading="uploading",e.pending="pending",e.pause="pause",e.resume="resume",e.complete="complete",e.fail="fail",e.cancel="cancel",e.token="token"}(r||(r={}))},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(10),n(1);var r=n(12),o=n(65),c=n(25),l=n(75),d=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},f=o.xlUserApis[l.a.driveAPI],h=null;t.b=function(e){return d(this,void 0,void 0,regeneratorRuntime.mark((function t(){var l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.client.callServerFunction("GetLoginDeviceID");case 3:return l=t.sent,h=new(0,n(631).default)(f,o.default.clientId,r.client.callRemoteClientFunction.bind(r.client,"User","Request"),l),t.next=7,Object(c.getCaptchaToken)(!0);case 7:e.store.commit("setDeviceId",localStorage.getItem("captcha_device_id")),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))}},176:function(e,t,n){"use strict";n.r(t),n.d(t,"selectLocalFiles",(function(){return x})),n.d(t,"CaclGcid",(function(){return k})),n.d(t,"getFileInfo",(function(){return y}));n(10),n(1);var r=n(109),o=n.n(r),c=n(89),l=n(46),d=n(53),f=n.n(d),h=n(5),v=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},m=Object(l.promisify)(c.lstat);function x(){var e=this;return new Promise((function(t){return v(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n,dialog,r,c,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.getCurrentWindow().__resolve();case 3:return n=e.sent,e.next=6,o.a.electron.dialog.__resolve();case 6:return dialog=e.sent,e.next=9,o.a.electron.app.__resolve();case 9:return r=e.sent,e.next=12,Object(h.getConfig)("ThunderPanPlugin","lastUploadDirectory","");case 12:if(c=e.sent,e.t0=dialog,e.t1=n,e.t2=c,e.t2){e.next=20;break}return e.next=19,r.getPath("documents");case 19:e.t2=e.sent;case 20:e.t3=e.t2,e.t4=["openFile","multiSelections"],e.t5={title:"选择文件",buttonLabel:"上传云盘",defaultPath:e.t3,properties:e.t4},e.t6=function(e){return v(l,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=16;break}return r=f.a.dirname(e[0]),n.next=4,Object(h.setConfig)("ThunderPanPlugin","lastUploadDirectory",r);case 4:return n.prev=4,n.next=7,y(e);case 7:o=n.sent,t([null,o]),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(4),t([n.t0]);case 14:n.next=17;break;case 16:t([null,[]]);case 17:case"end":return n.stop()}}),n,null,[[4,11]])})))},e.t0.showOpenDialog.call(e.t0,e.t1,e.t5,e.t6),e.next=30;break;case 27:e.prev=27,e.t7=e.catch(0),t([e.t7]);case 30:case"end":return e.stop()}}),e,null,[[0,27]])})))}))}function k(e){return v(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){require(Object(d.join)(window.__rootDir,"../bin/ThunderHelper.node")).calculateFileGCID(e,(function(e){t([null,e])}))})).catch((function(e){return[e]})));case 1:case"end":return t.stop()}}),t)})))}function y(e){return v(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=0;case 2:if(!(r<e.length)){t.next=11;break}return o=e[r],t.next=6,m(o);case 6:(c=t.sent).isDirectory()?n.push(null):n.push({filePath:o,fileSize:c.size});case 8:r++,t.next=2;break;case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t)})))}},20:function(e,t,n){"use strict";n.r(t);var r=n(37),o="local-upload",c={getTask:function(e){return Object(r.b)().state[o].allTask[e]},changeAndBoradcastTaskChange:function(e){return Object(r.b)().dispatch("".concat(o,"/changeAndBoradcastTaskChange"),e)},doneTask:function(e){Object(r.b)().dispatch("".concat(o,"/doneTask"),e)},cancelDone:function(e){Object(r.b)().dispatch("".concat(o,"/cancelDone"),e)},cancelTask:function(e){Object(r.b)().commit("".concat(o,"/cancelTask"),e)},assignTask:function(e){Object(r.b)().commit("".concat(o,"/assignTask"),e)},boradcastTaskChange:function(e){Object(r.b)().dispatch("".concat(o,"/boradcastTaskChange"),e)},broadcastTaskDelete:function(e){Object(r.b)().dispatch("".concat(o,"/broadcastTaskDelete"),e)}};t.default=c},202:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));n(1);var r=n(37);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["peerid","userid","version","numericVersion","sessionid","isNative","deviceId"],t=Object(r.b)(),n=t.state.users.curUser,o=Object.assign({},n,{version:t.state.clientInfo.version||"",numericVersion:t.state.clientInfo.numericVersion||0,userid:n.userId||"0",sessionid:t.state.users.curUser.sessionid||"",peerid:t.state.clientInfo.peerId||"AAAAAAAAAAAAAAAA",isNative:t.state.isNative,deviceId:t.state.clientInfo.deviceId||""});return Promise.resolve(e.map((function(e){return o[e]})))}},203:function(e,t,n){"use strict";n.r(t),n.d(t,"treePathResolveObj",(function(){return T}));n(38),n(44),n(126);var r=n(13),o=(n(45),n(16),n(10),n(1),n(12)),c=n(37),l=n(6),d=n(9),f=n(98),h=n(58),v=n(176),m=n(47),x=n(25),k=n(5),y=n(64),w=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},T={resolve:function(a){}};t.default=function(e){o.client.start(e,"thunder");var t=Object(c.b)();function n(e,n){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.state.users.curUser.userid,Object(y.setDefaultSaveFolder)(r,n);case 2:case"end":return e.stop()}}),e)})))}function T(e,n){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t.state.users.curUser.userid)&&Object(y.setRecentFolder)(r,n);case 2:case"end":return e.stop()}}),e)})))}function _(){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state.users.curUser.userid,r=[],!n){e.next=6;break}return e.next=5,Object(y.getRecentFolder)(n);case 5:r=e.sent;case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))}return console.log(t),o.client.registerFunctions({IpcBatchAddUrlsToDrive:function(e,r){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.getCaptchaToken)(!0);case 2:return e.next=4,Object(k.getConfig)("ThunderPanPlugin","lastUsePath",!1);case 4:if(o=e.sent,c=t.state.users.curUser.userid,!o){e.next=9;break}return e.next=9,n(null,{name:r[0].path,id:r[0].parentId});case 9:return e.next=11,Object(y.addRecentFolder)(c,{name:r[0].path,id:r[0].parentId});case 11:return l=[],e.next=14,r.reduce((function(e,n){return e.then((function(){return(e=n,r=e.name,o=void 0===r?"":r,c=e.url,e.path,f=e.parentId,h=void 0===f?"":f,v=e.files,x=void 0===v?[]:v,k=h.split("\\"),y={upload_type:"UPLOAD_TYPE_URL",kind:"drive#file",parent_id:k[k.length-1],name:o,hash:"",size:0,url:{url:c,files:x}},Object(m.eventTrack)("transmission_upload_yunpan_create",{from:"link",file_type:Object(d.getFileExtension)(o),tab:"yun_add"}),t.dispatch("url-task-list/addUrlTask",y)).then((function(e){l.push(e)})).catch((function(e){console.error("IpcBatchAddUrlsToDrive errro",e),l.push(e)}));var e,r,o,c,f,h,v,x,k,y}))}),Promise.resolve());case 14:return e.abrupt("return",l);case 15:case"end":return e.stop()}}),e)})))},IpcGetDirectory:function(e,n){var r=n.parentId,o=void 0===r?"":r;return t.dispatch("drive/getFolders",{parent_id:o,filters:{kind:{eq:"drive#folder"},trashed:{eq:!1}}})},IpcGetDriveInfo:function(e){return t.dispatch("getAbout")},IpcUploadLocalFiles:function(e){var t=this;return new Promise((function(e,n){return w(t,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,c,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(!0),t.next=3,Object(v.selectLocalFiles)();case 3:if(n=t.sent,o=Object(r.a)(n,2),c=o[0],l=o[1]){t.next=10;break}return console.error("获取文件信息失败",c),t.abrupt("return");case 10:f.default.$emit("selectLocalFiles",l,"local_upload_btn");case 11:case"end":return t.stop()}}),t)})))}))},IpcCreateFolder:function(e){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.default.$emit("createNewDirectory"),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))},IpcGetRecentFolder:_,IpcTransferDataInit:function(){return t.state["local-upload"]},IpcTranferCall:function(e,n){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object(r.a)(n,2),c=o[0],l=o[1],e.t0=c,e.next="pause"===e.t0?4:"delete"===e.t0?6:"resume"===e.t0?8:"cancel"===e.t0?10:"retry"===e.t0?12:"update"===e.t0?14:"removeUrlTask"===e.t0?16:"getUrlTasks"===e.t0?18:"getSingleTaskStatus"===e.t0?21:24;break;case 4:return t.dispatch("local-upload/pause",l),e.abrupt("break",25);case 6:return t.dispatch("local-upload/delete",l),e.abrupt("break",25);case 8:return t.dispatch("local-upload/resume",l),e.abrupt("break",25);case 10:return t.dispatch("local-upload/cancel",l),e.abrupt("break",25);case 12:return t.dispatch("local-upload/retry",l),e.abrupt("break",25);case 14:return t.dispatch("local-upload/changeAndBoradcastTaskChange",l),e.abrupt("break",25);case 16:return t.dispatch("url-task-list/removeUrlTask",l),e.abrupt("break",25);case 18:return e.next=20,t.dispatch("url-task-list/getUrlTasks",l);case 20:return e.abrupt("return",e.sent);case 21:return e.next=23,t.dispatch("url-task-list/getSingleTaskStatus",l);case 23:return e.abrupt("return",e.sent);case 24:return e.abrupt("break",25);case 25:case"end":return e.stop()}}),e)})))},IpcUrlTaskStatus:function(e,t){var n=t.taskIds;return Object(l.p)({status_ids:n})},IpcGetSingleUrlTask:function(e,t){return Object(l.o)(t)},IpcGetFiles:function(e,t){return Object(l.b)(t)},IpcTreePath:function(e,n){var r=n.pid;return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.getters["users/isLogin"]){e.next=3;break}return o.client.callServerFunction("ShowLoginDlg","other",!0),e.abrupt("return",Promise.reject(new Error("login please")));case 3:return e.abrupt("return",Object(h.createTreePathBrowserWindow)(r));case 4:case"end":return e.stop()}}),e)})))},IpcGetCurrentRoute:function(){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.state.drive.driveRouteList.map((function(e){return{name:e.title,id:e.id}})));case 1:case"end":return e.stop()}}),e)})))},ShowFileDetail:function(e,n){var r=n.fileId,o=n.isPlayInstantly,c=n.clearPickedItems,l=void 0!==c&&c,d=n.changeRect,f=void 0!==d&&d;return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,path,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.dispatch("drive/showFileDetail",{fileId:r,isPlayInstantly:o,changeRect:f,clearPickedItems:l});case 2:return n=e.sent,path=t.state.drive.driveRouteList.map((function(e){return{title:e.title,id:e.id}})),c=t.state.drive.driveFileList.map((function(e){return e.id})),console.log("path",path,"curPathIdList",c),e.abrupt("return",Object.assign(Object.assign({},n),{path:c.includes(r)?path:void 0}));case 7:case"end":return e.stop()}}),e)})))},IpcShowTransferWindow:function(e,t){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(h.getTransferWindow)(t),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))},IpcDefaultSavePath:function(){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state.users.isAccessTokenReady){e.next=3;break}return e.next=3,new Promise((function(e){var n=t.watch((function(e){return e.users.isAccessTokenReady}),(function(){n(),e()}))}));case 3:return n=t.state.users.curUser.userid,e.abrupt("return",Object(y.getDefaultSaveFolder)(n));case 5:case"end":return e.stop()}}),e)})))},IpcUrlTaskDataInit:function(){return t.state["url-task-list"]},IpcClearRecentFolder:function(){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(0,[]),e.abrupt("return",!0);case 2:case"end":return e.stop()}}),e)})))},IpcDeleteRecentFolder:function(e,t){return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return n=e.sent,t.forEach((function(e){var t=n.findIndex((function(t){return e===t.id}));t>-1&&n.splice(t,1)})),e.next=6,T(0,n);case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})))},IpcSetRecentFolder:T,IpcStartRetrieval:function(e,n,r){t.dispatch("retrieval-list/startRetrieval",{fileIds:n,defaultPath:r})},ExternalFetchBack:function(e,n){var r=n.fileIds,o=n.userId;return t.dispatch("drive/externalFetchBack",{fileIds:r,userId:o})},IpcRedirectCurrentDirectory:function(e,n){var r=n.titleList,o=n.idList,c=n.selectFileIdList,l=void 0===c?[]:c;return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.map((function(e,t){return{title:e,id:o[t]}})),t.commit("drive/setDriveRouteList",n),t.commit("drive/setParentIdMap",{drive:o[o.length-1]}),e.prev=3,e.next=6,t.dispatch("drive/getFileList",{parent_id:t.state.drive.parentIdMap.drive,limit:10,__type:"drive",refresh:!0});case 6:f.default.$emit("drive/setPickedList",l),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),console.error(e.t0),e.abrupt("return",{status:"error",message:e.t0.message});case 13:return e.abrupt("return",{status:"success"});case 14:case"end":return e.stop()}}),e,null,[[3,9]])})))},IpcSetDefaultSavePath:n}),o.client}},204:function(e,t,n){"use strict";n.r(t),n.d(t,"enableTaskCert",(function(){return l})),n.d(t,"disableTaskCert",(function(){return d}));n(10),n(11),n(33),n(925),n(1);var r=n(5),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},c=new Map;function l(e,t,n){return o(this,void 0,void 0,regeneratorRuntime.mark((function o(){var c;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(c=f(e,!0),!(null==c?void 0:c.get(t))){o.next=7;break}return o.next=5,Object(r.callServer)("UpdateDcdnWithVipCert",e,t,n).catch();case 5:o.next=10;break;case 7:return o.next=9,Object(r.callServer)("EnableDcdnWithVipCert",e,t,n).catch();case 9:c.set(t,!0);case 10:case"end":return o.stop()}}),o)})))}function d(e,t){var n=c.get(e);n&&(Object(r.callServer)("DisableDcdnWithVipCert",e,t).catch(),n.delete(t))}function f(e,t){var n=c.get(e);return!n&&t&&(n=new Map,c.set(e,n)),n}},205:function(e,t,n){"use strict";n.r(t),n.d(t,"showMessage",(function(){return c}));var r=n(282),o=n(0),c=function(e){var t=new(o.default.extend(r.a))({el:document.createElement("div"),propsData:e});o.default.nextTick((function(){t.show()}))}},21:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"b",(function(){return C}));n(11),n(28),n(38),n(44);var r=n(17),o=(n(10),n(45),n(13)),c=(n(1),n(43)),l=n.n(c),d=(n(504),n(202)),f=n(75),h=(n(85),n(9)),v=(n(507),n(4)),m=n.n(v),x=n(274),k=n.n(x),y=n(25),w=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))};l.a.defaults.timeout=3e4,l.a.interceptors.request.use((function(e){return window.navigator.onLine?e:Promise.reject(new Error("offline"))}));var T="undefined"!=typeof global&&global.serverEnv||{},_=(T.SHOULEI_API,{test:"http://api-alpha-drive.office.k8s.xunlei.cn/drive/v1/",prod:"https://api-pan.xunlei.com/drive/v1/"});function R(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},option=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,c,l,f,v,x,k,y,w,T,_,R,S,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return option=Object.assign({},{method:data._m||"get"},option),t=option.method,n=document.cookie||"",e.next=5,Object(d.default)();case 5:return c=e.sent,l=Object(o.a)(c,7),f=l[0],v=l[1],x=void 0===v?0:v,k=l[2],y=l[3],w=l[4],l[5],T=l[6],f=f||Object(h.getCookie)("peerid",n)||Object(h.getCookie)("deviceid",n),_=m()(f||Object(h.random)(32)),R={userId:x,sessionId:w,version:k,numericVersion:y,guid:_,peerId:f,deviceId:T},S=Object(r.a)(data&&data._h||[]),delete data._h,delete data._m,Object.keys(data).includes("filters")&&(data.filters=JSON.stringify(data.filters)),O=data,data={},e.abrupt("return",{method:t,params:O,headerStrings:S,userInfo:R,data:data});case 25:case"end":return e.stop()}}),e)})))}function S(e){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},option=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return w(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o,c,l,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=option.env?"".concat(_[option.env]).concat(e):"".concat(_[f.a.driveAPI]).concat(e),n=Object.assign({},data),t.next=4,R(n,option);case 4:return r=t.sent,o=r.method,c=r.params,l=r.userInfo,d={method:o,withCredentials:!0,headers:{"x-peer-id":l.peerId,"x-client-version-code":l.numericVersion,"x-device-id":l.deviceId},withCaptcha:option.withCaptcha||!1},"get"!==o.toLocaleLowerCase()&&"head"!==o.toLocaleLowerCase()?d=Object.assign({},d,{body:c}):(h=k.a.stringify(c),e+=h?"?"+h:""),t.abrupt("return",Object(y.default)(e,Object.assign({},d)).then((function(e){if(null==e?void 0:e[0])return e[0];if(!Array.isArray(e))throw new Error(JSON.stringify(e));var t=null==e?void 0:e[1];throw"unreachable"===(null==t?void 0:t.error)&&(t.error_description="操作未成功，请稍后重试"),new Error(JSON.stringify(t))})));case 10:case"end":return t.stop()}}),t)})))}function O(e,t){var n={client_name:"xl_pc_web",client_version:t,ts:(new Date).getTime(),r:Object(h.getRandomNum)(1,100)},r=m()("".concat("!@#$%^&*()QAZ").concat(e.toUpperCase()).concat(n.client_name).concat(n.client_version).concat(n.ts).concat(n.r));return Object.assign(Object.assign({},n),{key:r})}function E(e){var t=e.sessionId,n=e.userId;return Object(h.base64encode)((n||"0")+":"+(t||"-")+":client:-1")}function C(e,t){var data=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},param=arguments.length>3?arguments[3]:void 0;return w(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,c,f,h,v,m,x;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(d.default)();case 2:return r=n.sent,c=Object(o.a)(r,5),c[0],f=c[1],h=void 0===f?0:f,c[2],v=c[3],m=c[4],x=Object.assign({},O(t,v),param),n.abrupt("return",l()({method:t,url:e,params:x,data:data,headers:{Accept:"application/json; version=1.0",Authorization:"Basic "+E({userId:h,sessionId:m})}}).then((function(e){var t;return 0===(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.result)?null==e?void 0:e.data:Promise.reject(e.data)})));case 12:case"end":return n.stop()}}),n)})))}},230:function(e,t){e.exports=require("electron")},231:function(e,t){e.exports=require("assert")},25:function(e,t,n){"use strict";n.r(t),n.d(t,"getCaptchaToken",(function(){return I})),n.d(t,"pubfLNjQjRGQIl9H0tLb9ZIho9Sm6WCYqg6",(function(){return j})),n.d(t,"pub4mUwdI1PaE9YatXbwXjOu1Ni3BZ7AQ2y",(function(){return F})),n.d(t,"puboEaezVOzUkfLvif3EDT4gYQISgxFtuCN",(function(){return D})),n.d(t,"pubXKZ18i5hDKG6AlZPNeIsv2tUq0s0PuCW",(function(){return A})),n.d(t,"pubHJZ0hdtxXER0fhz3oq59brPeWz7eeqyY",(function(){return U})),n.d(t,"pub6QP56eBzNKBNwG316O6dB4jLs1koUvH9",(function(){return N})),n.d(t,"pubaDohIgsE4Q8MNLAZHKwkR6yzYhYlRvTG",(function(){return L})),n.d(t,"pubo0iVkzx5rWUUyLxgE6HOdD6ofhNVev3K",(function(){return M})),n.d(t,"pubF3Nk9gu9ZBSXZqiE6BOIRBRy0dXbhHqE",(function(){return B})),n.d(t,"pube5IaR3BNnjnVzQg31JChh7kBN79uLAwS",(function(){return z})),n.d(t,"pubXS7Vz0Mxf2Yayuv5jPjeFQeWw99cuHXp",(function(){return G})),n.d(t,"pubPAc6XNxoIAgFECyxDVMKo4PQlMN7T6oT",(function(){return V})),n.d(t,"pubQbB7dcfnoB9JrPV91lswWAsOPJt2ldCY",(function(){return $})),n.d(t,"pubBJ4SSFIjE4kkMbs0X1boQe1yAPwR08xA",(function(){return Y}));n(10),n(1);var r=n(65),o=n(4),c=n.n(o),l=n(43),d=n.n(l),f=n(74),h=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},v=n(65).default,m=v.clientId,x=v.packageName,k=v.signKey,y=v.algVersion,w=(Date.now()/1e3).toFixed(0);var T=function(){return h(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c()("".concat(m).concat(f.version).concat(x).concat(w).concat(y).concat(k)),e.abrupt("return",d.a.get("http://risk-account-ssl.office.k8s.xunlei.cn/amaze/v1.0/algorithms?client_id=".concat(m,"&client_version=").concat(f.version,"&package_name=").concat(x,"&timestamp=").concat(w,"&alg_version=").concat(y,"&sign=").concat(t)).then((function(e){return e.data})).catch((function(e){return Promise.reject(e.response.data)})));case 2:case"end":return e.stop()}}),e)})))},_=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},R=[];function S(e){return _(this,void 0,void 0,regeneratorRuntime.mark((function t(){var o,l,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=window.localStorage.getItem("captcha_device_id"),l="".concat(r.default.clientId).concat(f.version).concat(r.default.packageName).concat(o).concat(e),"BEGIN_FUN_FILE"===r.default.funFile){t.next=11;break}return t.next=6,n(626)("./"+r.default.funFile);case 6:t.t0=r.default.funName,d=t.sent[t.t0],l=d(l),t.next=17;break;case 11:if(R.length){t.next=16;break}return t.next=14,T();case 14:h=t.sent,R=h.algorithms;case 16:R.forEach((function(e){l=c()("".concat(l).concat(e.salt))}));case 17:return l="".concat(r.default.algVersion,".").concat(l),t.abrupt("return",l);case 21:t.prev=21,t.t1=t.catch(0),console.log(t.t1);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))}var O=n(145),E=n(37),C=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},P=String(Date.now()),I=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return C(void 0,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(P);case 2:return n=t.sent,o=Object(E.b)(),c={package_name:r.default.packageName,client_version:f.version,captcha_sign:n,timestamp:P,user_id:o.state.users.curUser.userId},t.next=7,O.a.getCaptchaToken({forceRenew:e,withCaptchaMeta:c});case 7:case"end":return t.stop()}}),t)})))};t.default=function(e,option){return C(void 0,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,c,l,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S(P);case 2:if(n=t.sent,o=Object(E.b)(),c={package_name:r.default.packageName,client_version:f.version,captcha_sign:n,timestamp:P,user_id:o.state.users.curUser.userId},(l=Object.assign(Object.assign({},option),{withCaptchaMeta:c})).withCaptcha){t.next=13;break}return t.next=9,O.a.getCaptchaToken({withCaptchaMeta:c});case 9:d=t.sent,h=d.captcha_token,l.headers||(l.headers={}),l.headers["x-captcha-token"]=h;case 13:return t.abrupt("return",new Promise((function(t,n){O.a.request(e,l).then((function(e){return t(e)})).catch((function(e){return t(e)}))})));case 14:case"end":return t.stop()}}),t)})))};function j(e){var t=n(4),r="TJIOL9dRqDEMA81";return"end"!=="undefined"?(0,n(25).pub4mUwdI1PaE9YatXbwXjOu1Ni3BZ7AQ2y)(t(e+r)):e}function F(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(29).pub16DFMqLKP1vMU07zrXlIwMqzAEzTx25v)(t(e+r)):e}function D(e){var t=n(4),r="srglxIM6b3fkXXi";return"end"!=="undefined"?(0,n(25).pubXKZ18i5hDKG6AlZPNeIsv2tUq0s0PuCW)(t(e+r)):e}function A(e){var t=n(4),r="/Bq8COLQaPjqr7LNAljZe1C1j6mzMoggd";return"end"!=="undefined"?(0,n(9).publ1KgB88dGtmrXtE2iaqkA2I1gGdlBJ4j)(t(e+r)):e}function U(e){var t=n(4),r="Q3stRvTm";return"end"!=="undefined"?(0,n(29).pubmpqLBukUilr6wdnW0KvhDZ7XNbXrdTwR)(t(e+r)):e}function N(e){var t=n(4),r="fEA3Iti5VIHhWQ1LJscbpc3bwTenStpVz";return"end"!=="undefined"?(0,n(85).pubPJS1ubBWTRkE3HG7mTKySS4a2SefdavG)(t(e+r)):e}function L(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(85).pubfQRfrELvPD8SPa1mhQbIRs86Ial05qhG)(t(e+r)):e}function M(e){var t=n(4),r="wFQaz6DqEvNrQydB";return"end"!=="undefined"?(0,n(25).pubF3Nk9gu9ZBSXZqiE6BOIRBRy0dXbhHqE)(t(e+r)):e}function B(e){var t=n(4),r="RUHG5DH4322EfdZbVvi2W";return"end"!=="undefined"?(0,n(91).pubcZBhnfWBt6J4adgH3bgo8d68XsXK98o0)(t(e+r)):e}function z(e){var t=n(4),r="U2Y6ndmoy3TSy6mUAb";return"end"!=="undefined"?(0,n(25).pubXS7Vz0Mxf2Yayuv5jPjeFQeWw99cuHXp)(t(e+r)):e}function G(e){var t=n(4),r="uvhpvqGLGrTaKilE4NR8E0O0E0wsaPHW26CtNTfSh0n";return"end"!=="undefined"?(0,n(82).pubXBK0HblVb6IGnbGzqvjt7hyET484Nq83)(t(e+r)):e}function V(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(25).pubQbB7dcfnoB9JrPV91lswWAsOPJt2ldCY)(t(e+r)):e}function $(e){var t=n(4),r="TeDU2QrWacBjd2vTKHtT0TxAXcoQ4";return"end"!=="undefined"?(0,n(82).pubK4cFBZIuLiDEKMeXnmXSllcLDlwheG3Z)(t(e+r)):e}function Y(e){var t=n(4),r="DVyfN5Y2a6gViHr5Xy7";return"end"!=="undefined"?(0,n(9).pubL0NaUW9XOiKAOUrqcz1mJA5CjLGz4PcQ)(t(e+r)):e}},263:function(e,t,n){"use strict";n.r(t),n.d(t,"checkDisk",(function(){return l})),n.d(t,"getFreePartitionSpace",(function(){return d})),n.d(t,"getLogicalDriveStrings",(function(){return f}));var r=n(53);var o,c=(o=n.n(r).a.join(window.__rootDir,"../../resources/bin/ThunderHelper.node"),require(o));function l(e){var t=e;return/^[a-zA-Z]:\\/.test(e)?t=e.slice(0,3):e&&"\\"!==e[e.length-1]&&(t=e+"\\"),t}function d(e){return e=l(e),c.getFreePartitionSpace(e)}function f(){return c.getLogicalDriveStrings()}},264:function(e,t,n){var content=n(566);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("3191d5ad",content,!0,{sourceMap:!1})},265:function(e,t,n){var content=n(568);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("738b7239",content,!0,{sourceMap:!1})},266:function(e,t,n){var content=n(575);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("3373130c",content,!0,{sourceMap:!1})},267:function(e,t,n){var content=n(577);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("f741125e",content,!0,{sourceMap:!1})},268:function(e,t,n){var content=n(579);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("33f5827c",content,!0,{sourceMap:!1})},269:function(e,t,n){var content=n(581);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("3bd55e7e",content,!0,{sourceMap:!1})},270:function(e,t,n){var content=n(583);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("b12b8760",content,!0,{sourceMap:!1})},271:function(e,t,n){var content=n(585);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("163663f1",content,!0,{sourceMap:!1})},272:function(e,t,n){var content=n(587);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("44658b0a",content,!0,{sourceMap:!1})},273:function(e,t,n){var content=n(589);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(79).default)("3e8d143d",content,!0,{sourceMap:!1})},276:function(e,t,n){"use strict";n.r(t),n.d(t,"FileUploadManager",(function(){return M}));n(7),n(8),n(32),n(16),n(10),n(126),n(38),n(44);var r=n(13),o=n(146),c=n(149),l=n(212),d=n(213),f=n(148),h=(n(24),n(1),n(72)),v=n(89),m=n(53),x=n(76),k=n.n(x),y=n(508),w=n(74),T=n(9),_=n(43),R=n.n(_),S=n(479),O=n.n(S),E=n(14),C=n(100),P=n(277),I=n(20),j=n(6),F=n(46),D=n(47),A=n(25);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var o=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.a)(this,n)}}var N=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},L=Object(m.resolve)(process.execPath,"../resources/app").replace(/\\/g,"/"),M=function(e){Object(l.a)(n,e);var t=U(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this)).uploadingTask=[],r.pendingTask=[],r.pausedTask=[],r.NUMBER_OF_CONCURRENT_TASKS=2,r.childTask={},r.allTaskMap=e,r.init(),r}return Object(c.a)(n,[{key:"init",value:function(){var e=this,t="".concat(L,"/plugins/ThunderPanPlugin/").concat(w.version,"/node-process/upload-child-process.js");this.child=y.fork(t,["--type=xdas-plugin-process","--xdas-plugin-name=pan-upload-child-process"],{execArgv:["--inspect=9930"]}),this.child.on("message",(function(t){var n=Object(r.a)(t,2),o=n[0],c=n[1];if(console.log(t,"============"),[E.UploadEvent.cancel,E.UploadEvent.pause,E.UploadEvent.fail,E.UploadEvent.uploading].includes(o))if(e.changeAndBoradcastTaskChange(Object.assign(c,{updateTime:k()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss"),uploadStatus:o})),o===E.UploadEvent.cancel){var l=e.uploadingTask.findIndex((function(e){return e===c.id}));e.deleteFromUploadingTask(l),I.default.cancelDone(c.id),delete e.childTask[c.id],e.checkUploadingTask()}else if(o===E.UploadEvent.pause){var d=e.uploadingTask.findIndex((function(e){return e===c.id})),f=e.deleteFromUploadingTask(d);e.addToPausedTask(f[0]),delete e.childTask[c.id],e.checkUploadingTask()}else o===E.UploadEvent.fail&&(delete e.childTask[c.id],e.fail(c.id));else"complete"===o&&(e.NormalDone(c.id),delete e.childTask[c.id])})),this.child.on("error",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("this.child error",t)})),this.child.on("close",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("this.child close",t)})),this.child.on("disconnect",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("this.child disconnect",t)})),this.child.on("exit",(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];console.log("child exit",n),e.init(),e.uploadingTask=[],e.pendingTask=[],e.pausedTask=[]}))}},{key:"finish",value:function(){var e=this;this.uploadingTask.forEach((function(t){e.pause(t)})),this.pendingTask.forEach((function(t){e.pause(t)})),this.child.kill()}},{key:"add",value:function(e){return N(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.addToPendingTask(e),this.changeAndBoradcastTaskChange({id:e,uploadStatus:E.UploadEvent.pending});case 2:case"end":return t.stop()}}),t,this)})))}},{key:"start",value:function(){this.uploadingTask.length<this.NUMBER_OF_CONCURRENT_TASKS&&this.checkUploadingTask()}},{key:"checkUploadingTask",value:function(){return N(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.uploadingTask.length<this.NUMBER_OF_CONCURRENT_TASKS&&this.pendingTask.length>0)){e.next=5;break}return e.next=3,this.startUploadTask();case 3:e.next=0;break;case 5:case"end":return e.stop()}}),e,this)})))}},{key:"startUploadTask",value:function(){return N(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o,c,l,d,f,h,v,m,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(t=this.deleteFromPendingTask(0)[0])){e.next=41;break}return this.addToUploadingTask(t),n=I.default.getTask(t),this.changeAndBoradcastTaskChange({id:n.id,uploadStatus:E.UploadEvent.prepare}),e.next=7,Object(A.getCaptchaToken)(!0);case 7:if(!((o=n.token)&&o.expiration&&new Date(o.expiration)<new Date)&&o&&o.expiration){e.next=40;break}if(e.t0=n.fileId,!e.t0){e.next=13;break}return e.next=13,Object(j.h)(n.fileId);case 13:return e.next=15,Object(P.preCreate)(n);case 15:if(c=e.sent,l=Object(r.a)(c,2),d=l[0],!(f=l[1])){e.next=30;break}if(f.uploadStatus!==E.UploadEvent.complete){e.next=24;break}this.fastUploadDone(f),e.next=28;break;case 24:return e.next=26,this.changeAndBoradcastTaskChange({id:t,icon:f.icon,fileId:f.fileId,mime_type:f.mime_type,token:f.token,uploadType:f.uploadType});case 26:(h=e.sent).uploadStatus===E.UploadEvent.prepare&&this.send("add",h);case 28:e.next=38;break;case 30:console.error("error in check file existence",d),v={id:t,updateTime:k()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss"),uploadStatus:E.UploadEvent.fail,errMsg:Object(T.safeJSONParse)(d.message).error_description},this.changeAndBoradcastTaskChange(v),m=this.uploadingTask.findIndex((function(e){return e===t})),x=this.deleteFromUploadingTask(m),this.addToPausedTask(x[0]),this.checkUploadingTask(),Object(D.eventTrack)("transmission_upload_yunpan_finish",{result:"fail",tab:"local-upload",file_type:Object(T.getFileExtension)(n.name)});case 38:e.next=41;break;case 40:this.send("add",n);case 41:case"end":return e.stop()}}),e,this)})))}},{key:"send",value:function(e,t){if("resume"===t.uploadType){if("add"===e){if(this.childTask[t.id])return;this.changeAndBoradcastTaskChange({id:t.id,uploadStatus:E.UploadEvent.uploading,updateTime:k()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss")})}if("resume"===e&&this.childTask[t.id])return;this.childTask[t.id]=t,this.child.send([e,t])}else"add"===e?this.formdataPost(t):"pause"===e?Object(C.cancelPostUpload)(t,"pause"):"resume"===e?this.formdataPost(t):"cancel"===e&&Object(C.cancelPostUpload)(t,"cancel")}},{key:"formdataPost",value:function(e){return N(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.prepareData)(e.filePath);case 2:n=t.sent,r=e.token.url,delete(o=Object.assign(Object.assign({},e.token),{file:n})).url,this.changeAndBoradcastTaskChange({id:e.id,uploadStatus:E.UploadEvent.uploading,updateTime:k()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss")}),Object(C.postUpload)({url:r,params:o,axiosProgress:O()(this.axiosProgress(e.id),1e3,{leading:!0,trailing:!1}).bind(this),timeout:1e4+e.size/100/1024*1e3,id:e.id}).then((function(t){c.NormalDone(e.id)})).catch((function(t){if(R.a.isCancel(t))if(t.message===E.UploadEvent.pause){c.changeAndBoradcastTaskChange({id:e.id,uploadStatus:t.message,updateTime:k()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss")});var n=c.uploadingTask.findIndex((function(t){return t===e.id})),r=c.deleteFromUploadingTask(n);c.addToPausedTask(r[0]),c.checkUploadingTask()}else{c.uploadingTask.findIndex((function(t){return t===e.id}));c.deleteFromUploadingTask(e.id),I.default.cancelDone(e.id),c.checkUploadingTask()}else c.fail(e.id)}));case 8:case"end":return t.stop()}}),t,this)})))}},{key:"axiosProgress",value:function(e){var t=this,n=Date.now(),r=0;return function(o){var c=Date.now(),l=o.loaded,progress=(100*l/o.total).toFixed(2),d="0";c!==n&&(d=(1e3*(l-r)/(c-n)).toFixed(2)),r=l,n=c,t.changeAndBoradcastTaskChange({id:e,progress:progress,uploadNetSpeed:d})}}},{key:"alter_NUMBER_OF_CONCURRENT_TASKS",value:function(e){this.NUMBER_OF_CONCURRENT_TASKS=e,this.rescheduleTask()}},{key:"rescheduleTask",value:function(){}},{key:"pause",value:function(e){return N(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o,c,l,d,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.uploadingTask.findIndex((function(t){return t===e})),r=I.default.getTask(e),!(n>-1)){t.next=20;break}if("post"!==r.uploadType){t.next=7;break}C.axiosCancelToken[e]?this.send("pause",I.default.getTask(e)):(I.default.assignTask({id:e,uploadStatus:E.UploadEvent.pause}),I.default.boradcastTaskChange({id:e,uploadStatus:E.UploadEvent.pause}),o=this.uploadingTask.findIndex((function(t){return t===e})),c=this.deleteFromUploadingTask(o),this.addToPausedTask(c[0])),t.next=18;break;case 7:if("resume"!==r.uploadType){t.next=18;break}if(!this.childTask[e]){t.next=13;break}return t.next=11,this.send("pause",I.default.getTask(e));case 11:t.next=18;break;case 13:I.default.assignTask({id:e,uploadStatus:E.UploadEvent.pause}),I.default.boradcastTaskChange({id:e,uploadStatus:E.UploadEvent.pause}),l=this.uploadingTask.findIndex((function(t){return t===e})),d=this.deleteFromUploadingTask(l),this.addToPausedTask(d[0]);case 18:return this.checkUploadingTask(),t.abrupt("return");case 20:(f=this.pendingTask.findIndex((function(t){return t===e})))>-1?(h=this.deleteFromPendingTask(f),this.addToPausedTask(h[0]),this.changeAndBoradcastTaskChange({id:e,uploadStatus:E.UploadEvent.pause})):console.error("出错了，不存在的任务");case 22:case"end":return t.stop()}}),t,this)})))}},{key:"cancel",value:function(e){return N(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.uploadingTask.findIndex((function(t){return t===e})),r=this.pendingTask.findIndex((function(t){return t===e})),o=this.pausedTask.findIndex((function(t){return t===e})),(c=I.default.getTask(e)).fileId&&Object(j.h)(c.fileId),!(n>-1)){t.next=21;break}if("post"!==c.uploadType){t.next=10;break}C.axiosCancelToken[e]?C.axiosCancelToken[e].cancel():(I.default.cancelTask(e),I.default.broadcastTaskDelete(e),this.deleteFromUploadingTask(n)),t.next=19;break;case 10:if("resume"!==c.uploadType){t.next=19;break}if(!this.childTask[e]){t.next=16;break}return t.next=14,this.send("cancel",I.default.getTask(e));case 14:t.next=19;break;case 16:I.default.cancelTask(e),I.default.broadcastTaskDelete(e),this.deleteFromUploadingTask(n);case 19:t.next=22;break;case 21:r>-1?(this.deleteFromPendingTask(r),I.default.cancelDone(c.id)):o>-1?(this.deleteFromPauseTask(o),I.default.cancelDone(c.id)):console.error("no exist task");case 22:case"end":return t.stop()}}),t,this)})))}},{key:"resume",value:function(e){return N(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=I.default.getTask(e),t.prev=1,t.next=4,Object(F.promisify)(v.stat)(n.filePath);case 4:t.next=10;break;case 6:return t.prev=6,t.t0=t.catch(1),this.changeAndBoradcastTaskChange({id:e,uploadStatus:E.UploadEvent.fail,errMsg:"本地文件已删除",updateTime:k()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss"),localFileExist:"0"}),t.abrupt("return");case 10:(r=this.pausedTask.findIndex((function(t){return t===e})))>-1&&(o=this.deleteFromPauseTask(r),c=o[0],this.addToPendingTask(c),console.log("resume的id",e,this.pausedTask,this.pendingTask),this.isAboutToUploading(c)||this.changeAndBoradcastTaskChange({id:e,uploadStatus:E.UploadEvent.pending}),this.checkUploadingTask());case 12:case"end":return t.stop()}}),t,this,[[1,6]])})))}},{key:"isAboutToUploading",value:function(e){return this.uploadingTask.length<this.NUMBER_OF_CONCURRENT_TASKS&&e===this.pendingTask[0]}},{key:"retry",value:function(e){this.resume(e)}},{key:"doNext",value:function(e){return N(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=this.uploadingTask.findIndex((function(t){return t===e})))>-1&&this.deleteFromUploadingTask(n),t.next=4,this.checkUploadingTask();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"NormalDone",value:function(e){return N(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.doNext(e);case 2:this.changeAndBoradcastTaskChange({id:e,completeTime:k()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss"),updateTime:k()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss"),uploadStatus:E.UploadEvent.complete,progress:"100",driveFileExist:"1"}),I.default.doneTask(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"fastUploadDone",value:function(e){return N(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.doNext(e.id);case 2:this.changeAndBoradcastTaskChange(e),I.default.doneTask(e.id);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"fail",value:function(e){var t,n=I.default.getTask(e),r=this.uploadingTask.findIndex((function(t){return t===e}));r>-1&&(Object(D.eventTrack)("transmission_upload_yunpan_finish",{result:"fail",tab:"local-upload",file_type:Object(T.getFileExtension)(n.name)}),t=this.deleteFromUploadingTask(r),this.addToPausedTask(t[0]),this.changeAndBoradcastTaskChange({id:e,updateTime:k()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss"),uploadStatus:E.UploadEvent.fail}),this.checkUploadingTask())}},{key:"changeAndBoradcastTaskChange",value:function(e){return I.default.changeAndBoradcastTaskChange(e)}},{key:"addToPausedTask",value:function(e){this.pausedTask.push(e),Object(T.log)("add pause task",JSON.stringify({id:e,uploading:this.uploadingTask,pending:this.pendingTask,pause:this.pausedTask},null,2))}},{key:"deleteFromPauseTask",value:function(e){var t=this.pausedTask.splice(e,1);return Object(T.log)("delete pause task",JSON.stringify({index:e,task:t,uploading:this.uploadingTask,pending:this.pendingTask,pause:this.pausedTask},null,2)),t}},{key:"addToUploadingTask",value:function(e){this.uploadingTask.push(e),Object(T.log)("add uploading task",JSON.stringify({id:e,uploading:this.uploadingTask,pending:this.pendingTask,pause:this.pausedTask},null,2))}},{key:"deleteFromUploadingTask",value:function(e){var t=this.uploadingTask.splice(e,1);return Object(T.log)("add uploading task",JSON.stringify({index:e,task:t,uploading:this.uploadingTask,pending:this.pendingTask,pause:this.pausedTask},null,2)),t}},{key:"addToPendingTask",value:function(e){this.pendingTask.unshift(e),this.pendingTask.sort((function(a,b){return b-a})),Object(T.log)("add pending task",JSON.stringify({id:e,uploading:this.uploadingTask,pending:this.pendingTask,pause:this.pausedTask},null,2))}},{key:"deleteFromPendingTask",value:function(e){var t=this.pendingTask.splice(e,1);return Object(T.log)("delete pending task",JSON.stringify({index:e,task:t,uploading:this.uploadingTask,pending:this.pendingTask,pause:this.pausedTask},null,2)),t}}]),n}(h.EventEmitter)},277:function(e,t,n){"use strict";n.r(t),n.d(t,"preCreate",(function(){return m}));n(16);var r=n(13),o=(n(112),n(10),n(1),n(14)),c=n(176),l=n(29),d=n(9),f=n(76),h=n.n(f),v=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))};function m(e){return v(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,f,v,m,x,k,y,w,T,_,R,S,O,E,C,P,I,j,F;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="UPLOAD_TYPE_FORM",Number(e.size)>5242880&&(n="UPLOAD_TYPE_RESUMABLE"),t.next=4,Object(c.CaclGcid)(e.filePath);case 4:if(f=t.sent,v=Object(r.a)(f,2),m=v[0],x=v[1],console.log("计算出的gcid",[m,x]),!m){t.next=12;break}return console.log("计算gcid错误"),t.abrupt("return",[m]);case 12:return k={upload_type:n,kind:"drive#file",parent_id:e.parentId,name:e.name,hash:x,size:e.size},t.next=15,l.default.promiseCreateFile(k);case 15:if(y=t.sent,w=Object(r.a)(y,2),T=w[0],_=w[1]){t.next=21;break}return t.abrupt("return",[T]);case 21:if(Object(d.log)("server return data",JSON.stringify(_,null,2)),!_.file||"PHASE_TYPE_COMPLETE"!==_.file.phase){t.next=25;break}return R=Object.assign({},e,{fileId:_.file.id,icon:_.file.icon_link,mime_type:_.file.mime_type,uploadStatus:o.UploadEvent.complete,progress:"100",completeTime:h()((new Date).toISOString()).format("YYYY-MM-DD HH:mm:ss")}),t.abrupt("return",[null,R]);case 25:if("UPLOAD_TYPE_FORM"!==_.upload_type){t.next=33;break}return S=_.form.url,O=_.form.multi_parts,E=Object.assign({url:S},O),C=Object.assign({},e,{token:E,uploadType:"post",fileId:_.file.id,icon:_.file.icon_link,mime_type:_.file.mime_type}),t.abrupt("return",[null,C]);case 33:if("UPLOAD_TYPE_RESUMABLE"!==_.upload_type){t.next=39;break}return P=_.resumable.params,!(I={endpoint:P.endpoint,accessKeyId:P.access_key_id,accessKeySecret:P.access_key_secret,bucket:P.bucket,stsToken:P.security_token,region:P.region,key:P.key,expiration:P.expiration}).region&&I.endpoint&&-1!==(j=I.endpoint.indexOf(".aliyuncs.com"))&&(I.region=I.endpoint.slice(0,j)),F=Object.assign({},e,{token:I,uploadType:"resume",fileId:_.file.id,icon:_.file.icon_link,mime_type:_.file.mime_type}),t.abrupt("return",[null,F]);case 39:return t.abrupt("return",[new Error("not support")]);case 40:case"end":return t.stop()}}),t)})))}},29:function(e,t,n){"use strict";n.r(t),n.d(t,"containsCurrentPreviewFile",(function(){return k})),n.d(t,"fileExtToIconType",(function(){return w})),n.d(t,"SortOrderType",(function(){return r})),n.d(t,"sortFunctionGen",(function(){return T})),n.d(t,"unSortedList",(function(){return _})),n.d(t,"sortFunctionMap",(function(){return R})),n.d(t,"SYSTEM_FOLDER_TYPE_LIST",(function(){return S})),n.d(t,"normalizedUsedSpaceSize",(function(){return O})),n.d(t,"pub16DFMqLKP1vMU07zrXlIwMqzAEzTx25v",(function(){return C})),n.d(t,"pubNgpwutayxJhiMfpPCG2w98tuG64WEPbJ",(function(){return P})),n.d(t,"pubmpqLBukUilr6wdnW0KvhDZ7XNbXrdTwR",(function(){return I})),n.d(t,"pubzmtLiV54jLfZGowxxuOmSX5bvvVNWoeu",(function(){return j})),n.d(t,"pubhKLfFKD2xvPH6ImbEPPkwGgCkIYml1MR",(function(){return F})),n.d(t,"pubF7HOBLmfFwQ8u1u5HgJXPIkPa6MskGip",(function(){return D})),n.d(t,"pubSOkyTbTRqhBNcYE7YF1Efqwa8SKP5Mfv",(function(){return A})),n.d(t,"pubVuvTBw2PbGG1QwamLD7RJyyCHstzAiuu",(function(){return U})),n.d(t,"pubWQuuWxqSJAEE4rDfYipRaSk5b2ZBK6WQ",(function(){return N})),n.d(t,"pub4HgTkDXF3hgL5dh85NP0tFXipG02h4sm",(function(){return L})),n.d(t,"pub1J9tzB08xSfgVAJJdfu8lhjE8HvUMU7Q",(function(){return M})),n.d(t,"pub7VyLLw7w2CK0NIoxmSAJVjMyaajJB4rY",(function(){return B})),n.d(t,"pubQN07TDLS1f5zAma8KMpQONzYE0Iy4ccT",(function(){return z})),n.d(t,"pubMJzBlRGSvzMwr6EIK3MLb8CL2GEDuor6",(function(){return G}));n(104),n(45);var r,o=n(13),c=(n(16),n(38),n(44),n(10),n(1),n(505)),l=n.n(c),d=n(506),f=n.n(d),h=n(6),v=n(9),m=n(58),x=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))};function k(e){return x(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.getXmpPlayingFile)();case 2:return n=t.sent,t.abrupt("return",!!n&&e.includes(n));case 4:case"end":return t.stop()}}),t)})))}function y(e){var t=this;return new Promise((function(n){return x(t,void 0,void 0,regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(h.e)(e);case 3:r=t.sent,n([null,Object.assign({},r,{gcid:e.hash})]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n([t.t0]);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}))}function w(e){var t=e.split("/"),n=Object(o.a)(t,2),r=n[0],c=n[1];return r&&c?"video"===r?"video":"image"===r?"pic":"audio"===r?"music":"text"===r?"plain"===c?"txt":"doc":"application/vnd.android.package-archive"===e?"apk":"application/x-bittorrent"===e?"bt-file":"application/msword"===e?"word":["application/vnd.ms-excel","application/x-xls"].includes(e)?"xls":["application/x-rar-compressed"].includes(e)?"rar":"application/pdf"===e?"pdf":["application/vnd.ms-powerpoint","application/x-ppt"].includes(e)?"ppt":"unknown":"unknown"}l.a.addPlugin(f.a),t.default={uploadUrl:function(e){var t=e.name,n=void 0===t?"":t,r=e.size,c=void 0===r?0:r,l=e.url,d=e.files,f=void 0===d?[]:d,h=e.parentId,v=void 0===h?"":h,m=e.kind,k=void 0===m?"drive#file":m;return x(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,d,h,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t={upload_type:"UPLOAD_TYPE_URL",kind:k,parent_id:v,name:n,hash:"",size:c,url:{url:l,files:f}},e.next=4,y(t);case 4:if(r=e.sent,d=Object(o.a)(r,2),h=d[0],m=d[1],!h){e.next=10;break}return e.abrupt("return",h);case 10:return e.abrupt("return",m);case 11:case"end":return e.stop()}}),e)})))},promiseCreateFile:y},function(e){e[e.ASC=1]="ASC",e[e.DESC=-1]="DESC"}(r||(r={}));var T=function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(a,b){return t.includes(a.name)&&t.includes(b.name)?0:t.includes(a.name)?-1:t.includes(b.name)?1:a.kind!==b.kind&&r?"drive#file"===a.kind?1:-1:e(a,b,n)}},_=["我的资源","我的转存"],R={name:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return T((function(a,b,e){var t=E(a.name[0]),n=E(b.name[0]);return t!==n?(t-n)*e:a.name.localeCompare(b.name,"zh")*e}),_,e,t)},size:function(e){return T((function(a,b,e){var t=+a.size,n=+b.size;return n===t?R.name(r.ASC)(a,b):(t-n)*e}),_,e)},created_time:function(e){return T((function(a,b,t){return a.created_time!==b.created_time?a.created_time.localeCompare(b.created_time)*t*-1:R.name(e)(a,b)}),_,e,!0)},modified_time:function(e){return T((function(a,b,t){return a.modified_time!==b.modified_time?a.modified_time.localeCompare(b.modified_time)*t:R.name(e,!1)(a,b)}),_,e,!0)}},S=["RESTORE","DOWNLOAD"];function O(e){var t=Object(v.formatSize)(e),n=t.match(/([\d.]+)(\w+)/);if(n){var r=n[1],o=n[2];return["KB","B"].includes(o)||"M"===o&&+r<10?"小于10M":t}return t}function E(e){return/[\u4E00-\u9FEFa-zA-Z]/.test(e)?1:/\d/.test(e)?2:3}function C(e){var t=n(4),r="EF489mOvsR9Zx+N/7d69NhPtidiSR";return"end"!=="undefined"?(0,n(25).puboEaezVOzUkfLvif3EDT4gYQISgxFtuCN)(t(e+r)):e}function P(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(25).pubHJZ0hdtxXER0fhz3oq59brPeWz7eeqyY)(t(e+r)):e}function I(e){var t=n(4),r="hj7n4n9s1Q7j4pVx";return"end"!=="undefined"?(0,n(91).pubWvwZ4oN5mICtCJwAzOeEuJPkBfUslvyl)(t(e+r)):e}function j(e){var t=n(4),r="Vy4d0vNhRGLwD09Ali";return"end"!=="undefined"?(0,n(29).pubhKLfFKD2xvPH6ImbEPPkwGgCkIYml1MR)(t(e+r)):e}function F(e){var t=n(4),r="WqXETYJLGln3xxCRCz2j2z4OXGPN5KqP8j60crQ8snO";return"end"!=="undefined"?(0,n(29).pubF7HOBLmfFwQ8u1u5HgJXPIkPa6MskGip)(t(e+r)):e}function D(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(82).pub13fCVEzewrJWqipeftpSzWE8OsfdssqF)(t(e+r)):e}function A(e){var t=n(4),r="xJe5saqPc6q6poSK9f5ppN9LrdBQw4Puy";return"end"!=="undefined"?(0,n(29).pubVuvTBw2PbGG1QwamLD7RJyyCHstzAiuu)(t(e+r)):e}function U(e){var t=n(4),r="kQkiR7YlpKHPSufYVoZVRn3lZ7ZpCP";return"end"!=="undefined"?(0,n(29).pubWQuuWxqSJAEE4rDfYipRaSk5b2ZBK6WQ)(t(e+r)):e}function N(e){var t=n(4),r="GZHpyPra2FCc4o43qIo";return"end"!=="undefined"?(0,n(82).pub1cisskOmKHSpCgjnWMkYRVWZ457rgfBZ)(t(e+r)):e}function L(e){var t=n(4),r="undefined";return"end"!=="end"?(0,n(9).pub3hxCm0OgLFUwM2dFEiqYsCeRgf0BEURb)(t(e+r)):e}function M(e){var t=n(4),r="QIkS2i22uTAYnsYhfHXC3zr5aHJSH";return"end"!=="undefined"?(0,n(9).pubstwbRjTwsqsfLUY5AnVAV3XXFOj8Atj4)(t(e+r)):e}function B(e){var t=n(4),r="eOqCFHBnNLw6njWt";return"end"!=="undefined"?(0,n(29).pubQN07TDLS1f5zAma8KMpQONzYE0Iy4ccT)(t(e+r)):e}function z(e){var t=n(4),r="iihuwwaar6Z7WbqJRAxz9";return"end"!=="undefined"?(0,n(29).pubMJzBlRGSvzMwr6EIK3MLb8CL2GEDuor6)(t(e+r)):e}function G(e){var t=n(4),r="undefined";return"end"!=="end"?(0,n(29).pubF1i5AfXcoqYwmfE7UBf504mJva0lVclL)(t(e+r)):e}},3:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(16),n(10),n(1);var r,o=n(12),c=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))};t.b=function(e){return c(this,void 0,void 0,regeneratorRuntime.mark((function t(){var c,l,d,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"ThunderPanPlugin",c={name:"ThunderPanPlugin"},d={"bw-import-download":"".concat("ThunderPanPlugin","ImportDownload"),"bw-fetch-back":"".concat("ThunderPanPlugin","FetchBack"),"bw-share":"".concat("ThunderPanPlugin","Share"),"bw-tree-path":"".concat("ThunderPanPlugin","TreePath"),transfer:"".concat("ThunderPanPlugin","Transfer"),"transfer-id":"".concat("ThunderPanPlugin","Transfer"),index:"".concat("ThunderPanPlugin","Webview"),unlogin:"".concat("ThunderPanPlugin","Webview")},t.next=5,n.e(2).then(n.bind(null,541));case 5:return t.t0=t.sent.default,t.next=8,n.e(2).then(n.bind(null,541));case 8:return t.t1=t.sent.default,t.next=11,Promise.resolve().then(n.bind(null,203));case 11:return t.t2=t.sent.default,t.next=14,Promise.resolve().then(n.bind(null,203));case 14:for(h in t.t3=t.sent.default,f={transfer:t.t0,"transfer-id":t.t1,index:t.t2,unlogin:t.t3},d)e.route.name===h&&(c.name=d[h],"function"==typeof(l=f[h])?r=l(c):(r=o.client).start(c));case 17:case"end":return t.stop()}}),t)})))}},306:function(e,t){e.exports=require("stream")},364:function(e,t){},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r={};function o(){return r}t.a=function(e,t){r=e.store}},46:function(e,t){e.exports=require("util")},468:function(e,t){e.exports=require("url")},47:function(e,t,n){"use strict";n.r(t),n.d(t,"eventTrack",(function(){return o}));n(11),n(1),n(28);var r=n(12);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r.client.callServerFunction("TrackEvent","pc_yunpan",e,"",0,0,0,0,c(t))}function c(e){return Object.keys(e).reduce((function(t,n){return t.concat(["".concat(n,"=").concat(e[n])])}),[]).join(",")}},473:function(e,t){},5:function(e,t,n){"use strict";n.r(t),n.d(t,"setConfig",(function(){return c})),n.d(t,"getConfig",(function(){return l})),n.d(t,"callServer",(function(){return d})),n.d(t,"attachEvent",(function(){return f})),n.d(t,"detachEvent",(function(){return h})),n.d(t,"callRemote",(function(){return v})),n.d(t,"openImgView",(function(){return m})),n.d(t,"setRetrievalTaskExtras",(function(){return x})),n.d(t,"setRetrievalTaskExtrasV2",(function(){return k})),n.d(t,"getRetrievalTaskExtras",(function(){return y}));n(10),n(1);var r=n(12),o=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))};function c(section,e,t){return r.client.callServerFunction("SetConfigValue",section,e,t)}function l(section,e,t){return r.client.callServerFunction("GetConfigValue",section,e,t)}function d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return r.client.callServerFunction.apply(r.client,[e].concat(n))}function f(e,t){return r.client.attachServerEvent(e,t)}function h(e,t){r.client.detachServerEvent(e,t)}function v(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),c=2;c<n;c++)o[c-2]=arguments[c];return r.client.callRemoteClientFunction.apply(r.client,[e,t].concat(o))}function m(e){e.width,e.height;var t=e.src;return o(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={windowWidth:900,windowHeight:616,singleton:!0,imgSrc:t},e.next=3,r.client.callServerFunction("MessageBoxCustom","imgViewer",n,{resizable:!0});case 3:case"end":return e.stop()}}),e)})))}function x(e,t,n){return d("SetUserData",e,"{56F48D3C-5453-4E16-B3A5-35EC5CC2C69E}",t,n)}function k(e,t){return d("SetUserData",e,"{56F48D3C-5453-4E16-B3A5-35EC5CC2C69E}",t)}function y(e,t){return t?d("GetUserData",e,"{56F48D3C-5453-4E16-B3A5-35EC5CC2C69E}",t):d("GetUserData",e,"{56F48D3C-5453-4E16-B3A5-35EC5CC2C69E}")}},508:function(e,t){e.exports=require("child_process")},516:function(e,t,n){"use strict";n.r(t),n.d(t,"VipType",(function(){return r})),n.d(t,"initState",(function(){return o})),n.d(t,"state",(function(){return c})),n.d(t,"mutations",(function(){return l})),n.d(t,"getters",(function(){return d}));var r;n(38),n(44);!function(e){e.normal="0",e.normalVip="2",e.platium="3",e.superv="5"}(r||(r={}));var o=function(){return{curUser:{userId:"0"},all:{},isAccessTokenReady:!1}},c=o(),l={setCurUser:function(e,t){t&&t[1].userid||(t[1].userId="0"),Object.assign(t,{userId:String(t[1].userId)}),e.curUser=Object.assign({},e.curUser,Object.assign(Object.assign(Object.assign({},t[1]),t[2]),{userId:t[1].userid}))},updateVipInfo:function(e,t){Object.assign(e.curUser,t)},setIsAccessTokenReady:function(e,t){e.isAccessTokenReady=t},reset:function(e){Object.assign(e,o())}},d={isLogin:function(e){return"0"!==e.curUser.userId},curVipType:function(e){return"1"===e.curUser.isVip&&void 0!==e.curUser.vasType?e.curUser.vasType:r.normal},isVip:function(e){return!("1"!==e.curUser.isVip||![r.platium,r.superv].includes(e.curUser.vasType||r.normal))}}},520:function(e,t,n){e.exports=n.p+"img/4d1ec21.png"},521:function(e,t,n){e.exports=n.p+"img/9df43e3.png"},524:function(e,t,n){e.exports=n.p+"fonts/e7ba04f.woff"},525:function(e,t,n){e.exports=n.p+"img/edbc714.png"},526:function(e,t){e.exports=require("os")},527:function(e,t,n){"use strict";n.r(t),n.d(t,"TaskStatus",(function(){return S})),n.d(t,"initState",(function(){return O})),n.d(t,"state",(function(){return E})),n.d(t,"getters",(function(){return C})),n.d(t,"mutations",(function(){return P})),n.d(t,"actions",(function(){return I}));n(16),n(112),n(11),n(28),n(10),n(126);var r,o,c,l,d,f=n(17),h=(n(38),n(44),n(1),n(0)),v=n(5),m=n(123),x=n(87),k=n(47),y=n(6),w=n(205),T=n(263),_=n(58),R=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},S=m.TaskStatus,O=function(){return{categoryData:{},retrieving:[],retrieved:[],allRetrieval:{},extraTaskInfo:{}}},E=O(),C={retrievingList:function(e){var t=e.retrieving.reduce((function(t,n){var r=e.allRetrieval[n];return r&&[S.Unkown,S.StartPending,S.Started,S.StopPending,S.Stopped,S.Failed,S.StartWaiting].includes(r.taskStatus)&&(t=t.concat(e.allRetrieval[n])),t}),[]);return t},retrievedList:function(e){var t=e.retrieved.reduce((function(t,n){var r=e.allRetrieval[n];return r&&[S.Succeeded,S.Seeding].includes(r.taskStatus)&&(t=t.concat(Object.assign(Object.assign({},e.allRetrieval[n]),e.extraTaskInfo[n]))),t}),[]);return t},runningTaskNum:function(e){return e.retrieving.reduce((function(pre,t){var n,r=null===(n=e.allRetrieval[t])||void 0===n?void 0:n.taskStatus;return r&&[S.StartWaiting,S.StartPending,S.Started].includes(r)&&(pre+=1),pre}),0)}},P={setAllRetrieval:function(e,t){var n=t.taskId,r=t.task;h.default.set(e.allRetrieval,n,r)},deleteAllRetrieval:function(e,t){h.default.delete(e.allRetrieval,t)},alterAllRetrieval:function(e,t){var n=t.taskId,r=t.task;(e.retrieved.includes(n)||e.retrieving.includes(n))&&h.default.set(e.allRetrieval,n,Object.assign({},e.allRetrieval[n]||{},r))},setCategoryData:function(e,t){e.categoryData=t},setRetrievingList:function(e,t){e.retrieving=t},setretrievedList:function(e,t){e.retrieved=t},pushRetrievingList:function(e,t){var n;(n=e.retrieving).unshift.apply(n,Object(f.a)(t))},pushRetrievedList:function(e,t){var n;(n=e.retrieved).unshift.apply(n,Object(f.a)(t))},removeRetrieving:function(e,t){t.forEach((function(t){var n=e.retrieving.findIndex((function(e){return e===t}));n>-1&&e.retrieving.splice(n,1)}))},removeRetrieved:function(e,t){t.forEach((function(t){var n=e.retrieved.findIndex((function(e){return e===t}));n>-1&&e.retrieved.splice(n,1)}))},reset:function(e){Object.assign(e,O())},setExtraTaskInfo:function(e,t){var n=t.taskId,r=t.taskExtras;h.default.set(e.extraTaskInfo,n,r)}};!function(e){e.Unkown="Unkown",e.Downloading="Downloading",e.Completed="Completed",e.Recycle="Recycle"}(r||(r={}));var I={getCategoryData:function(e){var t=e.rootState,n=(e.state,e.commit);return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.callServer)("IsCategoryLoaded");case 2:return e.next=4,Object(v.callServer)("IsLoadStorageTaskFinish");case 4:return e.next=6,Object(v.callServer)("GetCategoryFromUserId","ThunderPanPlugin",t.users.curUser.userId,"ThunderPan Download Category");case 6:r=e.sent,n("setCategoryData",r);case 8:case"end":return e.stop()}}),e)})))},init:function(e){var t=e.dispatch,n=(e.rootState,e.state),h=e.commit,m=e.getters;return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var y,w,T,i,_,O,E,C,P,I,j,F,D=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("getCategoryData");case 2:if(!(y=n.categoryData)){e.next=34;break}return e.next=6,Object(v.callServer)("GetCategoryTaskList",y.categoryId,"Downloading");case 6:return w=e.sent,e.next=9,Object(v.callServer)("GetTaskBaseInfos",w);case 9:for((T=e.sent).sort((function(a,b){return b.createTime-a.createTime})),i=T.length-1;i>-1;--i)_=T[i],O=_.taskId,h("setAllRetrieval",{taskId:O,task:_});return h("setRetrievingList",T.map((function(e){return e.taskId}))),e.next=15,Object(v.callServer)("GetCategoryTaskList",y.categoryId,"Completed");case 15:return E=e.sent,e.next=18,Object(v.callServer)("GetTaskBaseInfos",E);case 18:(C=e.sent).sort((function(a,b){return b.createTime-a.createTime})),console.log("downloadedTaskBaseInfos",C),P=C.length-1;case 22:if(!(P>-1)){e.next=33;break}return I=C[P],j=I.taskId,h("setAllRetrieval",{taskId:j,task:I}),e.next=28,Object(v.getRetrievalTaskExtras)(j);case 28:F=e.sent,h("setExtraTaskInfo",{taskId:j,taskExtras:F});case 30:--P,e.next=22;break;case 33:h("setretrievedList",C.map((function(e){return e.taskId})));case 34:o=Object(v.attachEvent)("OnTaskInserted",(function(e,t,o,c){return R(D,void 0,void 0,regeneratorRuntime.mark((function e(){var l,d,x,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==(null===(l=null==n?void 0:n.categoryData)||void 0===l?void 0:l.categoryId)){e.next=22;break}if(e.prev=1,x=JSON.parse(c),o!==r.Downloading){e.next=11;break}return e.next=6,Object(v.callServer)("GetTaskBaseInfos",x);case 6:d=e.sent,k=[m.retrievingList].concat(Object(f.a)(d)).sort((function(a,b){return b.createTime-a.createTime})).map((function(e){return e.taskId})),h("setRetrievingList",k),e.next=16;break;case 11:if(o!==r.Completed){e.next=16;break}return e.next=14,Object(v.callServer)("GetTaskBaseInfos",x);case 14:d=e.sent,h("pushRetrievedList",x);case 16:d.forEach((function(e){h("alterAllRetrieval",{taskId:e.taskId,task:d})})),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(1),console.error("OnTaskInserted error",e.t0);case 22:case"end":return e.stop()}}),e,null,[[1,19]])})))})),c=Object(v.attachEvent)("OnTaskRemoved",(function(e,t,o,c){var l;if(t===(null===(l=null==n?void 0:n.categoryData)||void 0===l?void 0:l.categoryId))try{var d=JSON.parse(c);o===r.Downloading?h("removeRetrieving",d):o===r.Completed&&h("removeRetrieved",d)}catch(e){console.error("OnTaskRemoved error",e)}})),l=Object(v.attachEvent)("OnTaskStatusChanged",(function(e,r){return R(D,void 0,void 0,regeneratorRuntime.mark((function e(){var o,c,l,d,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=JSON.parse(r),c=Object.keys(o),0!==(l=c.filter((function(e){return n.retrieving.includes(Number(e))||n.retrieved.includes(Number(e))}))).length){e.next=6;break}return e.abrupt("return");case 6:return d=[],l.forEach((function(e){d.push(Number(e))})),e.next=10,Object(v.callServer)("GetTaskBaseInfos",d);case 10:e.sent.forEach((function(e){return R(f,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h("alterAllRetrieval",{taskId:e.taskId,task:e}),![S.Succeeded,S.Failed,S.Stopped].includes(e.taskStatus)){n.next=8;break}return n.next=4,Object(x.getRetrievalManager)();case 4:return r=n.sent,n.next=7,r.checkRetrievalTask();case 7:e.taskStatus===S.Succeeded?(Object(k.eventTrack)("transmission_getback_finish",{result:"success"}),t("setFileExist",{taskId:e.taskId,isExist:1}),r.done(e.taskId)):e.taskStatus===S.Failed&&Object(k.eventTrack)("transmission_getback_finish",{result:"fail"});case 8:case"end":return n.stop()}}),n)})))})),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("OnTaskStatusChanged error",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))})),d=Object(v.attachEvent)("OnTaskDetailChanged",(function(e,t){try{var r=JSON.parse(t),o=Object.keys(r);if(0===o.filter((function(e){return n.retrieving.includes(Number(e))||n.retrieved.includes(Number(e))})).length)return;o.forEach((function(e){h("alterAllRetrieval",{taskId:Number(e),task:Object.assign({},r[e])})}))}catch(e){console.error("OnTaskStatusChanged error",e)}}));case 38:case"end":return e.stop()}}),e)})))},clearListener:function(){return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(y.i)("OnTaskInserted",o),Object(y.i)("OnTaskRemoved",c),Object(y.i)("OnTaskStatusChanged",l),Object(y.i)("OnTaskDetailChanged",d),e.next=6,Object(x.getRetrievalManager)();case 6:return t=e.sent,e.next=9,t.destory();case 9:case"end":return e.stop()}}),e)})))},batchDelete:function(e,t){var n=e.commit,r=t.taskIds,o=t.deleteFile;return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.getRetrievalManager)();case 2:return t=e.sent,e.next=5,t.deleteTasks(r,o);case 5:n("removeRetrieved",r),r.forEach((function(e){n("deleteAllRetrieval",e)}));case 7:case"end":return e.stop()}}),e)})))},resume:function(e,t){e.commit;return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.getRetrievalManager)();case 2:return n=e.sent,e.next=5,n.resume(t);case 5:case"end":return e.stop()}}),e)})))},ipcBatchStart:function(e,t){e.commit;return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(v.callRemote)("ThunderPanPluginWebview","IpcBatchStart",t));case 1:case"end":return e.stop()}}),e)})))},batchStop:function(e,t){e.commit;var n=t.taskIds,r=t.stopReason;return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.getRetrievalManager)();case 2:return t=e.sent,e.next=5,t.stopTasks(n,r);case 5:case"end":return e.stop()}}),e)})))},startRetrieval:function(e,t){e.commit;var n=e.dispatch,r=t.fileIds,o=t.defaultPath;return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=4;break}return e.next=3,Object(v.getConfig)("ThunderPanPlugin","defaultDownloadPath","");case 3:o=e.sent;case 4:if(!o){e.next=20;break}return e.prev=5,e.next=8,n("createTaskInfoFromFileIds",{path:o,fileIds:r});case 8:if(!((t=e.sent).length>0)){e.next=15;break}return e.next=12,Object(x.getRetrievalManager)();case 12:return c=e.sent,e.next=15,c.add(t);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[5,17]])})))},ipcStartRetrieval:function(e,t){e.commit;var n=t.fileIds,r=t.defaultPath;return Object(v.callRemote)("ThunderPanPluginWebview","IpcStartRetrieval",n,r)},setFileExist:function(e,t){var n=e.commit,r=e.state,o=t.taskId,c=t.isExist;return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.getRetrievalManager)();case 2:e.sent.setFileExist(o,c),n("setExtraTaskInfo",{taskId:o,taskExtras:Object.assign(Object.assign({},r.extraTaskInfo[o]),{fileExist:c})});case 5:case"end":return e.stop()}}),e)})))},createTaskInfoFromFileIds:function(e,t){var n=e.state,r=e.dispatch,path=t.path,o=t.fileIds;return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,c,l,d,f,h,v,m,x,R,S,O,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,Object(y.b)(o);case 3:if(c=e.sent,l=0,d=0,f=0,!c.files){e.next=37;break}h=0;case 9:if(!(h<c.files.length)){e.next=22;break}if("drive#folder"!==(v=c.files[h]).kind){e.next=18;break}return e.next=14,r("traverseFileFolder",{folderFileId:v.id,folderName:v.name});case 14:e.sent.forEach((function(e){if(e.web_content_link){var r=e.links[Object.keys(e.links)[0]].expire,o=e.links[Object.keys(e.links)[0]].token,c={taskType:1,taskBaseInfo:{taskName:e.name||"download",savePath:"".concat(path,"\\").concat(e.retrievalPath)},p2spTaskInfo:{nameFixed:1,url:e.web_content_link||""},categoryId:n.categoryData.categoryId,fileId:e.id,linkExpire:r,token:o};t.push(c),d++}else Object(k.eventTrack)("transmission_getback_finish",{result:"fail",error_code:{STATUS_SENSITIVE_WORD:"sensitive",STATUS_SENSITIVE_RESOURCE:""}[e.audit.status],file_type:e.file_extension}),l++})),e.next=19;break;case 18:"drive#file"===v.kind&&(v.web_content_link?(m=v.links[Object.keys(v.links)[0]].expire,x=v.links[Object.keys(v.links)[0]].token,R={taskType:1,taskBaseInfo:{taskName:v.name||"download",savePath:path},p2spTaskInfo:{nameFixed:1,url:v.web_content_link||""},categoryId:n.categoryData.categoryId,fileId:v.id,linkExpire:m,token:x},f+=Number(v.size)||0,t.push(R),d++):(Object(k.eventTrack)("transmission_getback_finish",{result:"fail",error_code:{STATUS_SENSITIVE_WORD:"sensitive",STATUS_SENSITIVE_RESOURCE:""}[v.audit.status],file_type:v.file_extension}),l++));case 19:h++,e.next=9;break;case 22:if(S="",O="success",E=Object(T.getFreePartitionSpace)(path),!(f>E)){e.next=28;break}return Object(_.createFetchBackBW)(),e.abrupt("return",[]);case 28:if(d>0&&(S="".concat(d,"个取回任务创建成功, ")),l>0&&(S+="".concat(l,"个取回任务创建失败"),O=d>0?"warning":"error"),!(d+l>0)){e.next=35;break}return Object(w.showMessage)({message:"".concat(S).concat(d>0?", 请到传输列表查看":""),type:O,duration:3e3,position:"middle"}),e.abrupt("return",t);case 35:return Object(w.showMessage)({message:"文件夹为空",type:"warning",duration:3e3,position:"middle"}),e.abrupt("return",[]);case 37:case"end":return e.stop()}}),e)})))},traverseFileFolder:function(e,t){var n=e.dispatch,r=t.folderFileId,o=t.folderName;return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,c,l,d,h,v,i,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.j)(r,"");case 2:if(t=e.sent,c=[],!t.files){e.next=28;break}return l=t.files.filter((function(e){return"drive#file"===e.kind})),e.next=8,Object(y.b)(l.map((function(e){return e.id})));case 8:d=e.sent,(h=d.files).forEach((function(e){e.retrievalPath=o})),c.push.apply(c,Object(f.a)(h)),v=t.files.filter((function(e){return"drive#folder"===e.kind})),i=0;case 14:if(!(i<v.length)){e.next=27;break}return m=v[i],e.t0=c.push,e.t1=c,e.t2=f.a,e.next=21,n("traverseFileFolder",{folderFileId:m.id,folderName:"".concat(o,"/").concat(m.name)});case 21:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 24:i++,e.next=14;break;case 27:return e.abrupt("return",c);case 28:case"end":return e.stop()}}),e)})))},pauseAllTask:function(e){var t=e.state;return R(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.retrieving.length>0)){e.next=5;break}return e.next=3,Object(x.getRetrievalManager)();case 3:e.sent.stopTasks(t.retrieving,m.TaskStopReason.PauseAll);case 5:case"end":return e.stop()}}),e)})))}}},528:function(e,t,n){e.exports=n.p+"img/b579748.png"},53:function(e,t){e.exports=require("path")},542:function(e,t,n){e.exports=n(981)},565:function(e,t,n){"use strict";var r=n(264);n.n(r).a},566:function(e,t,n){(t=n(78)(!1)).push([e.i,".nuxt-progress{position:fixed;top:0;left:0;right:0;height:2px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#fff;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:red}",""]),e.exports=t},567:function(e,t,n){"use strict";var r=n(265);n.n(r).a},568:function(e,t,n){var r=n(78),o=n(181),c=n(528),l=n(569),d=n(570),f=n(571),h=n(572),v=n(573);t=r(!1);var m=o(c),x=o(l),k=o(d),y=o(f),w=o(h),T=o(v);t.push([e.i,".xly-client{height:100vh;display:flex;background:linear-gradient(90deg,#2670ea 100px,transparent 0)}.xly-client__aside{width:100px;height:100%}.xly-client__main{display:flex;flex-direction:column;width:calc(100% - 100px);height:100%}.xly-client__header{display:flex;justify-content:space-between;align-items:center;margin-top:2px;padding-bottom:2px;height:40px;background:#fff;border-bottom:1px solid var(--color-border);box-sizing:border-box}.xly-client__content{position:relative;flex:1;overflow:hidden}.xly-client__page{position:absolute;width:100%;height:100%;overflow:hidden;opacity:0;pointer-events:none}.xly-client__page.is-show{opacity:1;pointer-events:visible}.xly-client__back{display:flex;align-items:center;margin-left:24px;cursor:pointer}.xly-client__back i{margin-right:6px}.xly-client__back:hover{color:var(--color-primary)}.xly-client-operate{display:flex;justify-content:flex-end;align-items:center;padding-right:12px}.xly-client-operate a{width:30px;height:30px;line-height:30px;color:#ccc}.xly-client-operate a:hover i{background:#f5f5f5;border-radius:3px}.xly-client-operate a:hover i.xly-icon-close{color:#eee;background:var(--color-danger)}.xly-client-operate i{font-size:30px}.xly-client-side{display:flex;flex-direction:column;width:380px;height:100%}.xly-down{display:flex;height:calc(100vh - 42px)}.xly-down__main{height:100%;flex:1;background:var(--background);overflow:scroll}.xly-down__main::-webkit-scrollbar{width:6px;background:transparent}.xly-down__main::-webkit-scrollbar:horizontal{height:6px}.xly-down__main::-webkit-scrollbar-thumb{border-radius:2px;width:6px;background:#e6e6e6}.xly-down__main::-webkit-scrollbar-thumb:hover{background:#ccc}.xly-netdisk{display:flex;height:100vh}.xly-netdisk__main{height:100%;flex:1;background:var(--background);overflow:auto}.xly-netdisk__main::-webkit-scrollbar{width:6px;background:transparent}.xly-netdisk__main::-webkit-scrollbar:horizontal{height:6px}.xly-netdisk__main::-webkit-scrollbar-thumb{border-radius:2px;width:6px;background:#e6e6e6}.xly-netdisk__main::-webkit-scrollbar-thumb:hover{background:#ccc}.xly-preview{position:relative;display:flex;flex-direction:column;justify-content:center;align-items:center;height:38.28vh;background-color:#000;background-image:url("+m+");background-size:cover;background-position:50%;background-repeat:no-repeat}.xly-preview img{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.xly-preview .td-button{width:114px}.xly-preview__text{margin-bottom:12px;color:#fff}.xly-preview__play{position:absolute;top:50%;left:50%;display:flex;justify-content:center;align-items:center;margin:-30px 0 0 -30px;width:60px;height:60px;background:rgba(0,0,0,.5);border-radius:50%;text-indent:5px;cursor:pointer;transition:background .2s}.xly-preview__play:hover{background:hsla(0,0%,100%,.1)}.xly-preview__play i{color:#fff;font-size:24px}.xly-preview__button{position:absolute;top:50%;margin-top:-15px;width:100%;display:flex;justify-content:center;align-items:center}.xly-preview__button .td-button{width:114px}.xly-preview__loading{position:absolute;display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;color:#fff}.xly-preview__loading i.img-icon-loading{width:48px;height:48px;background:url("+x+") no-repeat;background-size:100%;-webkit-animation:rotate 2s linear infinite both;animation:rotate 2s linear infinite both}@-webkit-keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(1turn)}}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.xly-preview__loading p{margin-top:6px}.xly-preview.is-vip{background-image:url("+k+")}.xly-preview.is-vip .xly-preview__loading{color:#edd59f}.xly-preview.is-vip .img-icon-loading{margin-top:6px;background:url("+y+') no-repeat;background-size:1536px 48px;-webkit-animation:ani 1.5s steps(31) infinite both;animation:ani 1.5s steps(31) infinite both}@-webkit-keyframes ani{0%{background-position:0 0}to{background-position:-1488px 0}}@keyframes ani{0%{background-position:0 0}to{background-position:-1488px 0}}.xly-preview__progress{position:relative;display:block;margin:8px auto 0;width:156px;height:1px;overflow:hidden;-webkit-mask:linear-gradient(90deg,#000 80%,transparent)}.xly-preview__progress:after{position:absolute;width:156px;height:1px;background:linear-gradient(90deg,transparent 0,#edd59f 40%,#edd59f 60%,transparent);-webkit-animation:progress 1.5s linear infinite;animation:progress 1.5s linear infinite;content:""}@-webkit-keyframes progress{0%{transform:scaleX(0);transform-origin:left center}50%{transform:scaleX(1)}to{transform:translateX(100%) scaleX(1)}}@keyframes progress{0%{transform:scaleX(0);transform-origin:left center}50%{transform:scaleX(1)}to{transform:translateX(100%) scaleX(1)}}.xly-preview.is-picture{background:#000;cursor:zoom-in}.xly-preview.is-picture-recycle{background-image:url('+w+")}.xly-preview.is-music{background-image:url("+T+")}",""]),e.exports=t},569:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAMAAADVRocKAAAAQlBMVEUAAABhm/9hm/9fmv9inP9knf9hm/9mnv9hm/9hm/9gm/9hm/9upf9hm/9im/+BsP9hm/9inP9hm/9hm/9BiP9gm/+gP8MaAAAAFXRSTlMAsm6OGp5RDy1+698FN0Miwl/S9/3Bi6+JAAABn0lEQVRo3u3XQZKsIAyA4UAIJLYg6HD/q74Gday366oms+I/AF8RNgRms9lsNpvN/rhY0LyWWmkDhVhyvfsZL0R61Xoct0AwNsZXa1l+hQAjK2bPed+7oAA4ycaYRxg9IoeG6BGO0Y+8ISHdwnIs7Ra0jZwPCiI24X0DEs8ujJx/sPKuC9kIw/C8WNsFUjke2BbbBaIECgVfShdQGDSK3vsmiDjQKKR0CRuoxOkULINKK8fYhJJAp8CXEEAnt3XBM+i0ukvQusAaToFBpQZ0ITq40hKeCSkJKzypCJ8A6/qFAB8UwhcCfJD7QvhoQq4Leq2bshBYWXBRWeDITVADQoqnoAWwvwTQKXifuhBAp1QuQWlCbItvQmJQabO2nILOhJzIJUTQiAXFNqHo/D0SkUgTdD5nLIYQuyBe5fhM1IRGDN16gmMvtO/ZmAag4Mjf90bL0pbNZc/ZNIGQcOTS+VPftWVzvwWDDsZF9QQeIQ/dTkKt/wu7KQAKQBdayDA2+hWOWl8UYXDtke+yzuq5Ua3Ly2CJMJvNZrPZbPa3/QN26hvznpnNhgAAAABJRU5ErkJggg=="},570:function(e,t,n){e.exports=n.p+"img/d1fc72a.png"},571:function(e,t,n){e.exports=n.p+"img/6437864.png"},572:function(e,t,n){e.exports=n.p+"img/d8ff1e1.png"},573:function(e,t,n){e.exports=n.p+"img/b10ff33.png"},574:function(e,t,n){"use strict";var r=n(266);n.n(r).a},575:function(e,t,n){var r=n(78),o=n(181),c=n(524);t=r(!1);var l=o(c);t.push([e.i,"@font-face{font-family:xly-icon;src:url("+l+') format("woff")}[class*=" xly-icon-"],[class^=xly-icon]{font-family:xly-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.xly-icon-add:before{content:"\\e74a"}.xly-icon-menu:before{content:"\\e74b"}.xly-icon-search:before{content:"\\e74c"}.xly-icon-nav-find:before{content:"\\e74d"}.xly-icon-nav-message:before{content:"\\e74e"}.xly-icon-nav-down:before{content:"\\e74f"}.xly-icon-share:before{content:"\\e750"}.xly-icon-theme:before{content:"\\e751"}.xly-icon-nav-cloud:before{content:"\\e752"}.xly-icon-link:before{content:"\\e661"}.xly-icon-send:before{content:"\\e63e"}.xly-icon-face:before{content:"\\e642"}.xly-icon-img:before{content:"\\e68f"}.xly-icon-maximize:before{content:"\\e753"}.xly-icon-minimize:before{content:"\\e754"}.xly-icon-close:before{content:"\\e755"}.xly-icon-download:before{content:"\\e75a"}.xly-icon-pause:before{content:"\\e759"}.xly-icon-praise:before{content:"\\e758"}.xly-icon-note:before{content:"\\e757"}.xly-icon-more:before{content:"\\e756"}.xly-icon-add-tab:before{content:"\\e75c"}.xly-icon-fav:before{content:"\\e75d"}.xly-icon-delete-comment:before{content:"\\e75e"}.xly-icon-comment:before{content:"\\e75f"}.xly-icon-resize:before{content:"\\e761"}.xly-icon-arrow-right:before{content:"\\e762"}.xly-icon-rename:before{content:"\\e763"}.xly-icon-file:before{content:"\\e760"}.xly-icon-open:before{content:"\\e764"}.xly-icon-restore:before{content:"\\e765"}.xly-icon-clear:before{content:"\\e766"}.xly-icon-play:before{content:"\\e767"}.xly-icon-close-small:before{content:"\\e768"}.xly-icon-help:before{content:"\\e769"}.xly-icon-clear-1:before{content:"\\e76a"}.xly-icon-upload:before{content:"\\e76b"}.xly-icon-retry:before{content:"\\e76c"}.xly-icon-logo:before{content:"\\e76f"}.xly-icon-drag:before{content:"\\e76d"}.xly-icon-transport:before{content:"\\e76e"}.xly-icon-sequence:before{content:"\\e770"}.xly-icon-success:before{content:"\\e771"}.xly-icon-refresh:before{content:"\\e772"}.xly-icon-copy:before{content:"\\e773"}.xly-icon-arrow-down:before{content:"\\e774"}.xly-icon-play-detail:before{content:"\\e775"}.xly-icon-magnifier:before{content:"\\e77c"}.xly-icon-collapse:before{content:"\\e778"}.xly-icon-report-fill:before{content:"\\e779"}.xly-icon-comment-fill:before{content:"\\e77a"}.xly-icon-quote:before{content:"\\e77b"}.xly-icon-hot:before{content:"\\e777"}.xly-icon-delete:before{content:"\\e776"}.xly-icon-sort:before{content:"\\e77d"}.xly-icon-upload-total:before{content:"\\e77e"}.xly-icon-time:before{content:"\\e77f"}.xly-icon-user:before{content:"\\e780"}.xly-icon-peak-upload:before{content:"\\e781"}.xly-icon-speed:before{content:"\\e782"}.xly-icon-peak-download:before{content:"\\e783"}.xly-icon-file-1:before{content:"\\e784"}.xly-icon-download-total:before{content:"\\e785"}.xly-icon-luky:before{content:"\\e786"}.xly-icon-qzone:before{content:"\\e787"}.xly-icon-qq:before{content:"\\e788"}.xly-icon-net:before{content:"\\e696"}.xly-icon-disk:before{content:"\\e78a"}.xly-icon-refresh-1:before{content:"\\e789"}.xly-icon-arrow-right-1:before{content:"\\e78c"}.xly-icon-arrow-left:before{content:"\\e78b"}.xly-icon-history:before{content:"\\e78e"}.xly-icon-search-1:before{content:"\\e78f"}.xly-icon-close-search:before{content:"\\e790"}.xly-icon-success-fill:before{content:"\\e78d"}.xly-icon-minimize-small:before{content:"\\e791"}.xly-icon-maximize-small:before{content:"\\e793"}.xly-icon-magnify:before{content:"\\e794"}.xly-icon-ratio:before{content:"\\e795"}.xly-icon-minify:before{content:"\\e796"}.xly-icon-reduce-small:before{content:"\\e792"}.xly-icon-reduce:before{content:"\\e797"}.xly-icon-eye:before{content:"\\e79c"}.xly-icon-eye-open:before{content:"\\e79d"}.xly-icon-arrow-down-1:before{content:"\\e798"}.xly-icon-alipay:before{content:"\\e79b"}.xly-icon-wechat:before{content:"\\e799"}.xly-icon-weibo:before{content:"\\e79a"}.xly-icon-parse:before{content:"\\e79e"}.xly-icon-loading{color:var(--color-secondary);-webkit-animation:loading 2s linear infinite both;animation:loading 2s linear infinite both}.xly-icon-loading:before{content:"\\e79f"}@-webkit-keyframes loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}@keyframes loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.xly-icon-vip:before{content:"\\e7a0"}.xly-icon-super:before{content:"\\e7a1"}.xly-icon-time-1:before{content:"\\e7a2"}.xly-icon-speed-1:before{content:"\\e7a3"}.xly-icon-together:before{content:"\\e7a4"}.xly-icon-note-bold:before{content:"\\e7a5"}.xly-icon-skip:before{content:"\\e7a6"}.xly-icon-replace:before{content:"\\e7a7"}.xly-icon-cast-screen:before{content:"\\e7a9"}.xly-icon-back:before{content:"\\e7ab"}.xly-icon-ratio-optimal:before{content:"\\e7aa"}.xly-icon-open-file:before{content:"\\e7ad"}.xly-icon-fav-fill:before{content:"\\e7ac"}.xly-icon-play-small:before{content:"\\e7ae"}.xly-icon-file-small:before{content:"\\e7af"}.xly-icon-open-small:before{content:"\\e7b0"}',""]),e.exports=t},576:function(e,t,n){"use strict";var r=n(267);n.n(r).a},577:function(e,t,n){var r=n(78),o=n(181),c=n(525);t=r(!1);var l=o(c);t.push([e.i,".xly-icon-type{display:inline-block;width:30px;height:30px;background:url("+l+") -125px -125px no-repeat;background-size:210px auto}.xly-icon-type.is-middle{zoom:.8}.xly-icon-type.is-small{zoom:.5333}.xly-icon-type.xly-type-apk{background-position:-5px -5px}.xly-icon-type.xly-type-bt-file{background-position:-45px -5px}.xly-icon-type.xly-type-bt-link{background-position:-5px -45px}.xly-icon-type.xly-type-doc{background-position:-45px -45px}.xly-icon-type.xly-type-group{background-position:-85px -5px}.xly-icon-type.xly-type-link{background-position:-85px -45px}.xly-icon-type.xly-type-magnetic{background-position:-5px -85px}.xly-icon-type.xly-type-music{background-position:-45px -85px}.xly-icon-type.xly-type-pdf{background-position:-85px -85px}.xly-icon-type.xly-type-pic{background-position:-125px -5px}.xly-icon-type.xly-type-ppt{background-position:-125px -45px}.xly-icon-type.xly-type-rar{background-position:-125px -85px}.xly-icon-type.xly-type-save{background-position:-45px -125px}.xly-icon-type.xly-type-txt{background-position:-85px -125px}.xly-icon-type.xly-type-unknow{background-position:-125px -125px}.xly-icon-type.xly-type-avi,.xly-icon-type.xly-type-flv,.xly-icon-type.xly-type-mkv,.xly-icon-type.xly-type-mov,.xly-icon-type.xly-type-mp4,.xly-icon-type.xly-type-mpg,.xly-icon-type.xly-type-rm,.xly-icon-type.xly-type-rmvb,.xly-icon-type.xly-type-video,.xly-icon-type.xly-type-wmv{background-position:-165px -5px}.xly-icon-type.xly-type-word{background-position:-165px -45px}.xly-icon-type.xly-type-xls{background-position:-165px -85px}.xly-icon-type.xly-type-saveto{background-position:-45px -125px}.xly-icon-type.xly-type-resource{background-position:-5px -125px}.xly-icon-type.xly-type-gif{background-position:-165px -125px}.xly-icon-type.xly-type-ipa{background-position:-5px -165px}.xly-icon-type.xly-type-ipsw{background-position:-45px -165px}.xly-icon-type.xly-type-dll{background-position:-85px -165px}.xly-icon-type.xly-type-chm{background-position:-125px -165px}.xly-icon-type.xly-type-text{background-position:-165px -165px}.xly-icon-type.xly-type-install{background-position:-5px -205px}.xly-icon-type.xly-type-iso{background-position:-45px -205px}",""]),e.exports=t},578:function(e,t,n){"use strict";var r=n(268);n.n(r).a},579:function(e,t,n){var r=n(78),o=n(181),c=n(520),l=n(521);t=r(!1);var d=o(c),f=o(l);t.push([e.i,'pre{font-family:microsoft yahei,-apple-system,PingFang SC,simsun,Arial,sans-serif}body::-webkit-scrollbar{width:8px;background:transparent}body::-webkit-scrollbar:horizontal{height:8px}body::-webkit-scrollbar-thumb{border-radius:2px;width:8px;background:#e6e6e6}body::-webkit-scrollbar-thumb:hover{background:#ccc}body .td-checkbox .td-checkbox__inner{width:14px;height:14px;border-color:#e6e6e6}body .td-checkbox .td-checkbox__inner:hover{border-color:var(--color-primary)}body .td-checkbox .td-checkbox__inner:checked:before{left:2px;width:7px;border-width:2px;border-color:var(--color-primary)}body .td-checkbox .td-checkbox__inner:checked{background:unset}body .td-checkbox.is-indeterminate .td-checkbox__inner{background:unset;border-color:var(--color-border)}body .td-checkbox.is-indeterminate .td-checkbox__inner:before{top:50%;left:50%;width:6px;height:6px;background:var(--color-primary);border:unset;transform:translate3d(-50%,-50%,0)}body .td-checkbox.is-indeterminate .td-checkbox__inner:hover{border-color:var(--color-primary)}body .td-checkbox.is-disabled .td-checkbox__inner,body .td-checkbox.is-disabled .td-checkbox__inner:checked{background:#f5f5f5;border:1px solid #e6e6e6}body .td-checkbox.is-disabled .td-checkbox__inner:checked:before{border-color:#ccc}body .td-icon-success:before{content:"\\e7a8"}.xly-line{width:1px;height:10px;margin:0 4px;background:#e6e6e6}.td-radio__inner,.td-select-group,.td-select-group:hover{border-color:var(--color-border)}.td-radio__inner{width:14px;height:14px}.td-radio__inner:checked{border-color:var(--color-border)}.td-radio__inner:checked:after{width:7px;height:7px}.td-table{background:unset}.td-table th{height:23px;border-bottom:unset}.td-table td{height:28px;border-bottom:unset}.td-button.td-button--large{font-size:14px}.td-button.td-button--other{border-color:#ccccc0}.td-button.td-button--other:hover{color:var(--color-primary);border-color:#ccc}.td-button.td-button--other:active{background:#eff6fe;border-color:var(--color-primary)}.xly-img-empty-netdisk{width:160px;height:140px;background:url('+d+") no-repeat;background-size:100% auto}.xly-img-network{width:160px;height:140px;background:url("+f+') no-repeat;background-size:100% auto}.xly-empty{display:flex;justify-content:center;align-items:center;width:100%;height:100%}.xly-empty i.xly-icon-logo{font-size:120px;color:#e6e6e6}.xly-error{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%}.xly-error p{margin:20px 0 22px;color:var(--color-secondary)}.xly-error .td-button{width:72px}body .td-cover .td-icon-error,body .td-cover .td-icon-warning{font-family:xly-icon!important}body .td-cover .td-icon-error:before,body .td-cover .td-icon-warning:before{content:"\\e757"}body .td-cover .td-icon-success:before{font-family:xly-icon!important;content:"\\e7a8"}body .td-cover .td-message__text{margin-left:12px}body .td-cover .td-message--error{color:#fff;background:#e66056}body .td-cover .td-message--warning{color:#fff;background:#ff9700}body .td-cover .td-message--success{color:#fff;background:#38b878}body .td-button.td-button--other{font-size:12px}body .td-button.td-button--other:hover{border-color:#ccc}body .td-button.td-button--other:active{border:1px solid #c2d7ff}body .td-button.td-button--other.is-disabled{color:#ccc;background:transparent;border-color:#e6e6e6}',""]),e.exports=t},58:function(e,t,n){"use strict";n.r(t),n.d(t,"createLocalBrowserWindow",(function(){return k})),n.d(t,"createShareBW",(function(){return y})),n.d(t,"createFetchBackBW",(function(){return w})),n.d(t,"getTransferWindow",(function(){return T})),n.d(t,"createTreePathBrowserWindow",(function(){return _})),n.d(t,"getXmpPlayingFile",(function(){return R})),n.d(t,"fitWindowPosInParent",(function(){return S}));n(24),n(10),n(1);var r,o=n(109),c=n.n(o),l=n(53),d=n.n(l),f=(n(75),n(74)),h=n(3),v=n(230),m=n(203),x=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))};function k(e,t){return x(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,l,h;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.electron.BrowserWindow.__resolve();case 2:return r=n.sent,n.next=5,c.a.getCurrentWindow().__resolve();case 5:return o=n.sent,t.parent||(t.parent=o),n.next=9,new r(Object.assign(Object.assign({},t),{webPreferences:{preload:d.a.join(window.__rootDir,"out/plugin-boot.js")},show:!1,alwaysOnTop:!0}));case 9:return S(l=n.sent,t.parent),l.once("ready-to-show",(function(){l.show()})),l.once("closed",(function(){o.focus()})),h=d.a.resolve(process.execPath,"../resources/app/plugins/ThunderPanPlugin/".concat(f.version,"/index.html")).replace(/\\/g,"/"),n.next=16,l.loadURL("".concat(h,"#").concat(e));case 16:return n.abrupt("return",l);case 17:case"end":return n.stop()}}),n)})))}function y(){return x(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/bw/share",{width:500,height:267,frame:!1,modal:!0,resizable:!1});case 2:t=e.sent,h.a.callServerFunction("RoundRectWindow",t.id);case 4:case"end":return e.stop()}}),e)})))}function w(){return x(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/bw/fetch-back",{width:450,height:290,frame:!1,modal:!0,center:!0,resizable:!1});case 2:t=e.sent,h.a.callServerFunction("RoundRectWindow",t.id),t.webContents.openDevTools();case 5:case"end":return e.stop()}}),e)})))}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return x(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=8;break}return t.next=3,k("/transfer?tab=".concat(e),{width:434,height:604,frame:!1,center:!0,resizable:!1});case 3:n=t.sent,h.a.callServerFunction("RoundRectWindow",n.id),n.on("close",(function(){r=null})),r=n;case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t)})))}function _(e){var t=this;return new Promise((function(n,r){return x(t,void 0,void 0,regeneratorRuntime.mark((function t(){var o,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=7;break}return t.next=3,c.a.electron.BrowserWindow.__resolve();case 3:return l=t.sent,t.next=6,l.fromId(e);case 6:o=t.sent;case 7:return t.prev=7,t.next=10,k("/bw/tree-path",{width:450,height:316,frame:!1,modal:!0,center:!0,resizable:!1,parent:o});case 10:d=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),r(t.t0);case 16:h.a.callServerFunction("RoundRectWindow",d.id),m.treePathResolveObj.resolve=n,h.a.checkRemoteFunction("ThunderPanPluginWebview","TreePath").then((function(e){e||h.a.registerFunctions({TreePath:function(e,t){m.treePathResolveObj.resolve(t)}})}));case 19:case"end":return t.stop()}}),t,null,[[7,13]])})))}))}function R(){var e;return x(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.a.callRemoteClientFunction("main-process","GetCurrentMediaAttribute",4124);case 2:if(t.t1=e=t.sent,t.t0=null===t.t1,t.t0){t.next=6;break}t.t0=void 0===e;case 6:if(!t.t0){t.next=10;break}t.t2=void 0,t.next=11;break;case 10:t.t2=e[0];case 11:return t.abrupt("return",t.t2);case 12:case"end":return t.stop()}}),t)})))}function S(e,t){return x(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=4;break}return n.next=3,c.a.getCurrentWindow().__resolve();case 3:e=n.sent;case 4:if(t){n.next=8;break}return n.next=7,e.getParentWindow();case 7:t=n.sent;case 8:return n.t0=v.ipcRenderer,n.next=11,e.getNativeWindowHandle();case 11:return n.t1=n.sent,n.next=14,t.getNativeWindowHandle();case 14:n.t2=n.sent,n.t0.sendSync.call(n.t0,"RM_SET_POSITION",n.t1,n.t2);case 16:case"end":return n.stop()}}),n)})))}},580:function(e,t,n){"use strict";var r=n(269);n.n(r).a},581:function(e,t,n){(t=n(78)(!1)).push([e.i,"body{--color-primary:#3f85ff;--color-default:#4d4d4d;--color-secondary:#b3b3b3;--color-hover:#2670ea;--color-danger:#ff7b5f;--color-note:#ff9701;--color-title:#1a1a1a;--color-icon:#6a707c;--color-border:#e6e6e6;--color-disabled:#ccc;--color-success:#00b36a;--background:#f5f5f5;--background-secondary:#eff6fe;--input-border-color:#eee;--button-default-fill:#3f85ff;--button-default-fill-hover:#619bff;--button-secondary-fill:#f5f5f5;--button-secondary-color:#727272;--button-disable-color:#ccc;--button-disable-fill:#f5f5f5;--button-secondary-fill-hover:#e6e6e6;--input-border-color-hover:#eee;--table-color-line:#eee;--dropdown-border-color:var(--color-border)}",""]),e.exports=t},582:function(e,t,n){"use strict";var r=n(270);n.n(r).a},583:function(e,t,n){(t=n(78)(!1)).push([e.i,'.xly-netdisk-side{width:380px;position:relative;display:flex;flex-direction:column;height:100vh;background:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.xly-netdisk-side:hover .td-collapse-item.xly-netdisk-item--recycle .xly-netdisk-list__header{background:linear-gradient(270deg,#fff,#eff6fe 97%)}.xly-netdisk-side__footer{display:flex;justify-content:space-between;align-items:center;padding:0 16px;width:100%;height:54px;border-top:1px solid var(--color-border);box-sizing:border-box}.xly-netdisk-side__footer .xly-line{height:34px}.xly-netdisk-list{flex:1;overflow:hidden}.xly-netdisk-list .td-collapse{height:100%}.xly-netdisk-list .td-collapse-item{display:flex;flex-direction:column;margin-top:0;height:42px;border:unset;transition:.3s}.xly-netdisk-list .td-collapse-item .td-collapse-item__content{position:relative}.xly-netdisk-list .td-collapse-item .td-breadcrumb__separator{line-height:16px}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle{height:30px}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle .xly-netdisk-list__header{height:30px;border-bottom:0}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle.is-active{height:calc(100% - 42px)}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle.is-active .td-collapse-item__title{background-image:linear-gradient(270deg,#fff,#eff6fe 97%)}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle.is-active .td-button{display:block}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle .xly-netdisk-list__name a{cursor:default}.xly-netdisk-list .td-collapse-item.xly-netdisk-item--recycle .xly-netdisk-list__name a:hover{color:var(--color-default)}.xly-netdisk-list .td-collapse-item.is-active{height:calc(100% - 30px)}.xly-netdisk-list .td-collapse-item.is-active .td-collapse-item__title{color:var(--color-default)}.xly-netdisk-list .td-collapse-item.is-active .td-collapse-item__content{display:flex;flex-direction:column;padding:0;flex:1}.xly-netdisk-list .td-collapse-item__content{transition:none}.xly-netdisk-list .td-checkbox{position:relative}.xly-netdisk-list .td-checkbox .td-checkbox__inner:after{position:absolute;left:50%;top:50%;width:42px;height:62px;transform:translate3d(-50%,-50%,0);content:""}.xly-netdisk-list .td-tooltip{left:50%;white-space:pre-wrap;color:var(--color-default);transform:translate(-50%);bottom:calc(100% + 4px)}.xly-netdisk-list .td-tooltip .td-poper__arrow{display:none}.xly-netdisk-list i.xly-icon-note{color:var(--color-danger)}.xly-netdisk-list__header{padding:0 16px;display:flex;justify-content:space-between;align-items:center;height:42px;border-bottom:1px solid var(--color-border);box-sizing:border-box}.xly-netdisk-list__header .td-button{display:none;width:76px;height:20px;line-height:20px;font-size:12px;text-align:center;color:var(--color-primary);background:#eff6fe;border-radius:2px}.xly-netdisk-list__header .td-button.is-disabled{color:var(--button-disable-color);background:var(--button-disable-fill)}.xly-netdisk-list__header .td-breadcrumb__item{height:42px}.xly-netdisk-list__header .td-breadcrumb__text a,.xly-netdisk-list__header .td-select__drop{color:var(--color-title)}.xly-netdisk-list__header .td-dropdown-menu{padding:6px 0}.xly-netdisk-list__header .td-dropdown-menu__item{padding:0 12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.xly-netdisk-list__items{height:calc(100% - 30px);overflow-y:auto}.xly-netdisk-list__items::-webkit-scrollbar{width:8px;background:transparent}.xly-netdisk-list__items::-webkit-scrollbar:horizontal{height:8px}.xly-netdisk-list__items::-webkit-scrollbar-thumb{border-radius:2px;width:8px;background:#e6e6e6}.xly-netdisk-list__items::-webkit-scrollbar-thumb:hover{background:#ccc}.xly-netdisk-list__item{display:flex;align-items:center;padding:12px 18px;border-bottom:1px solid #fff;box-sizing:border-box;cursor:default}.xly-netdisk-list__item:hover{background:#f6faff}.xly-netdisk-list__item .td-checkbox__label{display:none}.xly-netdisk-list__item .td-media{position:relative;margin-left:13px;flex:1}.xly-netdisk-list__item.is-chosen{background:#eff6fe}.xly-netdisk-list__name{position:relative;max-height:36px;line-height:18px;font-size:13px;-webkit-line-clamp:2;display:-webkit-box;word-break:break-all;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical}.xly-netdisk-list__name:hover{color:var(--color-primary)}.xly-netdisk-list__name span{color:var(--color-default);cursor:pointer}.xly-netdisk-list__name span:hover{color:var(--color-primary)}.xly-netdisk-list__info{display:flex;align-items:center;margin-top:4px;color:var(--color-secondary);font-size:11px}.xly-netdisk-list__count{margin-right:18px}.xly-netdisk-list__title{display:flex;justify-content:space-between;align-items:center;padding:0 18px;height:30px;color:var(--color-secondary)}.xly-netdisk-list__title .td-checkbox__label{margin-left:13px}.xly-netdisk-list__operate a{color:var(--color-icon)}.xly-netdisk-list__operate a:hover{color:var(--color-primary)}.xly-netdisk-list__operate a.is-disabled{color:var(--color-secondary);cursor:default}.xly-netdisk-list__effective{position:absolute;right:0}.xly-netdisk-list__empty{display:flex;justify-content:center;align-items:center;flex-direction:column;flex:1;padding-bottom:50px}.xly-netdisk-list__empty p{margin-top:20px;color:var(--color-secondary)}.xly-netdisk-list__input{position:relative;top:-2px;margin:8px 0 -3px}.xly-netdisk-list__input .td-input__inner{height:26px}.xly-netdisk-size{width:286px}.xly-netdisk-size__text{margin-top:6px;display:flex;justify-content:space-between;color:var(--color-secondary)}.xly-netdisk-size__link{color:var(--color-primary)}.xly-netdisk-size__link:hover{color:var(--color-hover)}.xly-netdisk-size .td-progress{height:8px}.xly-netdisk-size .td-progress .td-progress-bar{height:100%}.xly-netdisk-size .td-progress .td-progress-bar__outer{background:var(--color-border)}.xly-netdisk-size.is-warn .td-progress-bar__inner{background:var(--color-danger)}.xly-netdisk-size.is-warn .xly-netdisk-size__warn{color:var(--color-danger)}.xly-netdisk-transport{text-align:center}.xly-netdisk-transport .xly-icon-transport{display:block;font-size:24px}.xly-netdisk-transport .td-badge__content{top:6px;right:10px;padding:0 4px;font-size:10px;height:12px;line-height:12px;background-color:#ff493c}.xly-netdisk-move,.xly-netdisk-transport a:hover{color:var(--color-primary)}.xly-netdisk-move{position:fixed;padding:0 12px;line-height:30px;background:#fafcff;border-radius:4px;z-index:2}.xly-netdisk-move .xly-netdisk-move__file{display:inline-block;margin-left:4px;max-width:7em;color:var(--color-default);vertical-align:top;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;word-break:break-all}.xly-drop-more{position:fixed;padding:6px 0;width:100px;background:#fff;border-radius:4px;box-shadow:0 0 10px 0 rgba(0,0,0,.2)}.xly-drop-more__item{position:relative;padding-left:28px;line-height:30px;cursor:default}.xly-drop-more__item:hover{background:var(--background)}.xly-drop-more__item.is-chosen:before{position:absolute;top:50%;margin-top:-3px;left:9px;width:6px;height:3px;border-left:2px solid var(--color-primary);border-bottom:2px solid var(--color-primary);transform:rotate(-45deg) scale(1);content:""}.xly-netdisk-wrapper{display:flex;flex-direction:column;flex:1;height:100%}.xly-right-click{position:fixed;padding:6px 0;width:100px;background:#fff;border-radius:4px;box-shadow:0 0 10px 0 rgba(0,0,0,.2);z-index:99;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.xly-right-click__item{position:relative;padding-left:24px;line-height:30px;cursor:default}.xly-right-click__item i.xly-icon-arrow-right{position:absolute;top:1px;right:12px;color:#ccc;font-size:12px}.xly-right-click__item:hover{background:var(--background)}.xly-right-click__item.is-chosen:before{position:absolute;top:50%;margin-top:-3px;left:9px;width:6px;height:3px;border-left:2px solid var(--color-primary);border-bottom:2px solid var(--color-primary);transform:rotate(-45deg) scale(1);content:""}.xly-right-click__children{position:absolute;top:0;left:100%;padding:6px 0;width:100px;background:#fff;border-radius:4px;box-shadow:0 0 10px 0 rgba(0,0,0,.2)}.xly-right-click__children:before{position:absolute;left:-5px;width:5px;height:100%;content:""}.xly-right-click.is-upload{width:72px}.xly-right-click.is-finish{width:120px}',""]),e.exports=t},584:function(e,t,n){"use strict";var r=n(271);n.n(r).a},585:function(e,t,n){(t=n(78)(!1)).push([e.i,".xly-netdisk-note{position:relative;display:flex;justify-content:space-between;align-items:center;width:100%;padding:5px 12px;line-height:19px;color:var(--color-icon);background-color:#eaf6ff;box-sizing:border-box}.xly-netdisk-note .xly-netdisk-note__text{flex:1}.xly-netdisk-note .xly-netdisk-note__link{color:var(--color-primary)}.xly-netdisk-note .xly-netdisk-note__link:hover{color:var(--color-hover)}.xly-netdisk-note .xly-netdisk-list__my{color:#000}.xly-netdisk-note .xly-netdisk-list__my:hover{color:var(--color-primary)}.xly-netdisk-note .xly-netdisk-note__side{position:absolute;bottom:5px;right:12px;color:var(--color-primary);cursor:pointer}.xly-netdisk-note .xly-netdisk-note__side:hover{color:var(--color-hover)}.xly-netdisk-note--vip{background:#ffe7a9}.xly-netdisk-note--vip .xly-netdisk-note__text{color:#c27a13}.xly-netdisk-note--agreement{background-color:#ffedc5}.xly-netdisk-note--fixed{position:absolute;bottom:0;left:0}.xly-netdisk-note__close{margin-left:12px;cursor:pointer}",""]),e.exports=t},586:function(e,t,n){"use strict";var r=n(272);n.n(r).a},587:function(e,t,n){(t=n(78)(!1)).push([e.i,'.xly-netdisk-guide{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100vh;background:#fff}.xly-netdisk-guide__content{margin-top:15px;text-align:center}.xly-netdisk-guide__content h2{font-size:16px;font-weight:700}.xly-netdisk-guide__content p{margin-top:6px;white-space:nowrap;color:var(--color-secondary)}.xly-netdisk-guide__text{text-align:center;color:var(--color-secondary)}.xly-netdisk-guide__sub{position:absolute;top:-5px;right:-7px;width:30px;height:16px;line-height:16px;font-size:11px;text-align:center;background:#ff5d5d;border-radius:2px}.xly-netdisk-guide__sub:after{position:absolute;right:2px;bottom:-4px;width:6px;height:4px;background:#ff5d5d;-webkit-clip-path:polygon(100% 0,0 0,0 100%);clip-path:polygon(100% 0,0 0,0 100%);content:""}.xly-netdisk-guide .td-carousel{margin-top:-50px;width:176px}.xly-netdisk-guide .td-carousel__item{width:176px;height:156px}.xly-netdisk-guide .td-carousel__indicator{margin:0 6px;height:40px}.xly-netdisk-guide .td-carousel__indicator:after{width:6px;height:6px;background:#b9d3ff;border-radius:50%}.xly-netdisk-guide .td-carousel__indicator.is-active:after{background:var(--color-primary)}.xly-netdisk-guide .td-button{position:relative;margin:15px 0 6px;width:180px}',""]),e.exports=t},588:function(e,t,n){"use strict";var r=n(273);n.n(r).a},589:function(e,t,n){(t=n(78)(!1)).push([e.i,"body{--color-primary:#3f85ff;--color-default:#4d4d4d;--color-secondary:#b3b3b3;--color-hover:#2670ea;--color-danger:#ff7b5f;--color-note:#ff9701;--color-title:#1a1a1a;--color-icon:#6a707c;--color-border:#e6e6e6;--color-disabled:#ccc;--color-success:#00b36a;--background:#f5f5f5;--background-secondary:#eff6fe;--input-border-color:#eee;--button-default-fill:#3f85ff;--button-default-fill-hover:#619bff;--button-secondary-fill:#f5f5f5;--button-secondary-color:#727272;--button-disable-color:#ccc;--button-disable-fill:#f5f5f5;--button-secondary-fill-hover:#e6e6e6;--input-border-color-hover:#eee;--table-color-line:#eee;--dropdown-border-color:var(--color-border)}",""]),e.exports=t},590:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return d})),n.d(t,"mutations",(function(){return f})),n.d(t,"actions",(function(){return h})),n.d(t,"strict",(function(){return v}));n(10),n(112),n(1);var r=n(6),o=n(9),c=n(3),l=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},d={privilege:null,about:{kind:"drive#quota",usage:0,limit:0,usageInTrash:0},clientInfo:{peerId:"",version:"",numericVersion:0,deviceId:""},isImportHintShow:!1},f={setPrivilege:function(e,t){e.privilege=t},setAbout:function(e,t){e.about=t},setPeerId:function(e,t){e.clientInfo.peerId=t},setVersion:function(e,t){e.clientInfo.version=t,e.clientInfo.numericVersion=Object(o.getNumericVersion)(t)},setDeviceId:function(e,t){e.clientInfo.deviceId=t},setImportHintShow:function(e,t){e.isImportHintShow=t},reset:function(e){Object.assign(e,{privilege:null,about:{kind:"drive#quota",usage:0,limit:0,usageInTrash:0},clientInfo:{peerId:"",version:"",numericVersion:0,deviceId:""},isImportHintShow:!1})}},h={checkPrivilege:function(e,t){var n=e.commit;return r.f.checkPrivilege(t).then((function(e){return n("setPrivilege",e.result),console.log("当前特权:",t,e.result),e.result})).catch((function(e){return console.error("privilege",e.error_description)}))},getAbout:function(e){var t=e.commit;return r.f.getAbout().then((function(e){if(e.quota){var n={kind:e.quota.kind,usage:Number(e.quota.usage||0),limit:Number(e.quota.limit)};return t("setAbout",n),n}}))},registerImportHint:function(e){var t=e.commit;return l(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.a.checkRemoteFunction("ThunderPanPluginWebview","showImportHint").then((function(e){e||c.a.registerFunctions({showImportHint:function(){return t("setImportHintShow",!0)}})}));case 1:case"end":return e.stop()}}),e)})))},resetAllStore:function(e){var t=e.commit;t("reset",null),t("drive/reset",null,{root:!0}),t("local-upload/reset",null,{root:!0}),t("retrieval-list/reset",null,{root:!0}),t("share/reset",null,{root:!0}),t("users/reset",null,{root:!0}),t("url-task-list/reset",null,{root:!0})}},v=!1},6:function(e,t,n){"use strict";n.d(t,"j",(function(){return m})),n.d(t,"e",(function(){return x})),n.d(t,"m",(function(){return k})),n.d(t,"h",(function(){return y})),n.d(t,"d",(function(){return w})),n.d(t,"q",(function(){return T})),n.d(t,"o",(function(){return _})),n.d(t,"n",(function(){return R})),n.d(t,"p",(function(){return S})),n.d(t,"g",(function(){return O})),n.d(t,"r",(function(){return E})),n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return P})),n.d(t,"c",(function(){return I})),n.d(t,"i",(function(){return j})),n.d(t,"k",(function(){return F})),n.d(t,"l",(function(){return D}));n(11),n(33),n(16),n(10),n(1);var r=n(21),o=n(177),c=n.n(o),l=n(142),d=n.n(l),f=(n(9),n(12)),h=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))};function v(e){return Object(r.a)("files",e,{withCaptcha:!0})}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return h(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v({parent_id:e,page_token:t,limit:100,filters:{phase:{eq:"PHASE_TYPE_COMPLETE"},trashed:{eq:!1}}});case 2:if(!(r=n.sent).next_page_token){n.next=10;break}return n.next=6,m(e,r.next_page_token);case 6:return o=n.sent,n.abrupt("return",Object.assign(Object.assign({},r),{next_page_token:"",files:d()([r.files,o.files])}));case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}}),n)})))}function x(e){return Object(r.a)("files",e,{method:"POST"})}function k(e){return Object(r.a)("files/".concat(e))}function y(e){return Object(r.a)("files/".concat(e),{},{method:"DELETE"})}function w(){return Object(r.a)("files/trash:empty",{},{method:"PATCH"})}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.a)("tasks",e)}function _(e){return Object(r.a)("tasks/".concat(e))}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r.a)("task/".concat(e,"/statuses"),t)}function S(e){var param=e.status_ids.join("&status_ids=");return param="?status_ids="+param,Object(r.a)("statuses".concat(param))}function O(e){var t=e.join("&task_ids=");return Object(r.a)("tasks?task_ids=".concat(t),{},{method:"DELETE",withCaptcha:!0})}function E(){return Object(r.a)("import_download_record",{},{method:"POST",withCaptcha:!0})}function C(e){return h(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c()(e,99),t.next=3,Promise.all(n.map((function(e){var param=e.join("&ids=");return param="?ids="+param,Object(r.a)("files:batchGet"+param)})));case 3:return o=t.sent,l=o.map((function(e){return e.files})),t.abrupt("return",Object.assign(Object.assign({},o[0]),{files:d()(l)}));case 6:case"end":return t.stop()}}),t)})))}function P(e,t){return Object(r.a)("files:batchCopy",{ids:e,to:{parent_id:t}},{method:"POST"})}function I(e,t){return Object(r.a)("files:batchMove",{ids:e,to:{parent_id:t}},{method:"POST"})}function j(e,t){return f.client.detachServerEvent(e,t)}function F(e){return v({parent_id:e,filters:{kind:{eq:"drive#folder"},trashed:{eq:!1}},limit:999999})}function D(cursor,e,t,n){return Object(r.b)("".concat("http://api.zone.lixian.vip.xunlei.com","/tasks/").concat(t),"GET",{},{begin:cursor,num:e,filetype:"0",record_type:"0",device_id:n})}t.f={findFiles:v,createFile:x,getFileInfo:k,deleteFile:y,updateFile:function(e){var t=e.id,n=e.params;return Object(r.a)("files/".concat(t),n,{method:"PATCH",withCaptcha:!0})},copyFile:function(e){var t=e.id,n=e.parent_id,o=e.name;return Object(r.a)("files/".concat(t,"/copy"),{to:{parent_id:n,name:o}},{method:"POST",withCaptcha:!0})},moveFile:function(e){var t=e.id,n=e.parent_id,o=e.name;return Object(r.a)("files/".concat(t,"/move"),{to:{parent_id:n,name:o}},{method:"POST",withCaptcha:!0})},getUrlTasks:T,getSingleUrlTask:_,getSingleTaskStatus:R,getTasksStatus:S,delTasks:O,trashFile:function(e){return Object(r.a)("files/".concat(e,"/trash"),{},{method:"PATCH",withCaptcha:!0})},untrashFile:function(e){return Object(r.a)("files/".concat(e,"/untrash"),{},{method:"PATCH",withCaptcha:!0})},getEvent:function(e){return Object(r.a)("events",e)},getAbout:function(){return Object(r.a)("about",{},{withCaptcha:!0})},checkPrivilege:function(e){return Object(r.a)("privilege/".concat(e))},applyPrivilege:function(e){return Object(r.a)("privilege",e,{method:"POST",withCaptcha:!0})},checkImportDownload:function(){return Object(r.a)("check_import_download")},importDownloadRecord:E}},626:function(e,t,n){var map={"./IPC":[5,9],"./IPC.ts":[5,9],"./audit-type":[519,9,3],"./audit-type.ts":[519,9,3],"./captcha":[25,9],"./captcha.ts":[25,9],"./client-utils":[523,9,1],"./client-utils.ts":[523,9,1],"./code-res":[82,9],"./code-res.ts":[82,9],"./devtools/isLogEnable":[518,9,4],"./devtools/isLogEnable.ts":[518,9,4],"./download-kernel":[123,9],"./download-kernel.ts":[123,9],"./drive-error":[522,9,5],"./drive-error.ts":[522,9,5],"./drive-util":[29,9],"./drive-util.ts":[29,9],"./error-message":[85,9],"./error-message.ts":[85,9],"./event-track":[47,9],"./event-track.ts":[47,9],"./eventBus":[98,9],"./eventBus.js":[98,9],"./file-upload-manager":[276,9],"./file-upload-manager.ts":[276,9],"./filters":[91,9],"./filters.ts":[91,9],"./get-user-info":[202,9],"./get-user-info.ts":[202,9],"./local-upload/childUpload":[537,7,6],"./local-upload/childUpload.ts":[537,7,6],"./local-upload/postUpload":[100,9],"./local-upload/postUpload.ts":[100,9],"./local-upload/preCreate":[277,9],"./local-upload/preCreate.ts":[277,9],"./local-upload/store":[20,9],"./local-upload/store.ts":[20,9],"./local-upload/type":[14,9],"./local-upload/type.ts":[14,9],"./local-upload/uploadHistoryDB":[538,9,7],"./local-upload/uploadHistoryDB.ts":[538,9,7],"./local-upload/uploadUtils":[176,9],"./local-upload/uploadUtils.ts":[176,9],"./remote":[58,9],"./remote.ts":[58,9],"./retrieval/retrieval-manager":[87,9],"./retrieval/retrieval-manager.ts":[87,9],"./retrieval/task-cert-operation":[204,9],"./retrieval/task-cert-operation.ts":[204,9],"./settings":[64,9],"./settings.ts":[64,9],"./show-message":[205,9],"./show-message.ts":[205,9],"./static-icons":[539,9,8],"./static-icons.ts":[539,9,8],"./taskSuffixMap":[517,9,9],"./taskSuffixMap.ts":[517,9,9],"./thunderHelper":[263,9],"./thunderHelper.ts":[263,9],"./type":[540,7,10],"./type.ts":[540,7,10],"./util":[9,9],"./util.ts":[9,9]};function r(e){if(!n.o(map,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=map[e],r=t[0];return Promise.all(t.slice(2).map(n.e)).then((function(){return n.t(r,t[1])}))}r.keys=function(){return Object.keys(map)},r.id=626,e.exports=r},628:function(e,t){e.exports=require("net")},630:function(e,t){e.exports=require("string_decoder")},635:function(e,t){e.exports=require("buffer")},64:function(e,t,n){"use strict";n.r(t),n.d(t,"getRecentFolder",(function(){return h})),n.d(t,"getDefaultSaveFolder",(function(){return v})),n.d(t,"setDefaultSaveFolder",(function(){return m})),n.d(t,"setRecentFolder",(function(){return x})),n.d(t,"addRecentFolder",(function(){return k}));n(126),n(16),n(10),n(1);var r=n(361),o=n.n(r),c=n(362),l=n.n(c),d=n(5),f=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))};function h(e){return f(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!e){t.next=14;break}return t.prev=2,t.next=5,o()("".concat(window.__profilesDir,"/pan-plugin/config/recent-folder/").concat(e,".json"));case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0=[];case 8:n=t.t0,t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),n=[];case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,null,[[2,11]])})))}function v(e){return f(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=10;break}return t.prev=1,t.next=4,o()("".concat(window.__profilesDir,"/pan-plugin/config/default-save-folder/").concat(e,".json"));case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",{name:"我的云盘",id:""});case 10:return t.abrupt("return",{name:"我的云盘",id:""});case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))}function m(e,t){return f(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e&&(l()("".concat(window.__profilesDir,"/pan-plugin/config/default-save-folder/").concat(e,".json"),t).catch((function(){})),Object(d.setConfig)("ThunderPanPlugin","defaultSavePath",t.name));case 1:case"end":return n.stop()}}),n)})))}function x(e,t){return f(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,l()("".concat(window.__profilesDir,"/pan-plugin/config/recent-folder/").concat(e,".json"),t);case 3:Object(d.setConfig)("ThunderPanPlugin","savePaths",t.map((function(path){return path.name})));case 4:case"end":return n.stop()}}),n)})))}function k(e,t){return f(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h(e);case 2:r=n.sent,(o=r.findIndex((function(e){return e.id===t.id})))>-1&&r.splice(o,1),r.unshift(t),r=r.slice(0,5),x(e,r);case 8:case"end":return n.stop()}}),n)})))}},645:function(e,t){e.exports=require("constants")},65:function(e,t,n){"use strict";n.r(t),n.d(t,"xlUserApis",(function(){return c}));var r=n(75).a.driveAPI,o={test:{clientId:"XXDfQA-ruQKfza9f",packageName:"ThunderPanPlugin",signKey:"lxt&NZC0*l",algVersion:"1"},prod:{clientId:"XW-G4v1H72tgfJym",packageName:"ThunderPanPlugin",signKey:"n&Ng)QE3EZ",algVersion:"1"}},c={test:"https://dev-xluser-ssl.xunlei.com",prod:"https://xluser-ssl.xunlei.com"};t.default={apiOrigin:c[r],clientId:o[r].clientId,packageName:o[r].packageName,signKey:o[r].signKey,algVersion:o[r].algVersion,authorizePage:"https://i.xunlei.com/xluser/oauth.html",scope:"profile offline pan sso user",funName:"pubBovIyjvJHXi2x7TQ7MeLJmZJbxSyVNRz",funFile:"code-res"}},674:function(e,t){e.exports=require("worker_threads")},703:function(e,t,n){"use strict";n.r(t),n.d(t,"UploadState",(function(){return r})),n.d(t,"initState",(function(){return R})),n.d(t,"state",(function(){return S})),n.d(t,"mutations",(function(){return O})),n.d(t,"actions",(function(){return E}));n(10),n(33),n(11),n(28),n(16);var r,o=n(114),c=(n(38),n(44),n(7),n(8),n(126),n(17)),l=(n(1),n(6)),d=n(3),f=n(0),h=n(9),v=n(177),m=n.n(v),x=n(98),k=n(58),y=n(29),w=n(5),T=n(47),_=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))};!function(e){e[e.NOT_START=0]="NOT_START",e[e.UNDERWAY=1]="UNDERWAY",e[e.SUSPEND=2]="SUSPEND",e[e.FAILURE=3]="FAILURE",e[e.SUCCESS=4]="SUCCESS",e[e.CANCEL=5]="CANCEL"}(r||(r={}));var R=function(){return{cover:!1,activeCollapseItemType:"drive",all:{},home:{list:[]},uploadList:[],tasks:{list:[],pageToken:""},allTaskStatus:{},spaceMsg:{kind:"",limit:10,usage:0},pageToken:"",hasMore:!1,parentId:"",parentPaths:[{id:"",name:"全部文件"}],driveFileList:[],trashFileList:[],driveRouteList:[{title:"我的云盘",id:""}],nextPageTokenMap:{},driveSortInfoMap:{drive:{type:"created_time",order:1},trash:{type:"modified_time",order:-1}},parentIdMap:{drive:"",trash:"*"},selectItemListMap:{drive:[],trash:[]},parentIndex:0,folders:{0:{id:"",name:"根目录"}},folderNodes:[],events:{list:[],pageToken:""},uploadRetry:!1,filterTypes:{all:{name:"全部文件",filter:{trashed:{eq:!1}}},done:{name:"已完成",filter:{phase:{eq:"PHASE_TYPE_COMPLETE"},trashed:{eq:!1}}},starred:{name:"加星",filter:{starred:{eq:!0}}},file:{name:"文件",filter:{kind:{eq:"drive#file"},trashed:{eq:!1}}},category:{name:"目录",filter:{kind:{eq:"drive#folder"},trashed:{eq:!1}}},picture:{name:"图片",filter:{mime_type:{prefix:"image/"},trashed:{eq:!1}}},video:{name:"视频",filter:{mime_type:{prefix:"video/"},trashed:{eq:!1}}},trash:{name:"回收站",filter:{trashed:{eq:!0}}}},curFilter:"all",importState:{isImported:!1,canLoadRecords:0},toFetchBackList:[]}},S=R(),O={set:function(e,t){f.default.set(e.all,t.id,Object.assign({},e.all[t.id],t))},setFiles:function(e,t){var n=t.list,r=t.refresh,o=void 0!==r&&r;e.home.list=o?n:[].concat(Object(c.a)(e.home.list),Object(c.a)(n))},setDriveFileList:function(e,t){var n,r,data=t.data,o=t.refresh,l=void 0!==o&&o,d=t.position,h=void 0===d?"end":d,v=t.sort,m=void 0===v||v;l?f.default.set(e,"driveFileList",data):"start"===h?(n=e.driveFileList).unshift.apply(n,Object(c.a)(data)):(r=e.driveFileList).push.apply(r,Object(c.a)(data));m&&O.sortFileList(e,"drive")},setDriveSortInfo:function(e,t){var n=t.tabType,r=t.info,o=e.driveSortInfoMap[n];e.driveSortInfoMap[n]=Object.assign(Object.assign({},o),r)},sortFileList:function(e,t){console.log("sort",t);var n=e.driveSortInfoMap[t];"trash"===t?e.trashFileList.sort(y.sortFunctionMap[n.type](n.order)):e.driveFileList.sort(y.sortFunctionMap[n.type](n.order))},setTrashFileList:function(e,t){var n,data=t.data,r=t.refresh;void 0!==r&&r?f.default.set(e,"trashFileList",data):(n=e.trashFileList).push.apply(n,Object(c.a)(data));O.sortFileList(e,"trash")},clearFileMode:function(e,t){"drive"===t.type&&e.driveFileList.forEach((function(e){e.__mode=""}))},replaceFileItem:function(e,t){var n=t.item;if("drive"===t.type){var r=e.driveFileList.findIndex((function(e){return n.id===e.id}));r>=0&&f.default.set(e.driveFileList,r,n)}},setActiveCollapseTabType:function(e,t){e.activeCollapseItemType=t},setSelectedItemList:function(e,t){var n=t.type,r=t.list;f.default.set(e.selectItemListMap,n,r)},setNextPageTokenMap:function(e,t){e.nextPageTokenMap=Object.assign(Object.assign({},e.nextPageTokenMap),t)},setDriveRouteList:function(e,t){f.default.set(e,"driveRouteList",t)},setParentIdMap:function(e,t){e.parentIdMap=Object.assign(Object.assign({},e.parentIdMap),t)},addDirectory:function(e,t){var n=t.list;e.home.list=[].concat(Object(c.a)(n),Object(c.a)(e.home.list))},add:function(e,t){e.home.list.unshift(t)},deleteFile:function(e,t){var n=t.id,r=t.type,o=[];(o="drive"===r?e.driveFileList:e.trashFileList).forEach((function(e,t){e.id===n&&o.splice(t,1)}))},setUploadTask:function(e,t){if(console.log("更新uplist",e.uploadList,t),Array.isArray(t))e.uploadList=[].concat(Object(c.a)(e.uploadList),Object(c.a)(t));else{for(var n=e.uploadList,r={},o=-1,i=0;i<n.length;i++)t.nativeFileUUID===n[i].nativeFileUUID&&(o=i,r=n[i]);if(o<0)return void console.log("更新数据异常, 传入的数据在原有的记录中无法找到");var l=Object.assign({},r,t);console.log("索引",o),console.log(e.uploadList.toString()),e.uploadList.splice(o,1,l)}},delUploadTask:function(e,t){console.log("准备删除",e.uploadList,t),e.uploadList=e.uploadList.filter((function(e){return e.nativeFileUUID!==t.nativeFileUUID}))},setTasks:function(e,t){var n=t.refresh,r=t.list,o=t.pageToken;e.tasks={list:n?r:[].concat(Object(c.a)(e.tasks.list),Object(c.a)(r)),pageToken:o}},setTaskStatus:function(e,t){var n=t.id,r=t.statuses,o=e.tasks.list.map((function(e){return e.id===n?Object.assign(Object.assign({},e),{statuses:r}):e}));e.tasks.list=o},setSpageMsg:function(e,t){e.spaceMsg=t},delTasks:function(e,t){e.tasks.list=e.tasks.list.filter((function(e){return!t.includes(e.id)}))},setDiskInfo:function(e,t){e.pageToken=t.pageToken,e.hasMore=t.hasMore,e.parentId=t.parentId},setParentId:function(e,t){e.parentId=t},setFolders:function(e,t){f.default.set(e.folders,t.id,t)},setFolderNodes:function(e,t){var n=t.parentId,r=t.list,o=Object(c.a)(e.folderNodes);if("0"===n)e.folderNodes=[{id:"0",name:"根目录"}].concat(Object(c.a)(r));else{var l=Object(h.updateListByPropId)(n,o,r);e.folderNodes=l}},setFolder:function(e,t){e.parentPaths=[].concat(Object(c.a)(e.parentPaths),[t])},backFolder:function(e,t){e.parentPaths=e.parentPaths.slice(0,t)},setAllTaskStatus:function(e,t){e.allTaskStatus[t.id]=t},setCover:function(e,t){e.cover=t},setEvents:function(e,t){var n=t.refresh,r=t.list,o=t.pageToken;e.events={list:n?r:[].concat(Object(c.a)(e.events.list),Object(c.a)(r)),pageToken:o}},setUploadRetry:function(e,t){e.uploadRetry=t},setFilter:function(e,t){e.curFilter=t},setImportStatus:function(e,t){e.importState={isImported:t.is_import||!1,canLoadRecords:t.can_load_records||0}},setShareFilesList:function(e,t){e.toFetchBackList=t},reset:function(e){Object.assign(e,R())}},E={getFileList:function(e){var t=e.state,n=e.commit,r=(e.rootState,e.dispatch,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),c=r.__type||"drive",d="drive"===c?t.filterTypes.done.filter:t.filterTypes.trash.filter;return l.f.findFiles(Object.assign(Object.assign({},r),{filters:d})).then((function(e){if(!e.files)throw new Error(JSON.stringify(e));n("drive"===c?"setDriveFileList":"setTrashFileList",Object.assign({data:e.files},r)),n("setNextPageTokenMap",Object(o.a)({},c,e.next_page_token))}))},addFileToList:function(e,t){var n=e.state,r=e.commit;return l.f.getFileInfo(t).then((function(e){e.parent_id===n.driveRouteList[n.driveRouteList.length-1].id&&r("setDriveFileList",{data:[e]})}))},getFileInfo:function(e,t){var n=e.commit;return l.f.getFileInfo(t).then((function(e){return n("set",e),e}))},deleteFile:function(e,t){var n=e.commit,r=e.dispatch,o=t.id,c=t.type;return l.f.deleteFile(o).then((function(e){return n("deleteFile",{id:o,type:c}),"success"})).then((function(){r("getAbout",{},{root:!0})}))},trashFile:function(e,t){var n=e.commit,r=(e.dispatch,t.id),o=t.type;return l.f.trashFile(r).then((function(e){return n("deleteFile",{id:r,type:o}),e}))},clearTrash:function(e){var t=e.commit;e.dispatch;return Object(l.d)().then((function(e){t("setTrashFileList",{data:[],refresh:!0})}))},untrashFile:function(e,t){var n=e.commit,r=t.id,o=t.type;return l.f.untrashFile(r).then((function(e){return n("deleteFile",{id:r,type:o}),e}))},updateFile:function(e,t){e.commit;var n=t.id,r=t.params;return l.f.updateFile({id:n,params:r}).then((function(e){return e}))},copyFile:function(e,t){e.commit;var n=e.dispatch,r=t.id,o=t.parent_id,c=t.name;return l.f.copyFile({id:r,parent_id:o,name:c}).then((function(e){return 0===Object.keys(e).length&&console.log("copy success"),e})).then((function(){n("getAbout",{},{root:!0})}))},moveFile:function(e,t){var n=e.commit,r=e.state,o=t.id,c=t.parent_id,d=t.name;return l.f.moveFile({id:o,parent_id:c,name:d}).then((function(){var e=r.driveFileList.filter((function(e){return e.id!==o}));n("setDriveFileList",{data:e,refresh:!0})}))},batchMoveFile:function(e,t){var n=e.commit,r=e.state,o=t.fileIdList,c=t.parent_id;return Object(l.c)(o,c).then((function(e){var t=r.driveFileList.filter((function(e){return!o.includes(e.id)}));return n("setDriveFileList",{data:t,refresh:!0}),e}))},batchCopyFile:function(e,t){e.commit,e.state,e.dispatch;var n=t.fileIdList,r=t.parent_id;return Object(l.a)(n,r)},delTasks:function(e,t){var n=e.commit;return l.f.delTasks(t).then((function(e){e&&n("delTasks",t)}))},getTaskStatus:function(e,t){var n=e.commit,r=t.ids,o=m()(r,20).map((function(e){return l.f.getTasksStatus({status_ids:e}).then((function(t){if(t.statuses)return t.statuses.forEach((function(e){e&&n("setAllTaskStatus",e)})),e}))}));return Promise.all([o]).then((function(e){return e.join()}))},getEvent:function(e){var t=e.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.f.getEvent(n).then((function(e){e&&t("setEvents",{list:e.events,refresh:!n.page_token,pageToken:e.next_page_token}),console.log("getEvent",e)}))},addFolder:function(e,t){var n=e.commit,r=e.state;return l.f.createFile({parent_id:r.parentIdMap.drive,name:t,kind:"drive#folder"}).then((function(e){n("set",e.file);var t=[e.file.id];return n("addDirectory",{list:t}),e}))},addFolderWithParentId:function(e,t){e.commit,e.state;var n=t.parentId,r=t.name;return l.f.createFile({parent_id:n,name:r,kind:"drive#folder"}).then((function(e){return e}))},getFolders:function(e,t){var n=e.commit,r=e.state;return l.f.findFiles(t).then((function(e){if(!e.error){var o=t.parent_id||"0";if("0"!==o&&n("setFolders",Object.assign(Object.assign({},r.folders[o]),{isClick:!0})),0===e.files.length)return;var c=e.files.map((function(e){return n("setFolders",e),{id:e.id,name:e.name}}));return n("setFolderNodes",{parentId:o,list:c}),c}alert("inter folder success")}))},applyPrivilege:function(e,t){e.commit;return l.f.applyPrivilege(t)},delUploadTask:function(e,t){var n=e.commit,r=e.state.uploadList.filter((function(e){return e.name===t.name}))[0];return r&&r.id?l.f.deleteFile(r.id).then((function(e){console.log("任务彻底删除成功",e),n("deleteFile",r.id),n("delUploadTask",t)})):null},setUploadTaskStatus:function(e,t){var n=e.state,r=t.name,o=n.uploadList.filter((function(e){return e.name===r}))[0].id;return l.f.updateFile({id:o,params:{phase:"PHASE_TYPE_RUNNING"}}).then((function(e){return e})).catch((function(e){return e}))},checkImportDownload:function(e){var t=e.commit;return l.f.checkImportDownload().then((function(e){return t("setImportStatus",e),e})).catch((function(e){console.error(e);var n={is_import:!0,can_load_records:0};return t("setImportStatus",n),n}))},externalFetchBack:function(e,t){var n=e.rootState,r=e.dispatch,o=t.fileIds;t.userId!==n.users.curUser.userId?d.a.callRemoteClientFunction("ThunderPanPluginWebview","ShowToast",{message:"当前账号与网页端登录账号不一致，请切换账号后重试",type:"error",position:"middle",duration:3e3}):r("fetchBackFiles",o)},fetchBackFiles:function(e,t){e.rootState;var n=e.state,r=e.commit,o=e.dispatch;return _(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.getConfig)("ThunderPanPlugin","useDefault",!1);case 2:e.sent?(o("retrieval-list/startRetrieval",{fileIds:t},{root:!0}),Object(T.eventTrack)("transmission_getback_create",{from:"yunpan_filelist"})):(r("setShareFilesList",t),d.a.checkRemoteFunction("ThunderPanPluginWebview","GetFetchBackFiles").then((function(e){e||d.a.registerFunctions({GetFetchBackFiles:function(){return n.toFetchBackList}}),Object(k.createFetchBackBW)()})));case 4:case"end":return e.stop()}}),e)})))},showFileDetail:function(e,t){var n=e.commit,r=t.fileId,o=t.isPlayInstantly,c=t.clearPickedItems,d=void 0!==c&&c,h=t.changeRect,v=t.mode;return _(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.f.getFileInfo(r);case 2:return t=e.sent,f.default.set(t,"isExternal",!0),o&&f.default.set(t,"isPlayInstantly",!0),v&&f.default.set(t,"mode",v),h&&f.default.set(t,"changeRect",h),d&&x.default.$emit("clearPickedItems"),f.default.nextTick((function(){n("setSelectedItemList",{type:"drive",list:[t]})})),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})))}}},704:function(e,t,n){"use strict";n.r(t),n.d(t,"state",(function(){return F})),n.d(t,"getters",(function(){return D})),n.d(t,"mutations",(function(){return A})),n.d(t,"actions",(function(){return U}));n(16);var r,o=n(13),c=(n(45),n(126),n(38),n(44),n(7),n(8),n(10),n(1),n(414)),l=n.n(c),d=n(0),f=n(3),h=n(14),v=n(9),m=n(359),x=n.n(m),k=n(276),y=n(47),w=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},T=l()({client:"sqlite3"}),_=function(){return T("PanPluginUploadHistory")};function R(e){var t=x()(e);try{t.token=JSON.stringify(t.token)}catch(e){console.error("normalizingTaskForDb parse json error",e)}return t}function S(e){return w(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O(_().delete().where({id:e}).toString());case 2:case"end":return t.stop()}}),t)})))}function O(e){return new Promise((function(t,n){f.a.callServerFunction("QuerySqlite",e).then((function(e){t(function(e){return e?e.reduce((function(e,t,n){var r={};return t.forEach((function(e){if("token"!==e.key)r[e.key]=e.value;else if("token"!==e.key||e.value)try{r[e.key]=JSON.parse(e.value)}catch(e){console.error("ipcSelectResult2ObjectArray parse json error",e)}else r[e.key]=e.value})),e[n]=r,e}),[]):[]}(e))}))})).then((function(e){return e})).catch((function(e){0}))}function E(e){return w(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O(e);case 2:return n=_().select().orderBy("id","desc").limit(1).toString(),console.log(n),t.next=6,O(n);case 6:return r=t.sent,t.abrupt("return",r[0]);case 8:case"end":return t.stop()}}),t)})))}var C,P,I,j,F={uploading:[],uploaded:[],allTask:{}},D={uploadingTask:function(e){return e.uploading.reduce((function(pre,t){var n=e.allTask[t];return n&&(pre=pre.concat(n)),pre}),[])},uploadedTask:function(e){return e.uploaded.reduce((function(pre,t){var n=e.allTask[t];return n&&(pre=pre.concat(n)),pre}),[])},runningTaskNum:function(e){return e.uploading.reduce((function(pre,t){return[h.UploadEvent.add,h.UploadEvent.pending,h.UploadEvent.uploading,h.UploadEvent.prepare].includes(e.allTask[t].uploadStatus)&&(pre+=1),pre}),0)}},A={addToUploading:function(e,t){e.uploading.unshift(t)},doneTask:function(e,t){var n=e.uploading.findIndex((function(e){return e===t}));n>-1?e.uploading.splice(n,1):console.error("remove not exist task"),e.uploaded.unshift(t)},cancelTask:function(e,t){var n=e.uploading.findIndex((function(e){return e===t}));n>-1&&e.uploading.splice(n,1);var r=e.uploaded.findIndex((function(e){return e===t}));r>-1&&e.uploaded.splice(r,1),d.default.delete(e.allTask,t)},deleteTask:function(e,t){var n=e.uploaded.findIndex((function(e){return e===t.id}));n>-1?e.uploaded.splice(n,1):console.error("delete not exist task")},addToUploaded:function(e,t){e.uploaded.unshift(t)},setTask:function(e,t){var n=t.id;d.default.set(e.allTask,n,t)},assignTask:function(e,t){var n=t.id;e.allTask[n]?d.default.set(e.allTask,n,Object.assign(e.allTask[n],t)):d.default.set(e.allTask,n,t)},copy:function(e,t){Object.assign(e,t)},reset:function(e){Object.assign(e,{uploading:[],uploaded:[],allTask:{}})},removeUploading:function(e,t){var n=e.uploading.findIndex((function(e){return e===t}));n>-1&&e.uploading.splice(n,1)},removeUploaded:function(e,t){var n=e.uploaded.findIndex((function(e){return e===t}));n>-1&&e.uploaded.splice(n,1)}},U={init:function(e){var t=e.rootState,n=e.commit,o=e.dispatch,c=e.state;return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new k.FileUploadManager(c.allTask),l=T.schema.createTable("PanPluginUploadHistory",(function(table){table.increments(),table.string("name").defaultTo(""),table.string("uploadType").defaultTo("resume"),table.string("filePath").defaultTo(""),table.string("icon").defaultTo(""),table.string("type").defaultTo(""),table.integer("size").defaultTo(0),table.string("parentId").defaultTo(""),table.integer("progress").defaultTo(0),table.json("token").defaultTo(""),table.string("createTime").defaultTo(T.fn.now()),table.string("completeTime"),table.string("updateTime").defaultTo(T.fn.now()),table.string("uploadStatus").defaultTo("pending"),table.string("userId").defaultTo(""),table.integer("version").defaultTo(0)})).toString(),e.next=5,O(l).then((function(e){0}));case 5:return d=T.schema.table("PanPluginUploadHistory",(function(table){table.string("fileId").defaultTo("").comment("云盘文件id"),table.boolean("driveFileExist").defaultTo(1),table.boolean("localFileExist").defaultTo(1),table.string("uploadNetSpeed").defaultTo(0),table.string("mime_type").defaultTo(""),table.string("errMsg").defaultTo(""),table.json("extras").defaultTo("{}")})).toString().split(";"),e.next=8,d.map((function(e){return O(e).then((function(e){0}))}));case 8:return e.next=10,f=t.users.curUser.userId,O(_().select().where({userId:f}).toString());case 10:e.sent.forEach((function(e){"cancel"!==e.uploadStatus&&(e.completeTime?n("addToUploaded",e.id):(n("addToUploading",e.id),e.uploadStatus!==h.UploadEvent.fail&&o("changeAndBoradcastTaskChange",Object.assign(e,{uploadStatus:"pause"})),null==r||r.addToPausedTask(e.id)),n("setTask",e))}));case 12:case"end":return e.stop()}var f}),e)})))},finish:function(){null==r||r.finish(),r=null},syncLocalUploadStore:function(e){var t=e.commit;return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcTransferDataInit");case 2:n=e.sent,r=Object(o.a)(n,2),c=r[0],r[1],c&&t("copy",c);case 7:case"end":return e.stop()}}),e)})))},initTransferListener:function(e){var t=e.commit;j=f.a.attachServerEvent("ThunderPanTaskDetailChanged",(function(e,n){t("assignTask",n)})),I=f.a.attachServerEvent("ThunderPanTaskDelete",(function(e,n){Object(v.log)("ThunderPanTaskDelete",n),t("cancelTask",n)})),P=f.a.attachServerEvent("ThunderPanTaskInsert",(function(e,n){var r=Object(o.a)(n,2),c=r[0],l=r[1];"uploading"===c?t("addToUploading",l):"uploaded"===c&&t("addToUploaded",l)})),C=f.a.attachServerEvent("ThunderPanTaskRemove",(function(e,n){var r=Object(o.a)(n,2),c=r[0],l=r[1];"uploading"===c?t("removeUploading",l):"uploaded"===c&&t("removeUploaded",l)}))},clearListener:function(e,t){e.commit,e.state;f.a.detachServerEvent("ThunderPanTaskDetailChanged",j),f.a.detachServerEvent("ThunderPanTaskDelete",I),f.a.detachServerEvent("ThunderPanTaskInsert",P),f.a.detachServerEvent("ThunderPanTaskRemove",C)},add:function(e,t){var n=e.commit,o=e.dispatch;return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("insert",t);case 2:return c=e.sent,console.log("插入成功",c),n("setTask",c),n("addToUploading",c.id),f.a.broadcastEvent("ThunderPanTaskDetailChanged",c),f.a.broadcastEvent("ThunderPanTaskInsert",["uploading",c.id]),null==r||r.add(c.id),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})))},changeAndBoradcastTaskChange:function(e,t){var n=e.state,r=e.commit,o=e.dispatch;return r("assignTask",t),o("boradcastTaskChange",t),n.allTask[t.id]},boradcastTaskChange:function(e,t){f.a.broadcastEvent("ThunderPanTaskDetailChanged",t),function(e){w(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=_().update(R(e)).where({id:e.id}).toString(),t.next=3,O(n);case 3:case"end":return t.stop()}}),t)})))}(t)},start:function(){null==r||r.start()},transferCancel:function(e,t){e.dispatch,e.commit;f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcTranferCall",["cancel",t])},transferDelete:function(e,t){e.dispatch,e.commit;f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcTranferCall",["delete",t])},transferRetry:function(e,t){e.dispatch,e.commit;return f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcTranferCall",["retry",t])},transferResume:function(e,t){e.dispatch,e.commit;f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcTranferCall",["resume",t])},transferPause:function(e,t){e.dispatch,e.commit;f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcTranferCall",["pause",t])},transferUpdate:function(e,t){e.dispatch,e.commit;f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcTranferCall",["update",t])},insert:function(e,t){e.rootState,e.commit,e.dispatch;return w(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:t.name,uploadType:t.uploadType||"resume",filePath:t.filePath,type:t.type||"",size:t.size,parentId:t.parentId,progress:t.progress,token:"resume"===t.uploadType?t.token:"",createTime:t.createTime,completeTime:t.completeTime||"",updateTime:t.updateTime||"",uploadStatus:t.uploadStatus||"pending",userId:t.userId,fileId:t.fileId,driveFileExist:t.driveFileExist,version:t.version},r=_().insert(n).toString(),e.abrupt("return",E(r));case 3:case"end":return e.stop()}}),e)})))},delete:function(e,t){e.dispatch;var n=e.commit,r=t.id;n("cancelTask",r),S(r),f.a.broadcastEvent("ThunderPanTaskDelete",r)},cancel:function(e,t){e.dispatch,e.commit;null==r||r.cancel(t.id)},cancelDone:function(e,t){e.dispatch;(0,e.commit)("cancelTask",t),S(t),f.a.broadcastEvent("ThunderPanTaskDelete",t)},broadcastTaskDelete:function(e,t){S(t),f.a.broadcastEvent("ThunderPanTaskDelete",t)},retry:function(e,t){e.dispatch,e.commit;null==r||r.retry(t.id)},resume:function(e,t){e.dispatch,e.commit;null==r||r.resume(t.id)},pause:function(e,t){e.dispatch,e.commit;null==r||r.pause(t.id)},doneTask:function(e,t){var n=e.commit,r=e.state,o=e.dispatch;n("doneTask",t),f.a.broadcastEvent("ThunderPanTaskRemove",["uploading",t]),f.a.broadcastEvent("ThunderPanTaskInsert",["uploaded",t]),o("getAbout",null,{root:!0}),Object(y.eventTrack)("transmission_upload_yunpan_finish",{result:"success",tab:"local-upload",file_type:Object(v.getFileExtension)(r.allTask[t].name)}),o("drive/addFileToList",r.allTask[t].fileId,{root:!0})}}},72:function(e,t){e.exports=require("events")},74:function(e){e.exports=JSON.parse('{"name":"thunder11-plugin-pan","version":"0.0.1","description":"thunder11-plugin-pan","author":"xl","private":true,"config":{"nuxt":{"host":"0.0.0.0","port":"8089"}},"scripts":{"dev":"cross-env XAPP_BUILD_TARGET=xdas nuxt","debug":"cross-env XAPP_BUILD_TARGET=xdas node --inspect-brk ./node_modules/nuxt/bin/nuxt.js","build":"cross-env XAPP_BUILD_TARGET=xdas nuxt build","postbuild":"cross-env NODE_ENV=production XAPP_BUILD_TARGET=xdas webpack --config webpack.upload.config.js && webpack && node ./script/build.js","buildChild":"cross-env NODE_ENV=development XAPP_BUILD_TARGET=xdas webpack --config webpack.upload.config.js && webpack && node ./script/build.js","prebuild:release":"node ./script/get_pub_key.js","build:release":"cross-env XAPP_BUILD_TARGET=xdas nuxt build","postbuild:release":"cross-env NODE_ENV=production XAPP_BUILD_TARGET=xdas webpack --config webpack.upload.config.js && webpack && node ./script/build.js","start":"nuxt start","generate":"nuxt generate","changelog":"conventional-changelog -p angular -i CHANGELOG.md -s","test":"cross-env NODE_ENV=test jest","test:watch":"cross-env NODE_ENV=test jest --watch --notify --onlyChanged","dtsgen":"node ./script/typeGen.js && eslint --ext .d.ts types --fix"},"dependencies":{"@nuxtjs/axios":"^5.3.6","@xbase/captcha":"^1.1.0-alpha.0","@xunlei/async-remote":"^1.0.6","@xunlei/node-net-ipc":"^1.0.16","@xunlei/nuxt-build-routes":"^1.0.0","@xunlei/phone-auth":"^4.3.2","@xunlei/scroll-load":"^1.0.3","@xunlei/thunder-ui":"^0.17.12","@xunlei/thunder-ui-vue":"^0.46.3","@xunlei/tiny-logger":"^1.3.1","@xunlei/vue-raven-plugin":"^2.0.0","@xunlei/vue-see":"^1.0.1","@xunlei/vuex-connector":"^1.1.1","ali-oss":"^6.9.1","animate.css":"^3.7.2","blueimp-md5":"^2.16.0","comlink":"^4.3.0","cross-env":"^5.2.0","crypto-js":"^4.0.0","dayjs":"^1.8.28","express":"^4.17.1","express-prom-bundle":"^5.1.3","form-data":"^3.0.0","intersection-observer":"^0.7.0","knex":"^0.21.1","load-json-file":"^6.2.0","lodash":"^4.17.15","lodash-decorators":"^6.0.1","lottie-web":"^5.5.9","mssql":"^6.2.0","net":"^1.0.2","node-sass":"^4.10.0","nuxt":"^2.0.0","nuxt-property-decorator":"^2.7.2","postcss-px2rem":"^0.3.0","qrcode":"^1.4.4","qs":"^6.9.4","sass-loader":"^7.1.0","store":"^2.0.12","then-jsonp":"^1.0.3","tippy.js":"^6.2.0","ts-jest":"^26.1.0","vue-awesome-swiper":"^3.1.3","vue-debounce-decorator":"^1.0.1","vue-lazyload":"^1.2.6","vue-player-audio":"^1.0.0","vue-timer-countdown":"^1.3.2","webpack":"^4.43.0","webpack-cli":"^3.3.11","webpack-spritesmith":"^1.0.1","write-json-file":"^4.3.0"},"devDependencies":{"@babel/polyfill":"^7.10.1","@babel/runtime":"^7.10.3","@babel/runtime-corejs3":"^7.10.3","@babel/cli":"^7.10.3","@babel/core":"^7.10.3","jest":"^26.0.1","@babel/plugin-proposal-object-rest-spread":"^7.10.3","@babel/plugin-transform-modules-commonjs":"^7.10.1","@babel/plugin-transform-runtime":"^7.10.3","@babel/preset-env":"^7.10.3","@jest-runner/electron":"^3.0.0","@nuxt/typescript-build":"^0.6.0","@types/jest":"^26.0.0","@types/lodash":"^4.14.153","@typescript-eslint/eslint-plugin":"^2.34.0","@typescript-eslint/parser":"^2.34.0","@xbase/sso":"^1.3.0","archiver":"^4.0.1","babel-loader":"^8.1.0","clean-webpack-plugin":"^3.0.0","conventional-changelog-cli":"^2.0.23","copy-webpack-plugin":"^6.0.1","dtsgenerator":"^3.0.3","eslint":"^7.0.0","eslint-config-standard":"^14.1.1","eslint-plugin-import":"^2.20.2","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^4.0.1","eslint-plugin-vue":"^6.2.2","sw2dts":"^2.6.3","ts-loader":"^7.0.5","vue-debounce-decorator":"^1.0.1"}}')},75:function(e,t,n){"use strict";t.a={shouleiAPI:"prod",driveAPI:"prod",appid:165,slAppid:40,localhost:"http://alpha.pan.xunlei.com"}},82:function(e,t,n){"use strict";n.r(t),n.d(t,"privilegeCode",(function(){return r})),n.d(t,"eventTypeCode",(function(){return o})),n.d(t,"pubBovIyjvJHXi2x7TQ7MeLJmZJbxSyVNRz",(function(){return c})),n.d(t,"pub6ia2V9SvIDiyTxa6N1unpdsAgKBtRcOq",(function(){return l})),n.d(t,"pubVLWafYvz05XcF0afFBWncQXqv2hXmsnB",(function(){return d})),n.d(t,"pub13fCVEzewrJWqipeftpSzWE8OsfdssqF",(function(){return f})),n.d(t,"pub1cisskOmKHSpCgjnWMkYRVWZ457rgfBZ",(function(){return h})),n.d(t,"pub5lnaFggTF8sZ4rBTBi4DfzxbBmCvYiNN",(function(){return v})),n.d(t,"pubXBK0HblVb6IGnbGzqvjt7hyET484Nq83",(function(){return m})),n.d(t,"pubK4cFBZIuLiDEKMeXnmXSllcLDlwheG3Z",(function(){return x})),n.d(t,"pub1lsnEFvD2sdCpLffGHQZF6VeBGbhsCpX",(function(){return k})),n.d(t,"pub7FBSuABejE7E4MYY9pzTWLpT7fybzuvU",(function(){return y}));var r={REJECTED:"用户无资格申请或使用此特权",UNSUBMITTED:"用户有资格但需要用户主动提交申请",REVIEWING:"用户已提交申请, 待管理员审核",ACCEPTED:"已授权"},o={TYPE_PLAY:"播放视频或音频",TYPE_VIEW:"查看文件内容",TYPE_CREATE:"创建文件",TYPE_UPDATE:"更新文件",TYPE_DOWNLOAD:"取回文件",TYPE_DELETE:"删除文件"};function c(e){var t=n(4),r="+hSMJSeCdZpROXFiPz";return"end"!=="undefined"?(0,n(9).pubhvclKFXzc30fD8TPsLaJ0kpEyf5DyGZZ)(t(e+r)):e}function l(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(25).pubfLNjQjRGQIl9H0tLb9ZIho9Sm6WCYqg6)(t(e+r)):e}function d(e){var t=n(4),r="undefined";return"end"!=="end"?(0,n(29).pubzaY30NA7ZyHv46HTTA3QX6N7pW7OjefK)(t(e+r)):e}function f(e){var t=n(4),r="bAGt0ZZ42KXcYiO";return"end"!=="undefined"?(0,n(9).pub7LFlmRC3ZGSUnKGsikO1nNm6G6pcMdOY)(t(e+r)):e}function h(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(9).pubo94hBT4QNbwp68NCJER3JVyE6TL8MhuF)(t(e+r)):e}function v(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(29).pub1J9tzB08xSfgVAJJdfu8lhjE8HvUMU7Q)(t(e+r)):e}function m(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(85).pubk7vKVyCNbbcClIEgURFYsRoJOeZRFb1u)(t(e+r)):e}function x(e){var t=n(4),r="h7qtJPdjxE1C8qf";return"end"!=="undefined"?(0,n(91).pubT1FtfvVlajDkt5ISyAvN2Usr3Xh8DlQu)(t(e+r)):e}function k(e){var t=n(4),r="8ACRglTzQzvPeOL4J8kHbCYygP0MmA";return"end"!=="undefined"?(0,n(25).pubBJ4SSFIjE4kkMbs0X1boQe1yAPwR08xA)(t(e+r)):e}function y(e){var t=n(4),r="Wn5TGa6e";return"end"!=="undefined"?(0,n(29).pub7VyLLw7w2CK0NIoxmSAJVjMyaajJB4rY)(t(e+r)):e}},85:function(e,t,n){"use strict";n.r(t),n.d(t,"errorMap",(function(){return l})),n.d(t,"pubqcq6srSNQlYU8euYrJDE1kAPswrwuNUk",(function(){return d})),n.d(t,"pub5oPagx51Bc4UoajaQotrGN4jOZ39eMMu",(function(){return f})),n.d(t,"pubPJS1ubBWTRkE3HG7mTKySS4a2SefdavG",(function(){return h})),n.d(t,"pubJo4sjkWjTIeyVAh4GZFZ5Q10jiQSsT5b",(function(){return v})),n.d(t,"pubfQRfrELvPD8SPa1mhQbIRs86Ial05qhG",(function(){return m})),n.d(t,"pubk7vKVyCNbbcClIEgURFYsRoJOeZRFb1u",(function(){return x}));var r={"server error":"服务器异常","params error":"参数错误","login plz":"未登录","shield review":"风险账号","shield reject":"异常账号","not allowed":"无权限做此操作","not found":"未找到资源",exists:"已存在","too many":"超过操作上限","has voted":"你已经投过票了","Network Error":"网络异常",offline:"网络异常，暂时无法接收哦~"},o={"not found circle":"未找到该圈子","content too long":"超出字数限制"},c={1001:"账号异常,请重新登录",1002:"账号异常,请重新登录"};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.result,n=e.detail,l=e.defaultError,d=void 0===l?"发生未知错误":l;return console.log(t),o[n]||r[t]||c[t]||d}function d(e){var t=n(4),r="o5CdP+iAqVj5LJcs/eT";return"end"!=="undefined"?(0,n(29).pubNgpwutayxJhiMfpPCG2w98tuG64WEPbJ)(t(e+r)):e}function f(e){var t=n(4),r="cgBIj25on2ArIwbd4WNXb";return"end"!=="undefined"?(0,n(29).pub4HgTkDXF3hgL5dh85NP0tFXipG02h4sm)(t(e+r)):e}function h(e){var t=n(4),r="DaY8lHSgtcT5qlTdpNxKl7nZdVd0nF";return"end"!=="undefined"?(0,n(85).pubJo4sjkWjTIeyVAh4GZFZ5Q10jiQSsT5b)(t(e+r)):e}function v(e){var t=n(4),r="jHHUrvffpUPxR560E6t";return"end"!=="undefined"?(0,n(25).pubaDohIgsE4Q8MNLAZHKwkR6yzYhYlRvTG)(t(e+r)):e}function m(e){var t=n(4),r="dbXWxB5A";return"end"!=="undefined"?(0,n(25).pubo0iVkzx5rWUUyLxgE6HOdD6ofhNVev3K)(t(e+r)):e}function x(e){var t=n(4),r="CoyjUENAG9iD6fi";return"end"!=="undefined"?(0,n(25).pubPAc6XNxoIAgFECyxDVMKo4PQlMN7T6oT)(t(e+r)):e}},851:function(e,t){e.exports=require("timers")},857:function(e,t,n){var map={"./mssql/index.js":858,"./mysql/index.js":469,"./mysql2/index.js":877,"./oracle/index.js":471,"./oracledb/index.js":887,"./postgres/index.js":474,"./redshift/index.js":894,"./sqlite3/index.js":902};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(map,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return map[e]}r.keys=function(){return Object.keys(map)},r.resolve=o,e.exports=r,r.id=857},864:function(e,t){},865:function(e,t){},866:function(e,t){},87:function(e,t,n){"use strict";n.r(t),n.d(t,"RetrievalManager",(function(){return y})),n.d(t,"getRetrievalManager",(function(){return T}));n(28),n(11),n(33);var r,o=n(13),c=(n(38),n(44),n(112),n(10),n(146)),l=n(149),d=(n(1),n(5)),f=n(37),h=n(123),v=n(6),m=n(204),x=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},k=h.TaskStatus;!function(e){e[e.RESOURCE_FROM_MEMBER=1]="RESOURCE_FROM_MEMBER",e[e.RESOURCE_FROM_OFFLINE=2]="RESOURCE_FROM_OFFLINE",e[e.RESOURCE_FROM_CRYSTAL_LARGE=4]="RESOURCE_FROM_CRYSTAL_LARGE",e[e.RESOURCE_FROM_CRYSTAL_SMALL=8]="RESOURCE_FROM_CRYSTAL_SMALL",e[e.RESOURCE_FROM_DCDN=16]="RESOURCE_FROM_DCDN",e[e.RESOURCE_FROM_FREEDCDN=32]="RESOURCE_FROM_FREEDCDN"}(r||(r={}));var y=function(){function e(){Object(c.a)(this,e),this.refreshUrlTimer={},this.configChangeListener=-1}return Object(l.a)(e,[{key:"init",value:function(){return x(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Number,e.next=3,Object(d.getConfig)("ThunderPanPlugin","MaxDownloadTaskNum",5);case 3:return e.t1=e.sent,this.MAX_RETRIEVAL_NUM=(0,e.t0)(e.t1),e.next=7,Object(d.callServer)("GetCategoryFromUserId","ThunderPanPlugin",Object(f.b)().state.users.curUser.userId,"ThunderPan Download Category");case 7:this.categoryData=e.sent,this.configChangeListener=Object(d.attachEvent)("OnConfigValueChanged",(function(e,section,n,r,o){"ThunderPanPlugin"===section&&"MaxDownloadTaskNum"===n&&t.setMAX_RETRIEVAL_NUM(Number(o))}));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"getCurrentSituation",value:function(){return x(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.callServer)("GetCategoryTaskList",this.categoryData.categoryId,"Downloading");case 2:return t=e.sent,e.next=5,Object(d.callServer)("GetTaskBaseInfos",t);case 5:return n=e.sent,r=[],o=[],c=0,n.sort((function(a,b){return b.createTime-a.createTime})).forEach((function(e){[k.StartWaiting].includes(e.taskStatus)&&r.push(e.taskId),[k.StartPending,k.Started,k.StopPending].includes(e.taskStatus)&&(o.push(e.taskId),c+=1)})),e.abrupt("return",[r,c,o]);case 11:case"end":return e.stop()}}),e,this)})))}},{key:"setMAX_RETRIEVAL_NUM",value:function(e){return x(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e>this.MAX_RETRIEVAL_NUM)){t.next=4;break}this.checkRetrievalTask(),t.next=12;break;case 4:return t.next=6,this.getCurrentSituation();case 6:n=t.sent,r=Object(o.a)(n,3),r[0],r[1],c=r[2],this.stopTasks(c.slice(e-this.MAX_RETRIEVAL_NUM),h.TaskStopReason.ToolbarButton);case 12:this.MAX_RETRIEVAL_NUM=e;case 13:case"end":return t.stop()}}),t,this)})))}},{key:"checkRetrievalTask",value:function(){return x(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCurrentSituation();case 2:if(t=e.sent,n=Object(o.a)(t,2),r=n[0],!((c=n[1])<this.MAX_RETRIEVAL_NUM&&r.length>0)){e.next=9;break}return e.next=9,this.startTasks(r.splice(0,this.MAX_RETRIEVAL_NUM-c));case 9:case"end":return e.stop()}}),e,this)})))}},{key:"add",value:function(e){return x(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,c,l,f,h,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.callServer)("CreateBatchTask",e);case 2:return n=t.sent,t.next=5,Object(d.callServer)("GetTaskBaseInfos",n);case 5:r=t.sent,n=r.sort((function(a,b){return b.createTime-a.createTime})).map((function(e){return e.taskId})),c=0;case 8:if(!(c<n.length)){t.next=19;break}return l=n[c],t.next=12,Object(d.setRetrievalTaskExtras)(l,"fileId",e[c].fileId);case 12:return t.next=14,Object(d.setRetrievalTaskExtras)(l,"linkExpire",e[c].linkExpire);case 14:return t.next=16,Object(d.setRetrievalTaskExtras)(l,"token",e[c].token);case 16:c++,t.next=8;break;case 19:return t.next=21,this.getCurrentSituation();case 21:if(f=t.sent,h=Object(o.a)(f,2),h[0],!((v=h[1])<this.MAX_RETRIEVAL_NUM)){t.next=31;break}return this.startTasks(n.splice(0,this.MAX_RETRIEVAL_NUM-v)),t.next=29,this.queueTask(n);case 29:t.next=33;break;case 31:return t.next=33,this.queueTask(n);case 33:case"end":return t.stop()}}),t,this)})))}},{key:"resume",value:function(e){return x(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getCurrentSituation();case 2:if(n=t.sent,r=Object(o.a)(n,2),r[0],!((c=r[1])<this.MAX_RETRIEVAL_NUM)){t.next=12;break}return this.startTasks(e.splice(0,this.MAX_RETRIEVAL_NUM-c)),t.next=10,this.queueTask(e);case 10:t.next=14;break;case 12:return t.next=14,this.queueTask(e);case 14:case"end":return t.stop()}}),t,this)})))}},{key:"startTasks",value:function(e){return x(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.map((function(e){return x(r,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,c,l,f,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.getRetrievalTaskExtras)(e);case 2:if(n=t.sent,r=function t(r){var o=+new Date(r)-Date.now();h.refreshUrlTimer[e]=setTimeout((function(){return x(h,void 0,void 0,regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.addServerAndRefreshToken(e,n.fileId);case 2:o=r.sent,t(o);case 4:case"end":return r.stop()}}),r,this)})))}),o-3e5)},!(+new Date(n.linkExpire)>Date.now())){t.next=10;break}return t.next=7,Object(m.enableTaskCert)(e,-1,n.token);case 7:r(n.linkExpire),t.next=17;break;case 10:return console.log("addServer"),t.next=13,this.addServerAndRefreshToken(e,n.fileId);case 13:c=t.sent,l=Object(o.a)(c,1),f=l[0],r(f);case 17:case"end":return t.stop()}}),t,this)})))})),t.next=3,Promise.all(n);case 3:return t.next=5,Object(d.callServer)("BatchStartTask",e);case 5:case"end":return t.stop()}}),t)})))}},{key:"addServerAndRefreshToken",value:function(e,t){return x(this,void 0,void 0,regeneratorRuntime.mark((function n(){var o,c,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(v.m)(t);case 2:return o=n.sent,n.next=5,Object(d.callServer)("AddServer",e,-1,{resFrom:r.RESOURCE_FROM_MEMBER,url:o.web_content_link,refUrl:"",cookies:"",maxConnection:5});case 5:return console.log("addServer 111",e,-1,{resFrom:r.RESOURCE_FROM_MEMBER,url:o.web_content_link,refUrl:"",cookies:"",maxConnection:5}),c=o.links[Object.keys(o.links)[0]].expire,l=o.links[Object.keys(o.links)[0]].token,n.next=10,Object(m.enableTaskCert)(e,-1,l);case 10:return n.abrupt("return",c);case 11:case"end":return n.stop()}}),n)})))}},{key:"queueTask",value:function(e){return Object(d.callServer)("BatchStartWaitingTask",e)}},{key:"stopTasks",value:function(e,t){return Object(d.callServer)("BatchStopTask",e,t)}},{key:"deleteTasks",value:function(e,t){return Object(d.callServer)("BatchDeleteTask",e,t)}},{key:"setFileExist",value:function(e,t){Object(d.setRetrievalTaskExtras)(e,"fileExist",t)}},{key:"done",value:function(e){this.refreshUrlTimer[e]&&(clearTimeout(this.refreshUrlTimer[e]),delete this.refreshUrlTimer[e])}},{key:"destory",value:function(){Object(d.detachEvent)("OnConfigValueChanged",this.configChangeListener)}}]),e}(),w=null,T=function(){return x(void 0,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(w){e.next=5;break}return w=new y,e.next=4,w.init();case 4:case 5:return e.abrupt("return",w);case 6:case"end":return e.stop()}}),e)})))}},876:function(e,t){},879:function(e,t){},881:function(e,t){e.exports=require("crypto")},89:function(e,t){e.exports=require("fs")},893:function(e,t){},9:function(e,t,n){"use strict";n.r(t),n.d(t,"decodeToCn",(function(){return c})),n.d(t,"getNumericVersion",(function(){return l})),n.d(t,"promisefy",(function(){return d})),n.d(t,"setCookie",(function(){return f})),n.d(t,"getCookie",(function(){return h})),n.d(t,"deleteCookie",(function(){return v})),n.d(t,"getQueryString",(function(){return m})),n.d(t,"platform",(function(){return x})),n.d(t,"random",(function(){return k})),n.d(t,"detectOS",(function(){return y})),n.d(t,"getRandomNum",(function(){return w})),n.d(t,"base64encode",(function(){return T})),n.d(t,"bytesToSize",(function(){return _})),n.d(t,"isDebugMode",(function(){return R})),n.d(t,"formatTime",(function(){return S})),n.d(t,"clientToast",(function(){return O})),n.d(t,"throttle",(function(){return E})),n.d(t,"formatSize2",(function(){return C})),n.d(t,"formatSize",(function(){return P})),n.d(t,"sleep",(function(){return I})),n.d(t,"isMobile",(function(){return j})),n.d(t,"checkValidLink",(function(){return F})),n.d(t,"updateListByPropId",(function(){return D})),n.d(t,"shortNickName",(function(){return A})),n.d(t,"generateUUID",(function(){return U})),n.d(t,"errFirstPromise",(function(){return N})),n.d(t,"log",(function(){return L})),n.d(t,"checkCanPreview",(function(){return M})),n.d(t,"getErrorDescription",(function(){return B})),n.d(t,"getFileExtension",(function(){return z})),n.d(t,"safeJSONParse",(function(){return G})),n.d(t,"getDurationTime",(function(){return V})),n.d(t,"parseJson",(function(){return $})),n.d(t,"pubhvclKFXzc30fD8TPsLaJ0kpEyf5DyGZZ",(function(){return Y})),n.d(t,"publ1KgB88dGtmrXtE2iaqkA2I1gGdlBJ4j",(function(){return W})),n.d(t,"pub7LFlmRC3ZGSUnKGsikO1nNm6G6pcMdOY",(function(){return H})),n.d(t,"pubo94hBT4QNbwp68NCJER3JVyE6TL8MhuF",(function(){return X})),n.d(t,"pubV6WVjyJW4mRettUDDY1MsTEQvCLWN7lY",(function(){return J})),n.d(t,"pubTanM4hAEDO6Vl0QHK2SAKoWjRCSLZW2D",(function(){return K})),n.d(t,"pubstwbRjTwsqsfLUY5AnVAV3XXFOj8Atj4",(function(){return Q})),n.d(t,"pubL0NaUW9XOiKAOUrqcz1mJA5CjLGz4PcQ",(function(){return Z}));n(38),n(7),n(8),n(33),n(60);var r=n(17),o=(n(24),n(155),n(104),n(1),n(112),n(45),n(0));function c(e){var t="";try{t=decodeURIComponent(e)}catch(t){return unescape(e)}return t}function l(e){if("string"!=typeof e)return 0;var t=0,n=e.split(".");if(n&&4===n.length){var r=Number(n[0]),o=Number(n[1]),c=Number(n[2]);return t=128*Math.pow(2,24)+r*Math.pow(2,16)+o*Math.pow(2,8)+c}return t}function d(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return new Promise((function(n,o){e.apply(t,[].concat(r,[function(e,t){e?o(e):n(t)}]))}))}}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.path,path=void 0===r?"/":r,o=n.domain,c=n.maxAge,l=n.expires,d=n.secure,f=e+"="+encodeURIComponent(t);path&&(f+=";path="+path),o&&(f+=";domain="+o),c&&(f+=";max-age="+c),l&&(f+=";expires="+l.toUTCString()),d&&(f+=";secure="+d),document.cookie=f}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t||(t=document.cookie);var n=null==t.match(new RegExp("(^"+e+"| "+e+")=([^;]*)"))?"":RegExp.$2;return n}function v(e){var t=new Date;t.setTime(-1e3),document.cookie=e+"=''; expires="+t.toGMTString(),document.cookie=e+"=''; expires="+t.toGMTString()+";path=/"}function m(e,t){if(e&&t)return e.match(new RegExp("(^".concat(t,"|[?|&]").concat(t,")=([^&#]+)")))?RegExp.$2:""}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return/MicroMessenger/.test(e)?"wx":/QQ\//.test(e)?"qq":/\bWeibo|__weibo__\d/.test(e)?"weibo":/Qzone\//.test(e)?"qzone":/UCBrowser/.test(e)?"uc":"other"}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return Array.apply(null,new Array(e)).map((function(){return t.charAt(Math.floor(Math.random()*t.length))})).join("")}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.navigator.platform,n="";return/iPhone|iPad|iPod|iOS/.test(e)?n="iOS":/Android/.test(e)?n="android":/\bWindows Phone/.test(e)?n="Windows Phone":"Mac68K"===t||"MacPPC"===t||"Macintosh"===t||"MacIntel"===t?n="macOS":"Win32"===t||"Windows"===t?n="Windows":"X11"===t?n="Unix":/Linux/.test(t)&&(n="Linux"),n}function w(e,t){var n=t-e,r=Math.random();return e+Math.round(r*n)}function T(e){var t,i,n,r,o,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=e.length;for(i=0,t="";i<l;){if(n=255&e.charCodeAt(i++),i===l){t+=c.charAt(n>>2),t+=c.charAt((3&n)<<4),t+="==";break}if(r=e.charCodeAt(i++),i===l){t+=c.charAt(n>>2),t+=c.charAt((3&n)<<4|(240&r)>>4),t+=c.charAt((15&r)<<2),t+="=";break}o=e.charCodeAt(i++),t+=c.charAt(n>>2),t+=c.charAt((3&n)<<4|(240&r)>>4),t+=c.charAt((15&r)<<2|(192&o)>>6),t+=c.charAt(63&o)}return t}function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(0===e)return"0 B";var n=1024,r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n)),o=e/Math.pow(n,i);o.toPrecision(3);return o.toFixed(t)+r[i]}function R(){return m(String("undefined"!=typeof window&&window.location.href),"debug")}function S(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[r]:("00"+n[r]).substr(String(n[r]).length)));return t}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"未知错误，请稍后再试";window.XLJSWebViewBridge&&window.XLJSWebViewBridge.sendMessage("xlShowToast",JSON.stringify({message:e}))}function E(e,t,n){var r,o=new Date;return function(){var c=this,l=new Date;if(clearTimeout(r),l-o>=n){for(var d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];e.apply(c,f),o=l}else r=setTimeout(e,t)}}function C(e){if(!(e=parseInt(e)))return"0";for(var t=0;e>1024;)e/=1024,t++;return e>999.9&&(e=1,t++),"".concat(e.toFixed(0===t?0:1)).concat(["B","KB","MB","GB","TB"][t])}function P(e){if(!(e=parseInt(e)))return"0";for(var t=0;e>=1024;)e/=1024,t++;return"".concat(e.toFixed(1)).concat(["B","KB","M","G","T"][t])}function I(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))}function j(e){return e=e.toLowerCase(),console.log(e),-1!==e.indexOf("mobi")}function F(e){return/^(thunder|magnet|http[s]?|ftp|ed2k):/.test(e)}function D(e){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2?arguments[2]:void 0,n=Object(r.a)(data);for(var c in data)e===data[c].id?o.default.set(n[c],"nodes",t):data[c].nodes&&D(e,data[c].nodes,t);return n}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=3;e.length<6&&(t=2,n=1,r=2);var o=Array.from({length:r},(function(){return"*"})).join("");return e.substring(0,t)+o+e.substring(e.length-n)}function U(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)}))}function N(p){return p.then((function(e){return[null,e]})).catch((function(e){return[e]}))}function L(){}function M(e){var t=e.toLocaleLowerCase();if([".asf",".mpg",".rmvb",".rm",".wmv",".avi",".mp4",".mpeg",".mkv",".mov",".ts",".flv",".3gp"].includes(t))return"video";if([".apng",".bmp",".gif",".ico",".cur",".jpg",".jpeg",".jfif",".pjpeg",".pjp",".png",".svg",".tif",".tiff",".webp"].includes(t))return"picture";return[".aiff",".cue",".m4u",".au",".cdda",".raw",".wav",".flac",".tak",".mp3",".aac",".wma",".m4a",".mid",".mka",".mp2",".mpa",".mpc",".ape",".ofr",".ogg",".ra",".wv",".tta",".ac3",".dts",".nsf",".mod",".s3m",".xm",".it",".vst"].includes(t)?"music":"other"}function B(e){try{return JSON.parse(e.message).error_description}catch(e){return console.error("Error during parsing JSON"),""}}function z(e){if("string"!=typeof e)return"";var t=e.lastIndexOf(".");return e.slice(t)}function G(e){try{return JSON.parse(e)}catch(e){return{}}}function V(e){var t=~~(e/3600),n=~~(e/60%60),s=~~(e%60);return t<10&&(t="0"+t),n<10&&(n="0"+n),s<10&&(s="0"+s),t+":"+n+":"+s}function $(e){try{return JSON.parse(e)}catch(e){return""}}function Y(e){var t=n(4),r="aH/bH9K6KBCA9yPcs148YNdPTtGWdHEU/K6USp8GF5N";return"end"!=="undefined"?(0,n(82).pub6ia2V9SvIDiyTxa6N1unpdsAgKBtRcOq)(t(e+r)):e}function W(e){var t=n(4),r="LaAfethcD5jC+YaV8V3n6O2gdYbnkL";return"end"!=="undefined"?(0,n(85).pubqcq6srSNQlYU8euYrJDE1kAPswrwuNUk)(t(e+r)):e}function H(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(91).pubb6RzVoNHT5lOCaTIBiFgV0gX3a4mpL97)(t(e+r)):e}function X(e){var t=n(4),r="sXkzNyiI";return"end"!=="undefined"?(0,n(91).pubLNpd2m9WuYkysv1DHkMhhwjjvrhTLj28)(t(e+r)):e}function J(e){var t=n(4),r="erauVvJM3R7LdJM5pl";return"end"!=="undefined"?(0,n(9).pubTanM4hAEDO6Vl0QHK2SAKoWjRCSLZW2D)(t(e+r)):e}function K(e){var t=n(4),r="M3VNRIG2eyENW3GH4qL7uBMQq3ue1E7AbzMvIGeB7c0";return"end"!=="undefined"?(0,n(91).pubUibiydicUdeaTCKcxwjBzQZTFShrpDoR)(t(e+r)):e}function Q(e){var t=n(4),r="vUUl5C77l8MZo7e";return"end"!=="undefined"?(0,n(25).pub6QP56eBzNKBNwG316O6dB4jLs1koUvH9)(t(e+r)):e}function Z(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(82).pub7FBSuABejE7E4MYY9pzTWLpT7fybzuvU)(t(e+r)):e}},901:function(e,t){},91:function(e,t,n){"use strict";n.r(t),n.d(t,"parseTime",(function(){return o})),n.d(t,"pubWvwZ4oN5mICtCJwAzOeEuJPkBfUslvyl",(function(){return c})),n.d(t,"pubb6RzVoNHT5lOCaTIBiFgV0gX3a4mpL97",(function(){return l})),n.d(t,"pubbswnEp8j9HEXAZBVS4D1fkrjq92eD7AJ",(function(){return d})),n.d(t,"pubLNpd2m9WuYkysv1DHkMhhwjjvrhTLj28",(function(){return f})),n.d(t,"pubUibiydicUdeaTCKcxwjBzQZTFShrpDoR",(function(){return h})),n.d(t,"pubAMSAQl2u1fZYKlC89wq9okqCroAnoXTo",(function(){return v})),n.d(t,"pubcZBhnfWBt6J4adgH3bgo8d68XsXK98o0",(function(){return m})),n.d(t,"pubT1FtfvVlajDkt5ISyAvN2Usr3Xh8DlQu",(function(){return x}));n(632),n(24),n(7),n(8),n(1);var r=n(88);function o(time,e){if(0===arguments.length)return null;var t,n=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(r.a)(time)?t=time:("string"==typeof time&&/^[0-9]+$/.test(time)&&(time=parseInt(time)),"number"==typeof time&&10===time.toString().length&&(time*=1e3),t=new Date(time));var o={y:t.getFullYear(),m:t.getMonth()+1,d:t.getDate(),h:t.getHours(),i:t.getMinutes(),s:t.getSeconds(),a:t.getDay()},c=n.replace(/{([ymdhisa])+}/g,(function(e,t){var n=o[t];return"a"===t?["日","一","二","三","四","五","六"][n]:n.toString().padStart(2,"0")}));return c}function c(e){var t=n(4),r="V9yDxKUNsyy/NgSz18GAH";return"end"!=="undefined"?(0,n(82).pubVLWafYvz05XcF0afFBWncQXqv2hXmsnB)(t(e+r)):e}function l(e){var t=n(4),r="ZKjTCGU44UG1XWFyxhgKvAEnAzztT";return"end"!=="undefined"?(0,n(91).pubbswnEp8j9HEXAZBVS4D1fkrjq92eD7AJ)(t(e+r)):e}function d(e){var t=n(4),r="CeXdrJWUK1Miifm";return"end"!=="undefined"?(0,n(29).pubSOkyTbTRqhBNcYE7YF1Efqwa8SKP5Mfv)(t(e+r)):e}function f(e){var t=n(4),r="pTnzsUS6mDpCvCR3";return"end"!=="undefined"?(0,n(85).pub5oPagx51Bc4UoajaQotrGN4jOZ39eMMu)(t(e+r)):e}function h(e){var t=n(4),r="";return"end"!=="undefined"?(0,n(91).pubAMSAQl2u1fZYKlC89wq9okqCroAnoXTo)(t(e+r)):e}function v(e){var t=n(4),r="0Ht8s7IocviWWd6";return"end"!=="undefined"?(0,n(82).pub5lnaFggTF8sZ4rBTBi4DfzxbBmCvYiNN)(t(e+r)):e}function m(e){var t=n(4),r="undefined";return"end"!=="end"?(0,n(25).pubd5wQE1LAeeD8eICeXhpXtydmHXYkmpOd)(t(e+r)):e}function x(e){var t=n(4),r="zlMOKTgWfzpuKLlS2kxCQH13bFjjtcccm";return"end"!=="undefined"?(0,n(82).pub1lsnEFvD2sdCpLffGHQZF6VeBGbhsCpX)(t(e+r)):e}},922:function(e,t){},975:function(e,t,n){"use strict";n.r(t),n.d(t,"initState",(function(){return c})),n.d(t,"state",(function(){return l})),n.d(t,"mutations",(function(){return d})),n.d(t,"actions",(function(){return f}));var r=n(3),o=n(58),c=function(){return{shareFilesList:[]}},l=c(),d={setShareFilesList:function(e,t){e.shareFilesList=t},reset:function(e){Object.assign(e,c())}},f={shareFiles:function(e,t){var n=e.state;(0,e.commit)("setShareFilesList",t),r.a.checkRemoteFunction("ThunderPanPluginWebview","GetShareFiles").then((function(e){e||r.a.registerFunctions({GetShareFiles:function(){return n.shareFilesList}}),Object(o.createShareBW)()}))}}},976:function(e,t,n){"use strict";n.r(t),n.d(t,"initState",(function(){return m})),n.d(t,"state",(function(){return x})),n.d(t,"mutations",(function(){return k})),n.d(t,"getters",(function(){return y})),n.d(t,"actions",(function(){return w}));n(16);var r,o,c=n(13),l=(n(10),n(38),n(44),n(126),n(1),n(6)),d=n(0),f=n(3),h=n(64),v=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},m=function(){return{urlTask:{},urlTaskStatus:{},urlList:[],notCompletedTask:{},pageToken:"",isHasMore:!0}},x=m(),k={setUrlTaskStatus:function(e,t){var n=t.taskId,r=t.taskStatus;d.default.set(e.urlTaskStatus,n,r)},setUrlTask:function(e,t){t.id&&d.default.set(e.urlTask,t.id,t)},addUrlTask:function(e,t){t.id&&e.urlList.unshift(t.id)},delUrlTask:function(e,t){d.default.delete(e.urlTask,t)},removeUrlTask:function(e,t){var n=e.urlList.findIndex((function(e){return e===t}));n>-1?e.urlList.splice(n,1):console.error("delete unexist task")},setPageToken:function(e,t){e.pageToken=t},setIsHasMore:function(e,t){e.isHasMore=t},pushUrlList:function(e,t){t.id&&e.urlList.push(t.id)},setUrlList:function(e,t){e.urlList=t},copy:function(e,t){Object.assign(e,t)},reset:function(e){Object.assign(e,m())},setNotCompletedTask:function(e,t){d.default.set(e.notCompletedTask,t,!0)},deleteNotCompletedTask:function(e,t){d.default.delete(e.notCompletedTask,t)}},y={urlTasks:function(e){return e.urlList.map((function(t){var n;return Object.assign({},e.urlTask[t],{statuses:(null===(n=e.urlTaskStatus[t])||void 0===n?void 0:n.statuses)||[]})}))},getUrlTask:function(e){return function(t){var n;return Object.assign({},e.urlTask[t],{statuses:(null===(n=e.urlTaskStatus[t])||void 0===n?void 0:n.statuses)||[]})}},runningTaskNum:function(e){return e.urlList.reduce((function(pre,t){var n=e.urlTask[t].phase;return n&&["PHASE_TYPE_PENDING","PHASE_TYPE_RUNNING"].includes(n)&&(pre+=1),pre}),0)}},w={getUrlTasks:function(e){var t=e.commit,n=e.state,r=e.dispatch,o=e.rootState,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{refresh:!0},d=c.refresh,source=c.source;if(n.isHasMore||d)return d&&t("setIsHasMore",!0),Object(l.q)({limit:999,page_token:d?"":n.pageToken,type:"offline"}).then((function(e){var c=e.next_page_token,l=e.expires_in;c||t("setIsHasMore",!1);var h=e.tasks;if(h){t("setPageToken",c);var v=!1,m=[];h.forEach((function(e){["PHASE_TYPE_RUNNING","PHASE_TYPE_PENDING"].includes(e.phase)?(v=!0,t("setNotCompletedTask",e.id),f.a.broadcastEvent("ThunderPanUrlTaskDetailChanged",e)):n.notCompletedTask[e.id]&&(t("deleteNotCompletedTask",e.id),f.a.broadcastEvent("ThunderPanUrlTaskDetailChanged",e)),t("setUrlTask",e),d?m.push(e.id):t("pushUrlList",e)})),d&&t("setUrlList",m),v?setTimeout((function(){o.users.isAccessTokenReady&&r("getUrlTasks",{refresh:!0,source:"cron"}).catch((function(){}))}),1e3*l):"cron"===source&&setTimeout((function(){r("getAbout",{},{root:!0})}),1e4),f.a.callRemoteClientFunction("ThunderPanPluginTransfer","IpcSyncUrlTask",n)}return e}))},getSingleUrlTask:function(e,t){var n=e.commit;e.state,e.dispatch;return Object(l.o)(t).then((function(e){return n("setUrlTask",e),e}))},syncUrlTaskStore:function(e){var t=e.commit;return v(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcUrlTaskDataInit");case 2:n=e.sent,r=Object(c.a)(n,2),o=r[0],r[1],o&&t("copy",o);case 7:case"end":return e.stop()}}),e)})))},addUrlTask:function(e,t){var n=e.commit,r=(e.state,e.dispatch);return v(this,void 0,void 0,regeneratorRuntime.mark((function e(){var o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.e)(t);case 2:return o=e.sent,c=o.task,n("setUrlTask",c),n("addUrlTask",c),r("getUrlTasks"),f.a.callRemoteClientFunction("ThunderPanPluginTransfer","IpcTransferAddUrlTask",o.task),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))},ipcRemoveUrlTasks:function(e,t){e.commit,e.state;f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcTranferCall",["removeUrlTask",t])},ipcGetUrlTasks:function(e){var t=e.commit,n=(e.state,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);return v(this,void 0,void 0,regeneratorRuntime.mark((function e(){var r,o,l,d,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&t("setIsHasMore",!0),e.next=3,f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcTranferCall",["getUrlTasks",{refresh:n}]);case 3:if(r=e.sent,o=Object(c.a)(r,2),l=o[0],o[1],l){e.next=9;break}return e.abrupt("return");case 9:return(d=l.next_page_token)||t("setIsHasMore",!1),(h=l.tasks)&&(t("setPageToken",d),v=[],h.forEach((function(e){t("setUrlTask",e),n?v.push(e.id):t("pushUrlList",e)})),n&&t("setUrlList",v)),e.abrupt("return",l);case 14:case"end":return e.stop()}}),e)})))},removeUrlTask:function(e,t){var n=e.commit;e.state;return v(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.g)(t);case 2:e.sent,t.forEach((function(e){n("delUrlTask",e),n("removeUrlTask",e)})),f.a.broadcastEvent("ThunderPanUrlTaskDeleted",t);case 5:case"end":return e.stop()}}),e)})))},getSingleTaskStatus:function(e,t){var n=e.commit,r=e.state,o=t.taskId,c=t.refresh,d=void 0===c||c;return v(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,c,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f=!r.urlTaskStatus[o]||r.urlTaskStatus[o].isHasMore,d&&n("setUrlTaskStatus",{taskId:o,taskStatus:{statuses:[],next_page_token:"",isHasMore:!0}}),!d&&!f){e.next=10;break}return e.next=5,Object(l.n)(o,{page_token:d?"":r.urlTaskStatus[o].next_page_token});case 5:return h=e.sent,t=h.next_page_token,c=r.urlTaskStatus[o].statuses.concat(h.statuses),n("setUrlTaskStatus",{taskId:o,taskStatus:{statuses:c,next_page_token:t,isHasMore:""!==t}}),e.abrupt("return",h);case 10:case"end":return e.stop()}}),e)})))},ipcGetSingleTaskStatus:function(e,t){var n=e.commit,r=e.state,o=t.taskId,l=t.refresh,d=void 0===l||l;return v(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,l,h,v,m,x;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=!r.urlTaskStatus[o]||r.urlTaskStatus[o].isHasMore,d&&n("setUrlTaskStatus",{taskId:o,taskStatus:{statuses:[],next_page_token:"",isHasMore:!0}}),!d&&!h){e.next=10;break}return e.next=5,f.a.callRemoteClientFunction("ThunderPanPluginWebview","IpcTranferCall",["getSingleTaskStatus",{taskId:o,refresh:d}]);case 5:v=e.sent,m=Object(c.a)(v,2),x=m[0],m[1],x&&(t=x.next_page_token,l=r.urlTaskStatus[o].statuses.concat(x.statuses),n("setUrlTaskStatus",{taskId:o,taskStatus:{statuses:l,next_page_token:t,isHasMore:""!==t}}));case 10:case"end":return e.stop()}}),e)})))},initPanTransferListener:function(e,t){var n=e.commit;e.state;r=f.a.attachServerEvent("ThunderPanUrlTaskDeleted",(function(e,t){t.forEach((function(e){n("delUrlTask",e),n("removeUrlTask",e)}))}))},initListener:function(e,t){var n=this,r=(e.commit,e.state,e.rootState);o=f.a.attachServerEvent("OnConfigValueChanged",(function(e,section,t,o,c){return v(n,void 0,void 0,regeneratorRuntime.mark((function e(){var n,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("ThunderPanPlugin"!==section||"defaultSavePath"!==t){e.next=7;break}return n=r.users.curUser.userId,e.next=4,Object(h.getRecentFolder)(n);case 4:o=e.sent,(l=o.filter((function(e){return e.name===c}))).length>0&&Object(h.setDefaultSaveFolder)(n,l[0]);case 7:case"end":return e.stop()}}),e)})))}))},clearListener:function(e,t){e.commit,e.state;r&&f.a.detachServerEvent("ThunderPanUrlTaskDeleted",r),o&&f.a.detachServerEvent("OnConfigValueChanged",o)},getNotCompletedTask:function(e){e.dispatch;var t=e.commit,n=e.state;return Object(l.q)({type:"offline",filters:{phase:{in:"PHASE_TYPE_RUNNING,PHASE_TYPE_PENDING"}},limit:n.urlList.length}).then((function(e){var n=e.tasks;return n.forEach((function(e){t("setUrlTask",e)})),n}))}}},98:function(e,t,n){"use strict";n.r(t);var r=n(0);t.default=new r.default},981:function(e,t,n){"use strict";n.r(t);n(61),n(39),n(60),n(7),n(8),n(33);var r=n(88),o=(n(10),n(104),n(54)),c=(n(38),n(44),n(11),n(1),n(28),n(16),n(301),n(550),n(553),n(555),n(0)),l=n(501),d={},f=(n(119),n(13)),h=(n(45),n(557),n(558),n(155),n(560),n(24),n(114));function v(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(t){Object(h.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}function x(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function y(e){c.default.config.errorHandler&&c.default.config.errorHandler(e)}function w(e){return e.then((function(e){return e.default||e}))}function T(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e.$children||[],o=x(r);try{for(o.s();!(t=o.n()).done;){var c=t.value;c.$fetch?n.push(c):c.$children&&T(c,n)}}catch(e){o.e(e)}finally{o.f()}return n}function _(e,t){if(t||!e.options.__hasNuxtData){var n=e.options._originDataFn||e.options.data||function(){return{}};e.options._originDataFn=n,e.options.data=function(){var data=n.call(this,this);return this.$ssrContext&&(t=this.$ssrContext.asyncData[e.cid]),m(m({},data),t)},e.options.__hasNuxtData=!0,e._Ctor&&e._Ctor.options&&(e._Ctor.options.data=e.options.data)}}function R(e){return e.options&&e._Ctor===e||(e.options?(e._Ctor=e,e.extendOptions=e.options):(e=c.default.extend(e))._Ctor=e,!e.options.name&&e.options.__file&&(e.options.name=e.options.__file)),e}function S(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"components";return Array.prototype.concat.apply([],e.matched.map((function(e,r){return Object.keys(e[n]).map((function(o){return t&&t.push(r),e[n][o]}))})))}function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return S(e,t,"instances")}function E(e,t){return Array.prototype.concat.apply([],e.matched.map((function(e,n){return Object.keys(e.components).reduce((function(r,o){return e.components[o]?r.push(t(e.components[o],e.instances[o],e,o,n)):delete e.components[o],r}),[])})))}function C(e,t){return Promise.all(E(e,function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(n,r,o,c){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof n||n.options){e.next=4;break}return e.next=3,n();case 3:n=e.sent;case 4:return o.components[c]=n=R(n),e.abrupt("return","function"==typeof t?t(n,r,o,c):n);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}()))}function P(e){return I.apply(this,arguments)}function I(){return(I=Object(o.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,C(t);case 4:return e.abrupt("return",m(m({},t),{},{meta:S(t).map((function(e,n){return m(m({},e.options.meta),(t.matched[n]||{}).meta)}))}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e,t){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(regeneratorRuntime.mark((function e(t,n){var o,c,l,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.context||(t.context={isStatic:!0,isDev:!1,isHMR:!1,app:t,store:t.store,payload:n.payload,error:n.error,base:"./",env:{}},n.req&&(t.context.req=n.req),n.res&&(t.context.res=n.res),n.ssrContext&&(t.context.ssrContext=n.ssrContext),t.context.redirect=function(e,path,n){if(e){t.context._redirected=!0;var o=Object(r.a)(path);if("number"==typeof e||"undefined"!==o&&"object"!==o||(n=path||{},path=e,o=Object(r.a)(path),e=302),"object"===o&&(path=t.router.resolve(path).route.fullPath),!/(^[.]{1,2}\/)|(^\/(?!\/))/.test(path))throw path=$(path,n),window.location.replace(path),new Error("ERR_REDIRECT");t.context.next({path:path,query:n,status:e})}},t.context.nuxtState=window.__NUXT__),e.next=3,Promise.all([P(n.route),P(n.from)]);case 3:o=e.sent,c=Object(f.a)(o,2),l=c[0],d=c[1],n.route&&(t.context.route=l),n.from&&(t.context.from=d),t.context.next=n.next,t.context._redirected=!1,t.context._errored=!1,t.context.isHMR=!1,t.context.params=t.context.route.params||{},t.context.query=t.context.route.query||{};case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){var n;return(n=2===e.length?new Promise((function(n){e(t,(function(e,data){e&&t.error(e),n(data=data||{})}))})):e(t))&&n instanceof Promise&&"function"==typeof n.then?n:Promise.resolve(n)}function A(base,e){var path=decodeURI(window.location.pathname);return"hash"===e?window.location.hash.replace(/^#\//,""):(base&&0===path.indexOf(base)&&(path=path.slice(base.length)),(path||"/")+window.location.search+window.location.hash)}function U(e,t){return function(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===Object(r.a)(e[i])&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",V(t)));return function(t,r){for(var path="",data=t||{},o=(r||{}).pretty?B:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!=typeof l){var d=data[l.name||"pathMatch"],f=void 0;if(null==d){if(l.optional){l.partial&&(path+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Array.isArray(d)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(f=o(d[h]),!n[c].test(f))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(f)+"`");path+=(0===h?l.prefix:l.delimiter)+f}}else{if(f=l.asterisk?B(d,!0):o(d),!n[c].test(f))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+f+'"');path+=l.prefix+f}}else path+=l}return path}}(function(e,t){var n,r=[],o=0,c=0,path="",l=t&&t.delimiter||"/";for(;null!=(n=M.exec(e));){var d=n[0],f=n[1],h=n.index;if(path+=e.slice(c,h),c=h+d.length,f)path+=f[1];else{var v=e[c],m=n[2],x=n[3],k=n[4],y=n[5],w=n[6],T=n[7];path&&(r.push(path),path="");var _=null!=m&&null!=v&&v!==m,R="+"===w||"*"===w,S="?"===w||"*"===w,O=n[2]||l,pattern=k||y;r.push({name:x||o++,prefix:m||"",delimiter:O,optional:S,repeat:R,partial:_,asterisk:Boolean(T),pattern:pattern?G(pattern):T?".*":"[^"+z(O)+"]+?"})}}c<e.length&&(path+=e.substr(c));path&&r.push(path);return r}(e,t),t)}function N(e,t){var n={},r=m(m({},e),t);for(var o in r)String(e[o])!==String(t[o])&&(n[o]=!0);return n}function L(e){var t;if(e.message||"string"==typeof e)t=e.message||e;else try{t=JSON.stringify(e,null,2)}catch(n){t="[".concat(e.constructor.name,"]")}return m(m({},e),{},{message:t,statusCode:e.statusCode||e.status||e.response&&e.response.status||500})}window.onNuxtReadyCbs=[],window.onNuxtReady=function(e){window.onNuxtReadyCbs.push(e)};var M=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function B(e,t){var n=t?/[?#]/g:/[/?#]/g;return encodeURI(e).replace(n,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function z(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function G(e){return e.replace(/([=!:$/()])/g,"\\$1")}function V(e){return e&&e.sensitive?"":"i"}function $(e,t){var n,r=e.indexOf("://");-1!==r?(n=e.substring(0,r),e=e.substring(r+3)):e.startsWith("//")&&(e=e.substring(2));var o,c=e.split("/"),l=(n?n+"://":"//")+c.shift(),path=c.filter(Boolean).join("/");if(2===(c=path.split("#")).length){var d=c,h=Object(f.a)(d,2);path=h[0],o=h[1]}return l+=path?"/"+path:"",t&&"{}"!==JSON.stringify(t)&&(l+=(2===e.split("?").length?"&":"?")+function(e){return Object.keys(e).sort().map((function(t){var n=e[t];return null==n?"":Array.isArray(n)?n.slice().map((function(e){return[t,"=",e].join("")})).join("&"):t+"="+n})).filter(Boolean).join("&")}(t)),l+=o?"#"+o:""}function Y(e,t,n){e.$options[t]||(e.$options[t]=[]),e.$options[t].includes(n)||e.$options[t].push(n)}var W=n(502),H=n(360),X=n.n(H),J=n(180),K=n.n(J),Q=n(211);"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual",window.addEventListener("beforeunload",(function(){window.history.scrollRestoration="auto"})),window.addEventListener("load",(function(){window.history.scrollRestoration="manual"})));var Z=function(){},ee=Q.a.prototype.push;Q.a.prototype.push=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Z,n=arguments.length>2?arguments[2]:void 0;return ee.call(this,e,t,n)},c.default.use(Q.a);var te={mode:"hash",base:decodeURI("./"),linkActiveClass:"nuxt-link-active",linkExactActiveClass:"nuxt-link-exact-active",scrollBehavior:function(e,t,n){var r=!1,o=S(e);(o.length<2&&o.every((function(e){return!1!==e.options.scrollToTop}))||o.some((function(e){return e.options.scrollToTop})))&&(r={x:0,y:0}),n&&(r=n);var c=window.$nuxt;return e.path===t.path&&e.hash!==t.hash&&c.$nextTick((function(){return c.$emit("triggerScroll")})),new Promise((function(t){c.$once("triggerScroll",(function(){if(e.hash){var n=e.hash;void 0!==window.CSS&&void 0!==window.CSS.escape&&(n="#"+window.CSS.escape(n.substr(1)));try{document.querySelector(n)&&(r={selector:n})}catch(e){console.warn("Failed to save scroll position. Please add CSS.escape() polyfill (https://github.com/mathiasbynens/CSS.escape).")}}t(r)}))}))},routes:[{path:"/transfer",component:function(){return w(Promise.all([n.e(0),n.e(18)]).then(n.bind(null,1102)))},name:"transfer",children:[{path:":id",component:function(){return w(Promise.all([n.e(0),n.e(19)]).then(n.bind(null,1104)))},name:"transfer-id"}]},{path:"/bw/fetch-back",component:function(){return w(n.e(13).then(n.bind(null,1105)))},name:"bw-fetch-back"},{path:"/bw/import-download",component:function(){return w(n.e(14).then(n.bind(null,1106)))},name:"bw-import-download"},{path:"/bw/share",component:function(){return w(n.e(15).then(n.bind(null,1103)))},name:"bw-share"},{path:"/bw/tree-path",component:function(){return w(n.e(16).then(n.bind(null,1107)))},name:"bw-tree-path"},{path:"/",component:function(){return w(Promise.all([n.e(22),n.e(17)]).then(n.bind(null,1101)))},name:"index"}],fallback:!1};function ne(){return new Q.a(te)}var re={name:"NuxtChild",functional:!0,props:{nuxtChildKey:{type:String,default:""},keepAlive:Boolean,keepAliveProps:{type:Object,default:void 0}},render:function(e,t){var n=t.parent,data=t.data,r=t.props,o=n.$createElement;data.nuxtChild=!0;for(var c=n,l=n.$nuxt.nuxt.transitions,d=n.$nuxt.nuxt.defaultTransition,f=0;n;)n.$vnode&&n.$vnode.data.nuxtChild&&f++,n=n.$parent;data.nuxtChildDepth=f;var h=l[f]||d,v={};ie.forEach((function(e){void 0!==h[e]&&(v[e]=h[e])}));var m={};oe.forEach((function(e){"function"==typeof h[e]&&(m[e]=h[e].bind(c))}));var x=m.beforeEnter;if(m.beforeEnter=function(e){if(window.$nuxt.$nextTick((function(){window.$nuxt.$emit("triggerScroll")})),x)return x.call(c,e)},!1===h.css){var k=m.leave;(!k||k.length<2)&&(m.leave=function(e,t){k&&k.call(c,e),c.$nextTick(t)})}var y=o("routerView",data);return r.keepAlive&&(y=o("keep-alive",{props:r.keepAliveProps},[y])),o("transition",{props:v,on:m},[y])}},ie=["name","mode","appear","css","type","duration","enterClass","leaveClass","appearClass","enterActiveClass","enterActiveClass","leaveActiveClass","appearActiveClass","enterToClass","leaveToClass","appearToClass"],oe=["beforeEnter","enter","afterEnter","enterCancelled","beforeLeave","leave","afterLeave","leaveCancelled","beforeAppear","appear","afterAppear","appearCancelled"],ae=(n(32),n(146)),se=n(149),ce=n(212),ue=n(213),le=n(148);function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(le.a)(e);if(t){var o=Object(le.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(ue.a)(this,n)}}var fe=function(e){Object(ce.a)(n,e);var t=de(n);function n(){return Object(ae.a)(this,n),t.apply(this,arguments)}return Object(se.a)(n,[{key:"refresh",value:function(){location.reload()}}]),n}(n(365).Vue),pe=n(147),he=Object(pe.a)(fe,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"xly-error"},[t("i",{staticClass:"xly-img-network"}),this._v(" "),t("p",[this._v("网络异常，请检查网络设置")]),this._v(" "),t("td-button",{attrs:{size:"small"},on:{click:this.refresh}},[this._v("\n    点击重试\n  ")])],1)}),[],!1,null,null,null).exports,ve={name:"Nuxt",components:{NuxtChild:re,NuxtError:he},props:{nuxtChildKey:{type:String,default:void 0},keepAlive:Boolean,keepAliveProps:{type:Object,default:void 0},name:{type:String,default:"default"}},errorCaptured:function(e){this.displayingNuxtError&&(this.errorFromNuxtError=e,this.$forceUpdate())},computed:{routerViewKey:function(){if(void 0!==this.nuxtChildKey||this.$route.matched.length>1)return this.nuxtChildKey||U(this.$route.matched[0].path)(this.$route.params);var e=Object(f.a)(this.$route.matched,1)[0];if(!e)return this.$route.path;var t=e.components.default;if(t&&t.options){var n=t.options;if(n.key)return"function"==typeof n.key?n.key(this.$route):n.key}return/\/$/.test(e.path)?this.$route.path:this.$route.path.replace(/\/$/,"")}},beforeCreate:function(){c.default.util.defineReactive(this,"nuxt",this.$root.$options.nuxt)},render:function(e){var t=this;return this.nuxt.err?this.errorFromNuxtError?(this.$nextTick((function(){return t.errorFromNuxtError=!1})),e("div",{},[e("h2","An error occured while showing the error page"),e("p","Unfortunately an error occured and while showing the error page another error occured"),e("p","Error details: ".concat(this.errorFromNuxtError.toString())),e("nuxt-link",{props:{to:"/"}},"Go back to home")])):(this.displayingNuxtError=!0,this.$nextTick((function(){return t.displayingNuxtError=!1})),e(he,{props:{error:this.nuxt.err}})):e("NuxtChild",{key:this.routerViewKey,props:this.$props})}},ge={name:"NuxtLoading",data:function(){return{percent:0,show:!1,canSucceed:!0,reversed:!1,skipTimerCount:0,rtl:!1,throttle:200,duration:5e3,continuous:!1}},computed:{left:function(){return!(!this.continuous&&!this.rtl)&&(this.rtl?this.reversed?"0px":"auto":this.reversed?"auto":"0px")}},beforeDestroy:function(){this.clear()},methods:{clear:function(){clearInterval(this._timer),clearTimeout(this._throttle),this._timer=null},start:function(){var e=this;return this.clear(),this.percent=0,this.reversed=!1,this.skipTimerCount=0,this.canSucceed=!0,this.throttle?this._throttle=setTimeout((function(){return e.startTimer()}),this.throttle):this.startTimer(),this},set:function(e){return this.show=!0,this.canSucceed=!0,this.percent=Math.min(100,Math.max(0,Math.floor(e))),this},get:function(){return this.percent},increase:function(e){return this.percent=Math.min(100,Math.floor(this.percent+e)),this},decrease:function(e){return this.percent=Math.max(0,Math.floor(this.percent-e)),this},pause:function(){return clearInterval(this._timer),this},resume:function(){return this.startTimer(),this},finish:function(){return this.percent=this.reversed?0:100,this.hide(),this},hide:function(){var e=this;return this.clear(),setTimeout((function(){e.show=!1,e.$nextTick((function(){e.percent=0,e.reversed=!1}))}),500),this},fail:function(e){return this.canSucceed=!1,this},startTimer:function(){var e=this;this.show||(this.show=!0),void 0===this._cut&&(this._cut=1e4/Math.floor(this.duration)),this._timer=setInterval((function(){e.skipTimerCount>0?e.skipTimerCount--:(e.reversed?e.decrease(e._cut):e.increase(e._cut),e.continuous&&(e.percent>=100||e.percent<=0)&&(e.skipTimerCount=1,e.reversed=!e.reversed))}),100)}},render:function(e){var t=e(!1);return this.show&&(t=e("div",{staticClass:"nuxt-progress",class:{"nuxt-progress-notransition":this.skipTimerCount>0,"nuxt-progress-failed":!this.canSucceed},style:{width:this.percent+"%",left:this.left}})),t}},me=(n(565),Object(pe.a)(ge,void 0,void 0,!1,null,null,null).exports);n(567),n(574),n(576),n(578),n(580),n(582),n(584),n(586),n(588);function be(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xe(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var ke={_default:R(Object(pe.a)({},(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{height:"100vh"}},[t("nuxt")],1)}),[],!1,null,null,null).exports)},ye={render:function(e,t){var n=e("NuxtLoading",{ref:"loading"});if(this.nuxt.err&&he){var r=(he.options||he).layout;r&&this.setLayout("function"==typeof r?r.call(he,this.context):r)}var o=e(this.layout||"nuxt"),c=e("div",{domProps:{id:"__layout"},key:this.layoutName},[o]),l=e("transition",{props:{name:"layout",mode:"out-in"},on:{beforeEnter:function(e){window.$nuxt.$nextTick((function(){window.$nuxt.$emit("triggerScroll")}))}}},[c]);return e("div",{domProps:{id:"__nuxt"}},[n,l])},data:function(){return{isOnline:!0,layout:null,layoutName:"",nbFetching:0}},beforeCreate:function(){c.default.util.defineReactive(this,"nuxt",this.$options.nuxt)},created:function(){c.default.prototype.$nuxt=this,window.$nuxt=this,this.refreshOnlineStatus(),window.addEventListener("online",this.refreshOnlineStatus),window.addEventListener("offline",this.refreshOnlineStatus),this.error=this.nuxt.error,this.context=this.$options.context},mounted:function(){this.$loading=this.$refs.loading},watch:{"nuxt.err":"errorChanged"},computed:{isOffline:function(){return!this.isOnline},isFetching:function(){return this.nbFetching>0}},methods:{refreshOnlineStatus:function(){void 0===window.navigator.onLine?this.isOnline=!0:this.isOnline=window.navigator.onLine},refresh:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=O(e.$route)).length){t.next=3;break}return t.abrupt("return");case 3:return e.$loading.start(),r=n.map((function(t){var p=[];if(t.$options.fetch&&t.$options.fetch.length&&p.push(D(t.$options.fetch,e.context)),t.$fetch)p.push(t.$fetch());else{var n,r=be(T(t.$vnode.componentInstance));try{for(r.s();!(n=r.n()).done;){var component=n.value;p.push(component.$fetch())}}catch(e){r.e(e)}finally{r.f()}}return t.$options.asyncData&&p.push(D(t.$options.asyncData,e.context).then((function(e){for(var n in e)c.default.set(t.$data,n,e[n])}))),Promise.all(p)})),t.prev=5,t.next=8,Promise.all(r);case 8:t.next=15;break;case 10:t.prev=10,t.t0=t.catch(5),e.$loading.fail(t.t0),y(t.t0),e.error(t.t0);case 15:e.$loading.finish();case 16:case"end":return t.stop()}}),t,null,[[5,10]])})))()},errorChanged:function(){this.nuxt.err&&this.$loading&&(this.$loading.fail&&this.$loading.fail(this.nuxt.err),this.$loading.finish&&this.$loading.finish())},setLayout:function(e){return e&&ke["_"+e]||(e="default"),this.layoutName=e,this.layout=ke["_"+e],this.layout},loadLayout:function(e){return e&&ke["_"+e]||(e="default"),Promise.resolve(ke["_"+e])}},components:{NuxtLoading:me}},we=n(125);function Te(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}c.default.use(we.a);var Re=["state","getters","actions","mutations"],Se={};(Se=function(e,t){if((e=e.default||e).commit)throw new Error("[nuxt] ".concat(t," should export a method that returns a Vuex instance."));return"function"!=typeof e&&(e=Object.assign({},e)),Ee(e,t)}(n(590),"store/index.ts")).modules=Se.modules||{},Ce(n(703),"drive.ts"),Ce(n(704),"local-upload.ts"),Ce(n(527),"retrieval-list.ts"),Ce(n(975),"share.ts"),Ce(n(976),"url-task-list.ts"),Ce(n(516),"users.ts");var Oe=Se instanceof Function?Se:function(){return new we.a.Store(Object.assign({strict:!1},Se))};function Ee(e,t){if(e.state&&"function"!=typeof e.state){console.warn("'state' should be a method that returns an object in ".concat(t));var n=Object.assign({},e.state);e=Object.assign({},e,{state:function(){return n}})}return e}function Ce(e,t){e=e.default||e;var n=t.replace(/\.(js|mjs|ts)$/,"").split("/"),r=n[n.length-1],o="store/".concat(t);if(e="state"===r?function(e,t){if("function"!=typeof e){console.warn("".concat(t," should export a method that returns an object"));var n=Object.assign({},e);return function(){return n}}return Ee(e,t)}(e,o):Ee(e,o),Re.includes(r)){var c=r;Ie(Pe(Se,n,{isProperty:!0}),e,c)}else{"index"===r&&(n.pop(),r=n[n.length-1]);var l,d=Pe(Se,n),f=Te(Re);try{for(f.s();!(l=f.n()).done;){var h=l.value;Ie(d,e[h],h)}}catch(e){f.e(e)}finally{f.f()}!1===e.namespaced&&delete d.namespaced}}function Pe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isProperty,o=void 0!==r&&r;if(!t.length||o&&1===t.length)return e;var c=t.shift();return e.modules[c]=e.modules[c]||{},e.modules[c].namespaced=!0,e.modules[c].modules=e.modules[c].modules||{},Pe(e.modules[c],t,{isProperty:o})}function Ie(e,t,n){t&&("state"===n?e.state=t||e.state:e[n]=Object.assign({},e[n],t))}var je=n(43),Fe=n.n(je),De=n(513),Ae=n.n(De);function Ue(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}for(var Le="undefined"!=typeof window&&window.$nuxt,Me={setBaseURL:function(e){this.defaults.baseURL=e},setHeader:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common",o=Ue(Array.isArray(r)?r:[r]);try{for(o.s();!(n=o.n()).done;){var c=n.value;if(!t)return void delete this.defaults.headers[c][e];this.defaults.headers[c][e]=t}}catch(e){o.e(e)}finally{o.f()}},setToken:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common",r=e?(t?t+" ":"")+e:null;this.setHeader("Authorization",r,n)},onRequest:function(e){this.interceptors.request.use((function(t){return e(t)||t}))},onResponse:function(e){this.interceptors.response.use((function(t){return e(t)||t}))},onRequestError:function(e){this.interceptors.request.use(void 0,(function(t){return e(t)||Promise.reject(t)}))},onResponseError:function(e){this.interceptors.response.use(void 0,(function(t){return e(t)||Promise.reject(t)}))},onError:function(e){this.onRequestError(e),this.onResponseError(e)},create:function(e){return Ge(Ae()(e,this.defaults))}},Be=function(){var e=qe[ze];Me["$"+e]=function(){return this[e].apply(this,arguments).then((function(e){return e&&e.data}))}},ze=0,qe=["request","delete","get","head","options","post","put","patch"];ze<qe.length;ze++)Be();var Ge=function(e){var t=Fe.a.create(e);return t.CancelToken=Fe.a.CancelToken,t.isCancel=Fe.a.isCancel,function(e){for(var t in Me)e[t]=Me[t].bind(e)}(t),Ve(t),t},Ve=function(e){var t={finish:function(){},start:function(){},fail:function(){},set:function(){}},n=function(){return Le&&Le.$loading&&Le.$loading.set?Le.$loading:t},r=0;e.onRequest((function(e){e&&!1===e.progress||r++})),e.onResponse((function(e){e&&e.config&&!1===e.config.progress||--r<=0&&(r=0,n().finish())})),e.onError((function(e){e&&e.config&&!1===e.config.progress||(r--,Fe.a.isCancel(e)||(n().fail(),n().finish()))}));var o=function(e){if(r){var progress=100*e.loaded/(e.total*r);n().set(Math.min(100,progress))}};e.defaults.onUploadProgress=o,e.defaults.onDownloadProgress=o},$e=function(e,t){var n=Ge({baseURL:"http://localhost:8089/",headers:{common:{Accept:"application/json, text/plain, */*"},delete:{},get:{},head:{},post:{},put:{},patch:{}}});e.$axios=n,t("axios",n)},Ye=n(37),We=n(47),He=function(e,t){t("eventTrack",We.eventTrack)},Xe=n(3),Je=n(12),Ke=n(64),Qe=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},Ze=function(e){return Qe(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.prev=1,t.next=4,Je.client.callServerFunction("IsLogined");case 4:n=t.sent,t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.error("[plugins/get-user-info]Failed at client.callServerFunction(IsLogined)"),n=!1;case 11:if(!n){t.next=33;break}return t.next=14,Je.client.callRemoteClientFunction("User","UserGetAccessToken");case 14:return t.sent[0]&&e.store.commit("users/setIsAccessTokenReady",!0),t.prev=16,t.next=19,Je.client.callServerFunction("GetUserInfo");case 19:r=t.sent,r=JSON.parse(r),console.log("当前用户信息：",r),t.next=27;break;case 24:t.prev=24,t.t1=t.catch(16),console.error("[plugins/get-user-info]Failed at client.callServerFunction(GetUserInfo)",t.t1);case 27:return t.next=29,Object(Ke.getRecentFolder)(r[1].userid);case 29:return o=t.sent,Object(Ke.setRecentFolder)(r[1].userid,o),e.store.commit("users/setCurUser",r),t.abrupt("return",!0);case 33:return t.abrupt("return",!1);case 34:case"end":return t.stop()}}),t,null,[[1,7],[16,24]])})))},et=function(e){return Promise.all([Xe.a.callServerFunction("GetPeerID").then((function(t){e.store.commit("setPeerId",t)})),Xe.a.callServerFunction("GetThunderVersion").then((function(t){e.store.commit("setVersion",t)}))])},tt=n(145),nt=n(58),it=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function l(e){try{f(r.next(e))}catch(e){c(e)}}function d(e){try{f(r.throw(e))}catch(e){c(e)}}function f(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(l,d)}f((r=r.apply(e,t||[])).next())}))},ot=function(e){return it(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Xe.a.attachServerEvent("OnLogout",(function(){return it(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/"!==e.route.path&&window.close(),e.store.commit("retrieval-list/setCategoryData",{}),t.next=4,e.store.dispatch("retrieval-list/pauseAllTask");case 4:e.store.commit("users/setIsAccessTokenReady",!1),e.store.dispatch("resetAllStore");case 6:case"end":return t.stop()}}),t)})))})),Xe.a.attachServerEvent("UserEvent",(function(t,r){return it(n,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o,c,l,d,f,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.store.commit("retrieval-list/setCategoryData",{}),o=!1,t.prev=3,t.next=6,Xe.a.callServerFunction("IsLogined");case 6:o=t.sent,t.next=13;break;case 9:t.prev=9,t.t0=t.catch(3),console.error("[plugins/get-user-info]Failed at client.callServerFunction(IsLogined)"),o=!1;case 13:if(!o){t.next=31;break}return t.prev=14,t.next=17,Xe.a.callServerFunction("GetPeerID").then((function(t){e.store.commit("setPeerId",t)}));case 17:return t.next=19,Xe.a.callServerFunction("GetThunderVersion").then((function(t){e.store.commit("setVersion",t)}));case 19:return Xe.a.callServerFunction("GetLoginDeviceID").then((function(t){e.store.commit("setDeviceId",t)})),t.next=22,Xe.a.callServerFunction("GetUserInfo");case 22:c=t.sent,c=JSON.parse(c),console.log("当前用户信息：",c),t.next=30;break;case 27:t.prev=27,t.t1=t.catch(14),console.error("[plugins/get-user-info]Failed at client.callServerFunction(GetUserInfo)",t.t1);case 30:e.store.commit("users/setCurUser",c);case 31:return t.next=33,Xe.a.callServerFunction("GetUserInfo");case 33:l=t.sent,t.prev=34,l=JSON.parse(l),d=null===(n=null==l?void 0:l[1])||void 0===n?void 0:n.userid,f=JSON.parse(r),t.next=43;break;case 40:throw t.prev=40,t.t2=t.catch(34),new Error("ERROR during parsing JSON in account plugins.");case 43:if("OnAcTokenReady"!==f.subject){t.next=55;break}if(e.store.commit("users/setIsAccessTokenReady",!0),"true"===localStorage.getItem("isTaskImportShown_".concat(d))){t.next=55;break}return t.next=48,e.store.dispatch("drive/checkImportDownload");case 48:if(e.store.state.drive.importState.isImported){t.next=55;break}try{localStorage.setItem("isTaskImportShown_".concat(d),"true")}catch(e){console.log("[plugins/account]Failed at set localStorage.")}return t.next=53,Object(nt.createLocalBrowserWindow)("/bw/import-download",{width:420,height:309,frame:!1,movable:!0,resizable:!1,center:!0,modal:!0});case 53:h=t.sent,Xe.a.callServerFunction("RoundRectWindow",h.id);case 55:t.next=60;break;case 57:t.prev=57,t.t3=t.catch(0),console.error("[plugins/account]",t.t3);case 60:case"end":return t.stop()}}),t,null,[[0,57],[3,9],[14,27],[34,40]])})))}));case 2:case"end":return t.stop()}}),t)})))},at=n(364),st=n.n(at),ct=n(514),ut=n.n(ct);c.default.use(ut.a);var lt,ft,pt,ht;lt=c.default,ht=!1,lt.directive("touch",{bind:function(e,t){var n=t.value,r=t.arg,o=void 0===r?500:r,c=0,l=0,d=0;ft=function(t){return ht=!1,c=new Date,l=document.documentElement.scrollTop||document.body.scrollTop,e.classList.add("touch"),d=(t.touches||[])[0].pageY,!0},pt=function(t){if(ht)return!0;ht=!0;var r=new Date,f=document.documentElement.scrollTop||document.body.scrollTop;e.classList.contains("touch")&&e.classList.remove("touch");var h=(t.changedTouches||[])[0].pageY||0;return r-c>=o&&f===l?n.long&&n.long(t):Math.abs(h-d)<10&&f===l&&n.touch&&n.touch(t),!0},e.addEventListener("touchstart",ft),e.addEventListener("touchend",pt),e.addEventListener("touchcancel",pt)},unbind:function(e){ft&&e.removeEventListener("touchstart",ft),pt&&e.removeEventListener("touchend",pt),pt&&e.removeEventListener("touchcancel",pt)}});var vt=n(98),gt=function(e,t){t("bus",vt.default)},mt=(n(977),n(498),n(499),n(282));function bt(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.target,r=t.show,o=void 0===r?function(){}:r,c=t.hide,l=void 0===c?function(){}:c,d=t.threshold,f=void 0===d?.01:d,h=t.once,v=void 0!==h&&h,m=t.root,x=void 0===m?null:m;f=Math.max(Math.min(f,1),.01);try{var k=new window.IntersectionObserver((function(t){t[0].intersectionRatio>=f?(o(),v&&e.stop()):l()}),{threshold:[f],root:x});k.observe(n),this.stop=function(){k.disconnect()}}catch(e){console.error(e.message,"\n不支持IntersectionObserver，升级浏览器或代码使用polyfill: https://github.com/w3c/IntersectionObserver")}}c.default.use(mt.b);var xt={install:function(e){e.directive("observer",{inserted:function(e,t){var n=t.value,r=t.arg,o=t.modifiers;e.observer=new bt({target:e,show:"function"==typeof n?n:n.show,hide:n.hide,threshold:r/100||void 0,once:o.once,root:n.dom})},unbind:function(e){e.observer&&"function"==typeof e.observer.stop&&e.observer.stop()}})}};c.default.use(xt);var kt=n(210),yt=n.n(kt),wt={install:function(e){e.directive("load",{inserted:function(e,t){var n=t.value,r=n.func,o=void 0===r?function(){}:r,c=n.root,l=void 0===c?null:c,d=n.distance,f=void 0===d?"0px":d;yt()(o,{target:e,root:l,distance:f})}})}};c.default.use(wt);var Tt=n(124),_t=n.n(Tt),Rt=function(e,t){t("sget",_t.a)};function St(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function Ot(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?St(Object(source),!0).forEach((function(t){Object(h.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):St(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}c.default.component(X.a.name,X.a),c.default.component(K.a.name,Ot(Ot({},K.a),{},{render:function(e,t){return K.a._warned||(K.a._warned=!0,console.warn("<no-ssr> has been deprecated and will be removed in Nuxt 3, please use <client-only> instead")),K.a.render(e,t)}})),c.default.component(re.name,re),c.default.component("NChild",re),c.default.component(ve.name,ve),c.default.use(W.a,{keyName:"head",attribute:"data-n-head",ssrAttribute:"data-n-head-ssr",tagIDKeyName:"hid"});var Et={name:"page",mode:"out-in",appear:!0,appearClass:"appear",appearActiveClass:"appear-active",appearToClass:"appear-to"};function Ct(){return(Ct=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,r,o,l,d,path,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:return n=e.sent,(r=Oe(t)).$router=n,o=Ot({head:{title:"thunder11-plugin-pan",meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1"},{hid:"description",name:"description",content:"thunder11-plugin-pan"}],link:[{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}],style:[],script:[]},store:r,router:n,nuxt:{defaultTransition:Et,transitions:[Et],setTransitions:function(e){return Array.isArray(e)||(e=[e]),e=e.map((function(e){return e=e?"string"==typeof e?Object.assign({},Et,{name:e}):Object.assign({},Et,e):Et})),this.$options.nuxt.transitions=e,e},err:null,dateErr:null,error:function(e){e=e||null,o.context._errored=Boolean(e),e=e?L(e):null;var n=o.nuxt;return this&&(n=this.nuxt||this.$options.nuxt),n.dateErr=Date.now(),n.err=e,t&&(t.nuxt.error=e),e}}},ye),r.app=o,l=t?t.next:function(e){return o.router.push(e)},t?d=n.resolve(t.url).route:(path=A(n.options.base,n.options.mode),d=n.resolve(path).route),e.next=11,j(o,{store:r,route:d,next:l,error:o.nuxt.error.bind(o),payload:t?t.payload:void 0,req:t?t.req:void 0,res:t?t.res:void 0,beforeRenderFns:t?t.beforeRenderFns:void 0,ssrContext:t});case 11:return f=function(e,t){if(!e)throw new Error("inject(key, value) has no key provided");if(void 0===t)throw new Error("inject('".concat(e,"', value) has no value provided"));o[e="$"+e]=t,r[e]=o[e];var n="__nuxt_"+e+"_installed__";c.default[n]||(c.default[n]=!0,c.default.use((function(){Object.prototype.hasOwnProperty.call(c.default,e)||Object.defineProperty(c.default.prototype,e,{get:function(){return this.$root.$options[e]}})})))},window.__NUXT__&&window.__NUXT__.state&&r.replaceState(window.__NUXT__.state),e.next=16,$e(o.context,f);case 16:if("function"!=typeof Ye.a){e.next=19;break}return e.next=19,Object(Ye.a)(o.context,f);case 19:return e.next=22,He(o.context,f);case 22:if("function"!=typeof Xe.b){e.next=25;break}return e.next=25,Object(Xe.b)(o.context,f);case 25:return e.next=28,Ze(o.context);case 28:return e.next=31,et(o.context);case 31:if("function"!=typeof tt.b){e.next=34;break}return e.next=34,Object(tt.b)(o.context,f);case 34:return e.next=37,ot(o.context);case 37:if("function"!=typeof st.a){e.next=40;break}return e.next=40,st()(o.context,f);case 40:e.next=43;break;case 43:e.next=46;break;case 46:return e.next=49,gt(o.context,f);case 49:e.next=52;break;case 52:e.next=55;break;case 55:e.next=58;break;case 58:e.next=61;break;case 61:e.next=64;break;case 64:return e.next=67,Rt(o.context,f);case 67:e.next=70;break;case 70:return e.abrupt("return",{store:r,app:o,router:n});case 71:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pt=window.__NUXT__,It={beforeCreate:function(){var e;(e=this).$options&&"function"==typeof e.$options.fetch&&!e.$options.fetch.length&&(this._fetchDelay="number"==typeof this.$options.fetchDelay?this.$options.fetchDelay:200,c.default.util.defineReactive(this,"$fetchState",{pending:!1,error:null,timestamp:Date.now()}),this.$fetch=Dt.bind(this),Y(this,"created",Ft),Y(this,"beforeMount",jt))}};function jt(){if(!this._hydrated)return this.$fetch()}function Ft(){if((e=this).$vnode&&e.$vnode.elm&&e.$vnode.elm.dataset&&e.$vnode.elm.dataset.fetchKey){var e;this._hydrated=!0,this._fetchKey=+this.$vnode.elm.dataset.fetchKey;var data=Pt.fetch[this._fetchKey];if(data&&data._error)this.$fetchState.error=data._error;else for(var t in data)c.default.set(this.$data,t,data[t])}}function Dt(){var e=this;return this._fetchPromise||(this._fetchPromise=At.call(this).then((function(){delete e._fetchPromise}))),this._fetchPromise}function At(){return Ut.apply(this,arguments)}function Ut(){return(Ut=Object(o.a)(regeneratorRuntime.mark((function e(){var t,n,r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$nuxt.nbFetching++,this.$fetchState.pending=!0,this.$fetchState.error=null,this._hydrated=!1,t=null,n=Date.now(),e.prev=6,e.next=9,this.$options.fetch.call(this);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),t=L(e.t0);case 14:if(!((r=this._fetchDelay-(Date.now()-n))>0)){e.next=18;break}return e.next=18,new Promise((function(e){return setTimeout(e,r)}));case 18:this.$fetchState.error=t,this.$fetchState.pending=!1,this.$fetchState.timestamp=Date.now(),this.$nextTick((function(){return o.$nuxt.nbFetching--}));case 22:case"end":return e.stop()}}),e,this,[[6,11]])})))).apply(this,arguments)}function Nt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var Mt=window.requestIdleCallback||function(e){var t=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},Bt=window.cancelIdleCallback||function(e){clearTimeout(e)},zt=window.IntersectionObserver&&new window.IntersectionObserver((function(e){e.forEach((function(e){var t=e.intersectionRatio,link=e.target;t<=0||link.__prefetch()}))})),qt={name:"NuxtLink",extends:c.default.component("RouterLink"),props:{prefetch:{type:Boolean,default:!0},noPrefetch:{type:Boolean,default:!1}},mounted:function(){this.prefetch&&!this.noPrefetch&&(this.handleId=Mt(this.observe,{timeout:2e3}))},beforeDestroy:function(){Bt(this.handleId),this.__observed&&(zt.unobserve(this.$el),delete this.$el.__prefetch)},methods:{observe:function(){zt&&this.shouldPrefetch()&&(this.$el.__prefetch=this.prefetchLink.bind(this),zt.observe(this.$el),this.__observed=!0)},shouldPrefetch:function(){return this.getPrefetchComponents().length>0},canPrefetch:function(){var e=navigator.connection;return!(this.$nuxt.isOffline||e&&((e.effectiveType||"").includes("2g")||e.saveData))},getPrefetchComponents:function(){return this.$router.resolve(this.to,this.$route,this.append).resolved.matched.map((function(e){return e.components.default})).filter((function(e){return"function"==typeof e&&!e.options&&!e.__prefetched}))},prefetchLink:function(){if(this.canPrefetch()){zt.unobserve(this.$el);var e,t=Nt(this.getPrefetchComponents());try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n();r instanceof Promise&&r.catch((function(){})),n.__prefetched=!0}}catch(e){t.e(e)}finally{t.f()}}}}};function Gt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}c.default.__nuxt__fetch__mixin__||(c.default.mixin(It),c.default.__nuxt__fetch__mixin__=!0),c.default.component(qt.name,qt),c.default.component("NLink",qt),global.fetch||(global.fetch=l.a);var $t,Yt,Wt=[],Ht=window.__NUXT__||{};Object.assign(c.default.config,{silent:!0,performance:!1});var Xt=c.default.config.errorHandler||console.error;function Jt(e,t,n){for(var r=function(component){var e=function(component,e){if(!component||!component.options||!component.options[e])return{};var option=component.options[e];if("function"==typeof option){for(var t=arguments.length,n=new Array(t>2?t-2:0),r=2;r<t;r++)n[r-2]=arguments[r];return option.apply(void 0,n)}return option}(component,"transition",t,n)||{};return"string"==typeof e?{name:e}:e},o=n?S(n):[],c=Math.max(e.length,o.length),l=[],d=function(i){var t=Object.assign({},r(e[i])),n=Object.assign({},r(o[i]));Object.keys(t).filter((function(e){return void 0!==t[e]&&!e.toLowerCase().includes("leave")})).forEach((function(e){n[e]=t[e]})),l.push(n)},i=0;i<c;i++)d(i);return l}function Kt(e,t,n){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(o.a)(regeneratorRuntime.mark((function e(t,n,r){var o,c,l,d,f=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._routeChanged=Boolean($t.nuxt.err)||n.name!==t.name,this._paramChanged=!this._routeChanged&&n.path!==t.path,this._queryChanged=!this._paramChanged&&n.fullPath!==t.fullPath,this._diffQuery=this._queryChanged?N(t.query,n.query):[],(this._routeChanged||this._paramChanged)&&this.$loading.start&&!this.$loading.manual&&this.$loading.start(),e.prev=5,!this._queryChanged){e.next=12;break}return e.next=9,C(t,(function(e,t){return{Component:e,instance:t}}));case 9:o=e.sent,o.some((function(e){var r=e.Component,o=e.instance,c=r.options.watchQuery;return!0===c||(Array.isArray(c)?c.some((function(e){return f._diffQuery[e]})):"function"==typeof c&&c.apply(o,[t.query,n.query]))}))&&this.$loading.start&&!this.$loading.manual&&this.$loading.start();case 12:r(),e.next=26;break;case 15:if(e.prev=15,e.t0=e.catch(5),c=e.t0||{},l=c.statusCode||c.status||c.response&&c.response.status||500,d=c.message||"",!/^Loading( CSS)? chunk (\d)+ failed\./.test(d)){e.next=23;break}return window.location.reload(!0),e.abrupt("return");case 23:this.error({statusCode:l,message:d}),this.$nuxt.$emit("routeChanged",t,n,c),r();case 26:case"end":return e.stop()}}),e,this,[[5,15]])})))).apply(this,arguments)}function Zt(e,t){return Ht.serverRendered&&t&&_(e,t),e._Ctor=e,e}function en(e){var path=A(e.options.base,e.options.mode);return E(e.match(path),function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t,n,r,o,c){var l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t||t.options){e.next=4;break}return e.next=3,t();case 3:t=e.sent;case 4:return l=Zt(R(t),Ht.data?Ht.data[c]:null),r.components[o]=l,e.abrupt("return",l);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,o,c){return e.apply(this,arguments)}}())}function tn(e,t,n){var r=this,o=[],c=!1;if(void 0!==n&&(o=[],(n=R(n)).options.middleware&&(o=o.concat(n.options.middleware)),e.forEach((function(e){e.options.middleware&&(o=o.concat(e.options.middleware))}))),o=o.map((function(e){return"function"==typeof e?e:("function"!=typeof d[e]&&(c=!0,r.error({statusCode:500,message:"Unknown middleware "+e})),d[e])})),!c)return function e(t,n){return!t.length||n._redirected||n._errored?Promise.resolve():D(t[0],n).then((function(){return e(t.slice(1),n)}))}(o,t)}function nn(e,t,n){return rn.apply(this,arguments)}function rn(){return(rn=Object(o.a)(regeneratorRuntime.mark((function e(t,n,r){var o,c,l,d,f,h,v,m,x,k,w,T,R,E,C,P=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this._routeChanged||!1!==this._paramChanged||!1!==this._queryChanged){e.next=2;break}return e.abrupt("return",r());case 2:return Wt=t===n?[]:S(n,o=[]).map((function(e,i){return U(n.matched[o[i]].path)(n.params)})),c=!1,l=function(path){n.path===path.path&&P.$loading.finish&&P.$loading.finish(),n.path!==path.path&&P.$loading.pause&&P.$loading.pause(),c||(c=!0,r(path))},e.next=7,j($t,{route:t,from:n,next:l.bind(this)});case 7:if(this._dateLastError=$t.nuxt.dateErr,this._hadError=Boolean($t.nuxt.err),(f=S(t,d=[])).length){e.next=26;break}return e.next=14,tn.call(this,f,$t.context);case 14:if(!c){e.next=16;break}return e.abrupt("return");case 16:return h=(he.options||he).layout,e.next=19,this.loadLayout("function"==typeof h?h.call(he,$t.context):h);case 19:return v=e.sent,e.next=22,tn.call(this,f,$t.context,v);case 22:if(!c){e.next=24;break}return e.abrupt("return");case 24:return $t.context.error({statusCode:404,message:"This page could not be found"}),e.abrupt("return",r());case 26:return f.forEach((function(e){e._Ctor&&e._Ctor.options&&(e.options.asyncData=e._Ctor.options.asyncData,e.options.fetch=e._Ctor.options.fetch)})),this.setTransitions(Jt(f,t,n)),e.prev=28,e.next=31,tn.call(this,f,$t.context);case 31:if(!c){e.next=33;break}return e.abrupt("return");case 33:if(!$t.context._errored){e.next=35;break}return e.abrupt("return",r());case 35:return"function"==typeof(m=f[0].options.layout)&&(m=m($t.context)),e.next=39,this.loadLayout(m);case 39:return m=e.sent,e.next=42,tn.call(this,f,$t.context,m);case 42:if(!c){e.next=44;break}return e.abrupt("return");case 44:if(!$t.context._errored){e.next=46;break}return e.abrupt("return",r());case 46:x=!0,e.prev=47,k=Gt(f),e.prev=49,k.s();case 51:if((w=k.n()).done){e.next=62;break}if("function"==typeof(T=w.value).options.validate){e.next=55;break}return e.abrupt("continue",60);case 55:return e.next=57,T.options.validate($t.context);case 57:if(x=e.sent){e.next=60;break}return e.abrupt("break",62);case 60:e.next=51;break;case 62:e.next=67;break;case 64:e.prev=64,e.t0=e.catch(49),k.e(e.t0);case 67:return e.prev=67,k.f(),e.finish(67);case 70:e.next=76;break;case 72:return e.prev=72,e.t1=e.catch(47),this.error({statusCode:e.t1.statusCode||"500",message:e.t1.message}),e.abrupt("return",r());case 76:if(x){e.next=79;break}return this.error({statusCode:404,message:"This page could not be found"}),e.abrupt("return",r());case 79:return e.next=81,Promise.all(f.map((function(e,i){e._path=U(t.matched[d[i]].path)(t.params),e._dataRefresh=!1;var r=e._path!==Wt[i];if(P._routeChanged&&r)e._dataRefresh=!0;else if(P._paramChanged&&r){var o=e.options.watchParam;e._dataRefresh=!1!==o}else if(P._queryChanged){var c=e.options.watchQuery;!0===c?e._dataRefresh=!0:Array.isArray(c)?e._dataRefresh=c.some((function(e){return P._diffQuery[e]})):"function"==typeof c&&(R||(R=O(t)),e._dataRefresh=c.apply(R[i],[t.query,n.query]))}if(P._hadError||!P._isMounted||e._dataRefresh){var l=[],f=e.options.asyncData&&"function"==typeof e.options.asyncData,h=Boolean(e.options.fetch)&&e.options.fetch.length,v=f&&h?30:45;if(f){var m=D(e.options.asyncData,$t.context).then((function(t){_(e,t),P.$loading.increase&&P.$loading.increase(v)}));l.push(m)}if(P.$loading.manual=!1===e.options.loading,h){var p=e.options.fetch($t.context);p&&(p instanceof Promise||"function"==typeof p.then)||(p=Promise.resolve(p)),p.then((function(e){P.$loading.increase&&P.$loading.increase(v)})),l.push(p)}return Promise.all(l)}})));case 81:c||(this.$loading.finish&&!this.$loading.manual&&this.$loading.finish(),r()),e.next=98;break;case 84:if(e.prev=84,e.t2=e.catch(28),"ERR_REDIRECT"!==(E=e.t2||{}).message){e.next=89;break}return e.abrupt("return",this.$nuxt.$emit("routeChanged",t,n,E));case 89:return Wt=[],y(E),"function"==typeof(C=(he.options||he).layout)&&(C=C($t.context)),e.next=95,this.loadLayout(C);case 95:this.error(E),this.$nuxt.$emit("routeChanged",t,n,E),r();case 98:case"end":return e.stop()}}),e,this,[[28,84],[47,72],[49,64,67,70]])})))).apply(this,arguments)}function on(e,t){E(e,(function(e,t,n,o){return"object"!==Object(r.a)(e)||e.options||((e=c.default.extend(e))._Ctor=e,n.components[o]=e),e}))}function an(e){this._hadError&&this._dateLastError===this.$options.nuxt.dateErr&&this.error();var t=this.$options.nuxt.err?(he.options||he).layout:e.matched[0].components.default.options.layout;"function"==typeof t&&(t=t($t.context)),this.setLayout(t)}function sn(e,t){var n=this;if(!1!==this._routeChanged||!1!==this._paramChanged||!1!==this._queryChanged){var r=O(e),o=S(e);c.default.nextTick((function(){r.forEach((function(e,i){if(e&&!e._isDestroyed&&e.constructor._dataRefresh&&o[i]===e.constructor&&!0!==e.$vnode.data.keepAlive&&"function"==typeof e.constructor.options.data){var t=e.constructor.options.data.call(e);for(var n in t)c.default.set(e.$data,n,t[n]);window.$nuxt.$nextTick((function(){window.$nuxt.$emit("triggerScroll")}))}})),an.call(n,e)}))}}function cn(e){window.onNuxtReadyCbs.forEach((function(t){"function"==typeof t&&t(e)})),"function"==typeof window._onNuxtLoaded&&window._onNuxtLoaded(e),Yt.afterEach((function(t,n){c.default.nextTick((function(){return e.$nuxt.$emit("routeChanged",t,n)}))}))}function un(){return(un=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,r,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $t=t.app,Yt=t.router,t.store,n=new c.default($t),r=function(){n.$mount("#__nuxt"),Yt.afterEach(on),Yt.afterEach(sn.bind(n)),c.default.nextTick((function(){cn(n)}))},e.next=7,Promise.all(en(Yt));case 7:if(o=e.sent,n.setTransitions=n.$options.nuxt.setTransitions.bind(n),o.length&&(n.setTransitions(Jt(o,Yt.currentRoute)),Wt=Yt.currentRoute.matched.map((function(e){return U(e.path)(Yt.currentRoute.params)}))),n.$loading={},Ht.error&&n.error(Ht.error),Yt.beforeEach(Kt.bind(n)),Yt.beforeEach(nn.bind(n)),!Ht.serverRendered||Ht.routePath!==n.context.route.path){e.next=17;break}return r(),e.abrupt("return");case 17:l=function(){on(Yt.currentRoute,Yt.currentRoute),an.call(n,Yt.currentRoute),r()},nn.call(n,Yt.currentRoute,Yt.currentRoute,(function(path){if(path){var e=Yt.afterEach((function(t,n){e(),l()}));Yt.push(path,void 0,(function(e){e&&Xt(e)}))}else l()}));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(e){return Ct.apply(this,arguments)})().then((function(e){return un.apply(this,arguments)})).catch(Xt)}},[[542,20,12,21]]]);